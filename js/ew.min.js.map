{"version":3,"names":["ew$1","$$1","luxon","getDefaultExportFromCjs","x","__esModule","Object","prototype","hasOwnProperty","call","hasRequiredSprintf","sprintf$1","exports","sprintfExports","re","not_string","not_bool","not_type","not_primitive","number","numeric_arg","json","not_json","text","modulo","placeholder","key","key_access","index_access","sign","sprintf","parse_tree","argv","arg","i","k","ph","pad","pad_character","pad_length","is_positive","cursor","tree_length","length","output","keys","undefined","Error","param_no","test","type","Function","isNaN","TypeError","parseInt","toString","String","fromCharCode","JSON","stringify","width","precision","parseFloat","toExponential","toFixed","Number","toPrecision","substring","slice","toLowerCase","valueOf","toUpperCase","replace","pad_char","charAt","repeat","align","sprintf_format","fmt","sprintf_cache","match","_fmt","arg_names","exec","push","SyntaxError","field_list","replacement_field","field_match","sprintf_parse","arguments","vsprintf","apply","concat","create","window","sprintfjs","DateTime$1","DateTime","Validators","__proto__","between","el","z","_el$dataset$error10","id","startsWith","document","getElementById","endsWith","ew","hasValue","val","language","phrase","dataset","error","captcha","_el$dataset$error28","creditCard","value","getValue","_el$dataset$error22","checkCreditCard","custom","fn","_len","args","Array","_key","_ref2","_el$dataset$error27","datetime","format","_el$dataset$error15","checkDate","email","_el$dataset$error14","checkEmail","emails","cnt","err","checkEmails","fileRequired","fieldName","elFn","_el$dataset$error8","float","_el$dataset$error17","checkNumber","guid","_el$dataset$error24","checkGuid","integer","_el$dataset$error19","checkInteger","max","maxValue","parseNumber","_el$dataset$error33","HTMLElement","maxDate","maxDateTime","formatPattern","maxFormat","parseDate","Date","fromJSDate","zone","_el$dataset$error31","formatDateTime","DATE_FORMAT","TIME_FORMAT","min","minValue","_el$dataset$error32","minDate","minDateTime","minFormat","_el$dataset$error30","mismatchPassword","elPwd","_el$dataset$error9","password","raw","_el$dataset$error13","ENCRYPTED_PASSWORD","RegExp","escapeRegExChars","INVALID_PASSWORD_CHARACTERS","passwordStrength","$el","_el$dataset$error11","isMaskedPassword","hasClass","data","phone","_el$dataset$error20","checkPhone","range","_el$dataset$error18","checkRange","recaptcha","_grecaptcha","_el$dataset$error29","grecaptcha","getResponse","regex","pattern","_ref","_el$dataset$error25","checkByRegEx","required","_$el$data","$p","closest","css","_el$dataset$error7","ssn","_el$dataset$error23","checkSsn","time","_el$dataset$error16","checkTime","url","_el$dataset$error26","checkUrl","userLevelId","_el$dataset$error","_el$dataset$error2","userLevelName","elId","name","trim","level","_el$dataset$error3","_el$dataset$error4","_el$dataset$error5","_el$dataset$error6","sameText","includes","username","_el$dataset$error12","INVALID_USERNAME_CHARACTERS","zip","_el$dataset$error21","checkZip","_typeof","o","Symbol","iterator","constructor","toPropertyKey","t","r","e","toPrimitive","_defineProperties","enumerable","configurable","writable","defineProperty","_createClass","_setPrototypeOf","setPrototypeOf","bind","_inheritsLoose","_defineProperty","batchSettings","contentType","processData","dataType","toJSON","parse","batchSetup","options","extend","Batch","batch","func","this","parent","ajaxSetup","_batch","requests","add","_func$name","clear","send","instance","success","parentSuccess","status","xhr","map","request","settings","childSuccess","statusText","_deliver","ajax","_addRequest","_responses$error","_responses$error2","responses","description","alert","each","response","_request$settings$com","_request$settings$suc","complete","$ajax","FormBase","pageId","self","$self","_initiated","element","$element","htmlForm","initSearchPanel","modified","emptyRow","multiPage","autoSuggests","lists","formKeyCountName","submitWithFetch","enableOnInit","filterList","disableForm","body","style","form","getForm","elements","filter","prop","addClass","trigger","enableForm","$elements","removeClass","not","appendHidden","$form","$dp","attr","find","ar","serializeArray","forEach","appendTo","canSubmit","async","_await$this$validate","_this$validate","updateTextArea","validate","$dps","dp","j","$els","tagName","result","evt","Event","originalEvent","isDefaultPrevented","isObject","submit","_e$originalEvent","formAction","submitter","parseUrl","pathname","setAttribute","getAttribute","method","serialize","fetch","finally","getList","_this$getElement","obj","field","getElement","compileTemplates","values","list","template","isString","templates","getOptionTemplate","_this$element","_this$element2","getElements","fixId","multiple","rowindex","split","prefix","isNumber","updateList","immediate","_Object$entries$find","entries","entry","parents","parentFields","lookupOptions","updateOptions","getOptionValues","updateLists","_form$querySelector","isUndefined","querySelector","selector","join","isArray","deferreds","batchSize","ajaxBatchSize","b","splice","getApiUrl","API_LOOKUP_ACTION","when","then","source","target","fail","console","log","always","createAutoSuggest","assign","limit","AUTO_SUGGEST_MAX_ENTRIES","autoSuggestSettings","AutoSuggest","initEditors","ed","active","save","destroyEditor","destroy","onError","msg","initUpload","index","later","AJAX_DELAY","upload","setupFilters","filters","$sf","toggleClass","$df","$delete","$save","saveFilters","CLIENT_SEARCH_FILTER","localStorage","setItem","PROJECT_NAME","SERVER_SEARCH_FILTER","currentPage","done","_result$","off","on","prompt","input","html","sanitize","prevAll","remove","next","$submenu","insertBefore","currentPageID","action","append","TOKEN_NAME_KEY","TOKEN_NAME","ANTIFORGERY_TOKEN_KEY","ANTIFORGERY_TOKEN","cmd","refresh","setLayout","one","init","hasFormData","hide","render","loadjs","ready","setTimeout","is","$tab","$panel","$container","CONFIRM_CANCEL","href","location","from","matches","forms","beforeSend","before","Field","fldvar","validators","invalid","validator","addValidator","_proto","addError","_this$_error","_error","clearErrors","clearValidators","_element","shouldValidate","updateFeedback","resetInvalid","_this$_element","_this$_element$closes","classList","contains","server","fieldContainerSelector","innerHTML","errorMessage","_this$_element$closes2","feedback","setInvalid","focus","setFocus","canFocus","_el$style","_el$classList","hidden","readonly","disabled","display","get","_checkbox","checked","set","_this$_element2","activeElement","Form","_FormBase","_this","tryFocus","addField","fields","getField","addFields","addCustomError","rowIndex","setFieldElement","delay","makeVisible","focusDelay","preventScroll","autoFocusPreventScroll","_focused","_this$_error2","getFocusable","getFieldElements","autoFocus","detailpage","querySelectorAll","_ew$forms$get","TABLE_BASIC_SEARCH","gotoPageByElement","$pane","validateFields","getCurrentRowIndex","row","_form$querySelector2","_e$currentTarget","validateRequired","updateSelected","addcnt","inlineAdd","currentTarget","keycnt","keyCount","gridinsert","rowcnt","_await$this$customVal","_this$customValidate","customValidate","returnFocus","detailpages","_await$frm$validate","frm","_this$getForm$dataset","getFieldValue","_ew$forms$get2","some","_this$getForm$querySe","FormBuilder","setId","setPageId","setLists","setQueryBuilderLists","autoFillTargetFields","childFields","filterFieldVars","filterFields","addList","setFields","setValidate","setCustomValidate","setValidateRequired","setSubmit","setFormKeyCountName","setEmptyRow","setMultiPage","setSubmitWithFetch","setFilterList","setInitSearchPanel","setEnableOnInit","build","MultiPage","context","AjaxLookup","_this$list$parentFiel","_this$list$parentFiel2","elementId","formElement","m","pf","debounce","recordCount","formatResult","opt","isAutoSuggest","displayValue","generateRequest","page","LANGUAGE_ID","getUserParams","getOptionValue","getUrl","query","start","params","URLSearchParams","q","n","rnd","random","prepare","transform","results","totalRecordCount","records","toSelect2Data","every","item","Set","gf","group","children","lf","df","df2","df3","df4","_isAutoSuggest","_assertThisInitialized","ReferenceError","_AjaxLookup","$input","minWidth","maxHeight","highlight","hint","minLength","classNames","forceSelection","forceSelect","lineHeight","paddingY","lookupAllDisplayFields","d","setValue","ta","isOpen","menu","empty","$item","getActiveSelectable","typeahead","close","timer","loadingMore","tpl","suggestion","footer","syncResults","asyncResults","cancel","getSyncResults","Infinity","$menu","$node","$dataset","suggestionHeight","outerHeight","suggestions","rendered","count","h","scrollTop","toggle","loadingMoreTimer","_loadingMoreTimer","$footer","_loadingMoreTimer2","offset","top","getMore","v","findIndex","option","selected","SelectionListOption","datasets","_append","Forms","_ew$getForm","_forms","f","ids","lang","Select2Language","errorLoading","inputTooLong","overChars","maximum","inputTooShort","remainingChars","minimum","maximumSelected","noResults","searching","removeAllItems","removeItem","search","Utils$3","select2","amd","require","_defined","Select2ResultsDecorator","decorated","$results","displayMessage","escapeMarkup","hideLoading","$message","message","className","sort","cols","len","$row","last","$option","pagination","more","createElement","c","attrs","role","Element","msMatchesSelector","webkitMatchesSelector","_resultId","title","StoreData","Utils$2","ModalResults","container","_container$listeners$","listeners","pop","$highlighted","getHighlightedResults","GetData","_mousedown","$this","ModalSearch","$search","removeAttr","KEYS","$","PRINT_SCREEN","DropdownSearchDecorator","handleSearch","which","TAB","SHIFT","CTRL","ALT","_keyUpPrevented","term","Select2AttachBody","_AttachBody","_attachPositioningHandler","events","handler","_positionDropdown","_resizeDropdown","_detachPositioningHandler","_showDropdown","$dropdownContainer","$dropdownParent","_popper","Popper","createPopper","placement","IS_RTL","modifiers","enabled","_this$_popper2","update","_this$_popper3","ModalAttachBody","_bindContainerResultHandlers","stopPropagation","position","$dropdown","_containerResultsHandlersBound","$modal","_self$$search$","_updateDropdown","_e$originalEvent2","detach","end","oldValue","modal","event","draggable","FilterAttachBody","_hideDropdown","_this$_popper","outerWidth","_dropdownButton$close","contents","clone","triggerHandler","selection","_handleClear","$filterDropdown","dropdownButton","reference","DropdownAttachBody","_defined$1","AllowClear$1","Utils$1","FilterAllowClear","_AllowClear","_","isDisabled","$clear","$selection","previousVal","unselectData","prevented","Select2MultipleSelectionDecorator","Select2DataAdapterDecorator","_data$element","ResultsList","SingleSelection","MultipleSelection","Placeholder","AllowClear","SelectionSearch","EventRelay","Utils","Translation","SelectData","ArrayData","AjaxData","Tags","Tokenizer","MinimumInputLength","MaximumInputLength","MaximumSelectionLength","Dropdown","DropdownSearch","HidePlaceholder","InfiniteScroll","MinimumResultsForSearch","SelectOnClose","CloseOnSelect","DropdownCSS","TagsSearchHighlight","Defaults","defaults","dataAdapter","Decorate","minimumInputLength","maximumInputLength","maximumSelectionLength","tags","tokenSeparators","tokenizer","resultsAdapter","columns","customOption","iconClass","templateResult","selectOptions","_templateResult","loading","selectOnClose","dropdownAdapter","minimumResultsForSearch","closeOnSelect","dropdownCssClass","dropdown","selectionAdapter","allowClear","translations","dir","currentUrl","URL","$document$1","$body","initIcons","_e$target","tooltipOptions","IS_MOBILE","tooltip","_bootstrap$Tooltip$ge","bootstrap","Tooltip","getInstance","initPasswordOptions","_e$target2","pStrength","MIN_PASSWORD_STRENGTH","changeBackground","backgrounds","passwordValidFrom","onPasswordStrengthChanged","strength","percentage","$pst","$pb","pct","valid","setValid","pGenerator","passwordLength","GENERATE_PASSWORD_LENGTH","uppercase","GENERATE_PASSWORD_UPPERCASE","lowercase","GENERATE_PASSWORD_LOWERCASE","numbers","GENERATE_PASSWORD_NUMBER","specialChars","GENERATE_PASSWORD_SPECIALCHARS","onPasswordGenerated","pwd","PATH_BASE","API_URL","qs","route","encodeURIComponent","_pathname","_hash","hash","searchParams","createSearchParams","getSearchParams","setSearchParams","mergeSearchParams","buildUrl","_len2","_key2","has","setSearchParam","deleteSearchParam","_len3","names","_key3","delete","PAGE_LAYOUT","sanitizeUrl","decodeURIComponent","initExportLinks","_e$target3","fileDownload","getchartParams","preventDefault","initMultiSelectCheckboxes","_e$target4","$cbs","_update","getError","_result$error","_result$error2","failureMessage","isHtml","API_EXPORT_ACTION","swal","Swal","fire","sweetAlertSettings","showConfirmButton","allowOutsideClick","allowEscapeKey","willOpen","showLoading","_fetch","ct","headers","_getError","blob","createObjectURL","Blob","a","cd","download","appendChild","click","objectUrl","revokeObjectURL","catch","lazyLoad","_e$target5","LAZY_LOAD","img","LAZY_LOAD_DELAY","src","initLightboxes","_e$target6","USE_COLORBOX","lightboxSettings","current","previous","xhrError","imgError","colorbox","rel","initPdfObjects","_e$target7","EMBED_PDF","PDFObjectOptions","PDFObject","embed","fallbackLink","initTooltips","_e$target8","popover","popoverOptions","tippy","content","tippyOptions","parseJson","searchOperatorChange","parm","$fld","$fld2","hasY","$cond","hasCond","$and","opr","$opr2","opr2","isBetween","isEmptyOpr","isEmptyOpr2","hideOpr2","hideX","hideY","initForms","_e$target9","isFunction$2","_alert","cb","config","confirmButtonText","customClass","htmlContainer","show","isConfirmed","_prompt","cfg","_config","showCancelButton","cancelButtonText","inputValidator","toast","toastOptions","Toasts","first","showToast","class","autohide","autoHideSuccessMessage","autoHideSuccessMessageDelay","$f","parentId","change","_obj","_batch$send","els","getId","isTextbox","isFilter","$elf","typ","elf","_updateOptions","autoFill","fo","frmo","arp","$obj","clearOptions","addOpt","newOption","selectOption","_updateSibling","isBoolean","ds","isNativeSelectOne","isModalLookup","MULTIPLE_OPTION_SEPARATOR","jqXHR","textStatus","errorThrown","root","exportCustom","divId","exportType","tblVar","_div$children$","div","customexport","exportEmail","convertToBool","charts","exportCharts","chart","chartEngine","streamType","stream","toBase64Image","fileName","_export","export","exportSelected","emailForm","keySelected","postParams","_document$querySelect","$iframe","isHiddenTextArea","_el$dataset","modalLookup","_el$dataset2","isSelect2","isBooleanCheckbox","isHidden","reset","once","BROWSER_NAME","scrollIntoView","scrollIntoViewOptions","selectAll","clearSelected","tbl","rowIndexes","rows","clearDelete","$tr","siblings","addBack","clickDelete","setupTable","force","HTMLTableElement","$tbl","$rows","isset","tBodies","$target","cells","parentsUntil","RESPONSIVE_TABLE_CLASS","cell","rowSpan","clientHeight","offsetHeight","attach","$r","setupGrid","grid","$grid","$cells","htmlDecode","$root","selectors","getFieldSelector","table","s1","s2","flatMap","tag","sel","eq","getAncestorBy","node","parentNode","_node","nodeType","o1","o2","samePath","p1","p2","ar1","ar2","LIST_ACTION","VIEW_ACTION","EDIT_ACTION","isValue","getOptionTexts","lo","hasAttribute","removeAll","valueSeparator","sep","reduce","addOption","_obj$querySelector","optGroup","g","label","_obj$dataset","_forms$get$getList","_obj$options$","selectedIndex","opts","autoselect","Headers","API_JWT_TOKEN","API_JWT_AUTHORIZATION_HEADER","FormData","executeScript","replaceAll","matchAll","createRange","createContextualFragment","s","addScript","nonce","stripScript","scr","HTMLScriptElement","removeScript","getContent","keepScripts","_m$","$content","getOptions","modalDialogHide","$dlg","removeData","showing","reload","dest_array","destEl","v0","pid","p","post","$tt","trig","Popover","wd","_getTipElement","initSearchFilters","_e$target11","btn","IS_LOGGED_IN","IS_SYS_ADMIN","CURRENT_USER_NAME","_frm$filterList$filte","_frm$filterList","formId","getItem","_ref3","_ref4","copyToClipboard","_source","_source2","str","innerText","left","select","execCommand","removeChild","object_value","showMessage","_arg$target","doc","$div","$alert","$heading","w","$toast","Math","floor","Pace","_forms$get","jqxhr","isApi","allowed","hostname","setRequestHeader","lastPageSubmit","Interval","dt","fromSQL","fromSeconds","toFormat","locale","numberingSystem","getNumberingSystem","parseDateTime","fromFormat","redirect","_ew$vars","newUrl","vars","login","_entry$","_entry$2","protocol","host","size","isMediumScreen","matchMedia","screenMediaQuery","promise","dashboard","$overlay","overlayTemplate","Response","validation","CardRefresh","warningMessage","successMessage","$html","unshift","history","pushState","$old","$new","$tmpl","$searchType","TABLE_BASIC_SEARCH_TYPE","replaceWith","initPage","_bootstrap$Tooltip$ge7","_fixLayoutHeightTimer","functions","Select2Defaults","Select2Utils","addEventHandlers","fldVar","addGridRow","_bootstrap$Tooltip$ge2","$tpl","$lastrow","suffix","$keycnt","FORM_KEY_COUNT_NAME","FORM_ROW_ACTION_NAME","attributes","$btn","dispose","after","scrollHeight","addOptionDialogShow","_args$evt2","lnk","addOptionDialog","_submitSuccess","_results","objName","API_OBJECT_NAME","linkField","dfs","displayFields","ffs","pfs","lfv","ff","txt","obj2","_results2","_results3","_fail","_submit","API_ADD_ACTION","nodeName","callback","_convert","API_LIST_ACTION","API_VIEW_ACTION","API_DELETE_ACTION","responseJSON","applyTemplate","tmplId","classId","isModal","_parent$querySelector","subtmpl","rowspan","childNodes","cloneNode","views","textContent","hasTag","jsRenderAttributes","scripts","tmpl","creditcard_string","tempdigit","doubledigit","checkdigit","isValid","email_cnt","arEmails","DECIMAL_SEPARATOR","min_value","max_value","clearError","jquery","confirmDelete","modalDialogShow","createFilter","selectId","lookup","processResults","_data$records$length3","_data$records3","transport","failure","$select","_$$data$$dropdown$fin3","createModalLookup","_data$records$length2","_data$records2","_$$data$$dropdown$fin2","createSelect","_data$records$length","_data$records","_$$data$$dropdown$fin","deleteGridRow","infix","_bootstrap$Tooltip$ge3","rowidx","_delete","$keyact","disable2FA","authType","preConfirm","API_2FA_ACTION","API_2FA_RESET","CURRENT_USER_IDENTIFIER","_result$error8","twofa","refreshTemplate","emailDialogShow","emailDialog","_e$target$querySelect","_$$closest$find$data","MAX_EMAIL_RECIPIENT","hdr","enable2FA","API_2FA_SHOW","_result$error4","imageUrl","showLoaderOnConfirm","isLoading","getConfirmButton","disableInput","getImage","onload","enableInput","getInput","API_2FA_VERIFY","showValidationMessage","_result$error3","_result$error7","inputValue","account","API_2FA_SEND_OTP","_result$error5","_result$error6","fixLayoutHeight","layout","formatCurrency","CURRENCY_FORMAT","formats","getLocaleFromPlatform","NUMBERING_SYSTEM","numeralSystem","delimiters","thousands","GROUPING_SEPARATOR","decimal","currency","CURRENCY_SYMBOL","formatNumber","NUMBER_FORMAT","formatPercent","PERCENT_FORMAT","formatTimeSpan","allDay","to","equals","startOf","minus","interval","days","isInteger","Intl","NumberFormat","resolvedOptions","getQueryBuilderFilterInput","rule","_document$getElementB","_span$innerHTML$repla","span","queryBuilderErrorClass","$0","$1","$2","getQueryBuilderFilterValidation","$value","errors","operator","nb_inputs","$invalid","getQueryBuilderValueSetter","getSearchParam","headerCase","htmlEncode","importDialogShow","_args$evt6","_bootstrap$Tooltip$ge5","importDialog","sse","$dropzone","$bd","$data","$progress","classname","$msg","hideMessage","showProgress","pc","updateProgress","tcnt","totalCount","scnt","successCount","fcnt","failCount","filename","file","addRow","_index","_success","initialized","Tabulator","autoColumns","autoColumnsDefinitions","definitions","column","headerSort","resizable","visible","headerSortTristate","formatter","textOverflow","getRow","getData","importTabulatorOptions","importComplete","_sse","fileResults","files","fileResult","rollbacked","IMPORT_MAX_FAILURES","saveImport","importFail","_sse2","_table2","clearData","API_ACTION_NAME","API_IMPORT_ACTION","API_FILE_TOKEN_NAME","EventSource","addEventListener","importUploadOptions","acceptFileTypes","IMPORT_FILE_ALLOWED_EXTENSIONS","fileupload","API_UPLOAD_ACTION","autoUpload","singleFileUploads","dropZone","messages","maxFileSize","maxNumberOfFiles","minFileSize","SESSION_ID","_data$result","importfiles","filetoken","_table","importFiles","processfail","progressall","loaded","total","uploadProgress","_this$querySelector","_table3","_table4","removeAttribute","_e$target12","$tables","initPanels","renderJsTemplates","_localStorage$getItem","inputs","$rpt","mh","toggleGroup","USE_JAVASCRIPT_MESSAGE","inlineAction","_args$evt","$detached","ewAction","$record","curindex","_always","_deleted","_disableInlineButtons","_enableInlineButtons","_getTable","_updateRowIndexes","inline","rowtype","Promise","resolve","prepend","$main","ROWTYPE_VIEW","ROWTYPE_ADD","returnUrl","_$grid$data","isFunction","isMobile","_args$evt3","_bootstrap$Tooltip$ge4","_args$evt4","_args$evt5","_$dlg$data","_$dlg$data2","modalDialog","_caption","$lnk","caption","_hide","handleResult","_lnk$closest","_lnk$closest2","_tabPane$parentNode","btnId","tabPane","navItem","_current","view","_createButtons","_button","_return","_resp$headers$get","resp","isJson","hasErrors","lnkData","$tokenName","$antiForgeryToken","$dlglnk","stopImmediatePropagation","Modal","_focustrap","__handleFocusin","_handleFocusin","_e$target10","Accept","opt2FA","API_2FA_ENABLE","API_2FA_DISABLE","_result$error9","indeterminate","parseTime","removeSpaces","resendOtp","sendOtp","_$container$data","elapsed","remaining","resendOtpInterval","_$container$data2","reset2FA","_result$error10","sameString","selectAllKeys","selectKey","chk","user","_result$error12","setActiveUser","setLanguage","setSearchType","searchType","phraseId","setSessionTimer","timeoutTime","keepAliveTimer","counter","keepAlive","API_SESSION_ACTION","token","setTimer","resetTimer","_timer","SESSION_TIMEOUT_COUNTDOWN","SESSION_TIMEOUT","doTimeout","TIMEOUT_URL","timeout","_keepAliveTimer","timerInterval","timerProgressBar","setInterval","getHtmlContainer","sec","timeleft","round","getTimerLeft","willClose","clearInterval","dismiss","DismissReason","_ew$vars$login","SESSION_KEEP_ALIVE_INTERVAL","IS_REMEMBER_ME","keepAliveInterval","MIN_SESSION_KEEP_ALIVE_INTERVAL","showBackupCodes","showDenyButton","showLoaderOnDeny","denyButtonText","denyButton","disableButtons","API_2FA_BACKUP_CODES","codes","enableButtons","preDeny","getDenyButton","API_2FA_NEW_BACKUP_CODES","showDrillDown","ctrlKey","spinnerTemplate","draggableOptions","boundary","cache","$tip","responseText","_result$error13","_result$error14","setContent","sortUrl","sortType","shiftKey","ctrl","submitAction","_window$msg","isAjax","isRedirect","isPostBack","isMultiple","isDismissed","toggleChat","API_CHAT_ACTION","_result$error11","idx","toggleLayout","_bootstrap$Tooltip$ge6","togglePassword","$i","toggleSearchOperator","updateChart","$debug","updateDropdownPosition","prev","nid","$ft","$fn","$fa","$label","_confirmDelete","confirm","uploadUrl","API_JQUERY_UPLOAD_ACTION","_downloadTemplate","_uploadTemplate","formData","session","deepAssign","multipart","loadImageFileTypes","loadVideoFileTypes","loadAudioFileTypes","filesContainer","uploadTemplateId","downloadTemplateId","uploadTemplate","downloadTemplate","previewMaxWidth","UPLOAD_THUMBNAIL_WIDTH","previewMaxHeight","UPLOAD_THUMBNAIL_HEIGHT","uploadOptions","MULTIPLE_UPLOAD_SEPARATOR","fid","indexOf","_data$files","l","_data$files2","_data$result2","_data$files3","valueChanged","fobj","fld","bool","oldEl","fnEl","fullCalendar$1","fullCalendar","calendar","updateTable","eventFields","addUrl","viewUrl","editUrl","deleteUrl","copyUrl","fullCalendarOptions","eventPopoverOptions","processJson","convertValue","_calendar$getEventByI","getEventById","addEvent","curEvent","groupId","setStart","setEnd","setAllDay","setExtendedProp","setProp","processEvent","info","relatedEvents","apiAction","API_EDIT_ACTION","processRequest","revert","reject","toPlainObject","collapseExtendedProps","toISOString","apiUrl","getFldParm","currentTable","urlAddId","addEventDialogShow","_data$view","viewType","startStr","endStr","startFld","endFld","allDayFld","viewEventDialogShow","customButtons","headerToolbar","bsDropdown","getOrCreatePopover","Default","getOrCreateInstance","seq","shift","_Array$from$find$repl","_Array$from$find","popoverClass","_templateFactory","generateGetBoundingClientRect","y","rect","getBoundingClientRect","jsEvent","offsetX","offsetY","height","right","bottom","virtualElement","useContextMenu","bsToggle","button","clearMenus","_menu","eventId","editEventDialogShow","deleteEvent","drop","draggedEl","eventReceive","eventDragStart","_bootstrap$Popover$ge","eventDrop","eventResize","eventClick","extendedProps","_bootstrap$Popover$ge2","open","usePopover","_getOrCreatePopover","showViewPageOnEventClick","eventMouseEnter","_bsDropdown","_getOrCreatePopover2","_isShown","popoverViews","eventMouseLeave","_bsDropdown2","_bootstrap$Popover$ge3","FullCalendar","Calendar","isPushNotificationSupported","navigator","urlBase64ToUint8Array","base64String","base64","rawData","atob","outputArray","Uint8Array","charCodeAt","sendSubscriptionToServer","subscription","getKey","contentEncoding","PushManager","supportedContentEncodings","endpoint","btoa","createSubscription","API_PUSH_NOTIFICATION_ACTION","API_PUSH_NOTIFICATION_SUBSCRIBE","serviceWorkerReg","serviceWorker","pushManager","subscribe","userVisibleOnly","applicationServerKey","PUSH_SERVER_PUBLIC_KEY","getSubscription","setSubscription","inst","subscribeNotification","Notification","permission","_await$getSubscriptio","requestPermission","_document$getElementB2","checkSubscription","unsubscribeNotification","res","unsubscribe","API_PUSH_NOTIFICATION_DELETE","register","SERVICE_WORKER","scope","webpush","pushNotificationDialogShow","pushDialog","successes","acc","cur","failures","inited","latlng","useSingleMap","showAllMarkers","useMarkerClusterer","ext","maps","singleMapHeight","singleMapWidth","showMapOnTop","createMap","createBounds","createMarkerClusterer","marker","createMarker","fitBounds","promises","address","geocodingDelay","geocode","latitude","longitude","coordinate","createLatLng","all","_ew$UA_PARSER$getDevi","_ew$UA_PARSER$getBrow","UA_PARSER","UAParser","userAgent","getDevice","getBrowser","formid","formID","pageIndex","maxPageIndex","minPageIndex","pageIndexes","$pages","$collapses","isTab","isCollapse","hideDisabledButton","hideInactivePages","lockTabs","hideTabs","showPagerTop","showPagerBottom","pagerTemplate","_show","_properties","pageShow","gotoPage","$page","gotoPageByIndex","gotoPageByElementId","togglePage","$tabs","google","setCenter","$bodies","$document","_$$offset","debugMode","DEBUG","animate","panel","Collapse","_window$$loginWizard","$loginWizard","smartWizard","actions","_this$form","pageSize","zIndex","blueimp","processQueue","fileTypes","cropperOptions","cropperCanvasOptions","widget","processActions","cropImage","dfd","Deferred","that","cropperDialog","Cropper","getCroppedCanvas","toBlob","File","resolveWith","rejectWith","isFinite","isDate","periodic","clearTimeout","_row$key$add","_row$key","_this$data$substring","_this$data","_this$data2","_this$data$substring2","_this$data3","_this$data4","toNumber","toDate","_ew$vars$tables","tables","clientFormatPattern","toJsDate","toJSDate","mutationList","mutation","MutationObserver","observe","_parent","attributeFilter","attributeOldValue","subtree","$chatWrapper","$chatCheck","$chatBtn","$chatClose","$chatComment","$chatCard","$chatHeader","$chatCollapse","$chatBody","$chatIframe","_Pace","running","iframe","queue","dequeue","contentDocument","isNil$1","isFunction$1","isNaNNumber$1","isFiniteNumber$1","multiplyByPowerOfTen$1","powerOfTenExponent","NaN","numAsString","indexOfE","log10$1","numberThatIsPowerOfTen","LOG10E","toObject$1","arr","entriesResolver","object","escapeRegexString$1","string","memoize$1","cacheKey","powerOf10LookupObject","currentValue","additionalZeros","isPowerOfTen$1","toBase","valueUnit","unitScale","base","scale","toBaseMultiplier","convertUnit","originUnit","targetUnit","valueAsBase","resolvedScale","conversionFactorFromBase","unitScaleDefinition","unit","convert","toBest","exclude","cutOffNumber","best","scaleUnit","absoluteResult","abs","scaleDefinition","stringRepeat$1","createUnitScaleFromLocaleAbbreviations$1","scaleItem","scaleItemIndex","formattedStringToNumber$1","inputString","_a","stringOriginal","stringWithLatinDigits","numericStringWithExtraInfo","numeralSystemMap","numericStringLength","numeralSystemToLatinSystemMap","digit","digitIndex","numericStringIndex","char","replaceNumeralSystemWithLatinNumbers","zeroFormat","nullFormat","decimalDelimiterFromLocale","stringWithDotDecimalDelimiter","abbreviationScalingFactor","abbreviations","abbreviationsSortedByLengthDesc","abbreviation","scapedAbbreviationForRegex","regexp","getScalingFactorFromAbbreviations","negativeFactor","numberAsString","locale$1","code","ordinal","merge","newObject","argsLength","isObject$1","isString$1","truncateNumber$1","ceil","getPatternParts","patternMask","isInEscapedPart","currentEscapedWord","parts","escaped","patternIncludes","patternRemoveEscapedText","patternReplace","searchValue","replaceValue","stringIncludes$1","signRule$1","patternWithoutEscapedText","negativeParentheses","forceSign","outputPatternMask","abbreviationRule$1","compactUnit","compact","abbreviationRegExpResult","compactAuto","splitStringInTwoParts$1","separator","indexOfSearchChar","countChars","stringChar","decimalPlacesRule$1","patternPrecisionPart","minimumFractionDigits","maximumFractionDigits","trimmedPatternPrecisionPart","patternPrecisionPartWithoutClosingBracket","precisionSplitted","fractionDigits","optionalDecimalPlacesRule$1","optionalFractionDigits","parsePattern$1","inputPattern","resolvedInputPattern","patternMaskAfterSignRule","signRules","patternMaskAfterAbbreviationRule","abbreviationRules","patternMaskAfterOptionalDecimalPlacesRule","optionalDecimalPlacesRules","outputPatternMaskWithoutEscapedText","decimalPlacesRules","minimumIntegerDigits","patternMaskIntegerPart","minimumIntegerDigitsRule","grouping","patternMaskAfterHandlingNumberPosition","numberPositionRule","patternMaskWithEnsuredSignPosition","addSignPositionIfItDoesNotExists","removeSignIfExists$1","valueAsString","rescaleRoundedValue$1","currentAbbreviationScale","patternRules","newScaledValue","newScaledValueUnit","scaleValueWithAbbreviation$1","forcedAbbreviationUnit","abbreviationsFromLocale","targetPowerOfTenExponent","scaleDefinitionFromLocale","closestPowerOfTenWithAvailableAbbreviation","distanceFromTarget","resolveForcedAbbreviationUnit","scaledValue","localizedUnit","roundNumber$1","roundingFunction","resolvedPrecision","roundedScaledValue","numberToNonExponentialString$1","significand","exponent","exponentAsNumber","integerPartOfSignificand","fractionalPartOfSignificand","numberOfZerosToAdd","formatPositiveExponentResult","significandAsString","negativeExponentAbsoluteValue","outputIntegerPartOfSignificand","outputFractionalPartOfSignificand","firstCharInIntegerPart","formatNegativeExponentResult","numberToFixed$1","finiteNumber","fractionalPartOfValueAsString","targetFractionDigitsAmount","roundedValue","integerPart","fractionalPart","addTrailingZerosInFractionalPart","roundValueAndAddTrailingZeros$1","rounding","resolvedRoundingFunction","replaceDigitsWithNumeralSystem$1","numericString","addOrRemoveLeadingZerosToValue$1","valueIntegerPartWithoutSign","addSignInfoToFullFormattedNumber$1","fullFormattedValueWithoutSign","isValueNegative","isValueZero","splitNumberIntegerAndDecimalParts$1","decimalPart","addThousandsSeparatorToValueIntegerPart$1","valueIntegerPartWithLeadingZerosAndWithoutSign","digitGroupingStyle","thousandsSeparator","restDigitGrouping","groupingSubIteration","applyAbbreviationLocalizedUnitToPatternMask$1","abbreviationLocalizedUnit","hasAbbreviationInPatternMask","numberToFormattedNumber$1","resolvedValue","localizedAbbreviationUnit","scaledValueLocalizedUnit","rescaledValue","rescaledValueLocalizedUnit","scaleAndRoundValue","signedZero","valueAsStringWithoutSign","valueIntegerPartWithLeadingZeros","valueIntegerPartWithThousandsSeparator","numeralSystemFromLocale","integerPartWithNumeralSystem","decimalPartWithNumeralSystem","fullNumberWithNumeralSystem","patternMaskWithNumber","cleanPatternMask","bpsFormatter$1","regexps","unformat","patternWithEscapedBPS","timeFormatter$1","absoluteValue","hours","minutes","seconds","isNegative","timeArray","reverse","decimalSuffixes","binarySuffixes","unformatRegex","bytesDecimalScale","unitIndex","pow","bytesBinaryScale","currencySymbolsMap","EUR","USD","XCD","AUD","INR","BRL","CAD","XAF","CNY","NZD","XPF","GBP","HKD","ILS","JPY","KRW","XOF","MXN","TWD","VND","BUILT_IN_FORMATTERS$1","hasNotScalePercentageSymbolInPattern","scalePercentage","patternWithEscapedPercentage","currencyFromOptions","localizedCurrencySymbol","patternWithEscapedCurrencySymbol","_b","localizedOrdinal","patternWithEscapedOrdinal","scaledValueUnit","patternWithEscapedBytes","exponential","patternWithoutExponential","roundHalfAwayFromZero$1","resolveFormatOptions$1","formatOptions","_c","roundingOption","resolveRoundingOption","resolvedLocale","optionsLocale","defaultLocale","resolveOptionsLocale","resolvedFormatters","optionsFormatters","formatters","defaultPattern","nanFormat","nonBreakingSpace","parse$1$1","inputStringWithNormalSpaces","unformatFunctionFromFormatters","matcher","getUnformatFunctionIfMatch","parse$1","round$1","format$1$1","resolvedPattern","resolvedValueAsNumber","formatFunctionFromFormatters","getFormatFunctionIfMatch","_errorFormat","arg2","arg3","withOptions","baseOptions","optionsFromArguments","unique$1","rtlCharsRanges","rtlDirCheck","appendLeftToRightMarkIfIsRTL","isRTL","languagesWith4DigitsGroupingStyle","getAbbreviations","languageTag","digits","intlFormatOptions","notation","useGrouping","compactDisplay","digitOfZero","digitOfOne","digitOfTwo","abbreviationResultForOne","toLocaleString","abbreviationResultForTwo","abbreviationOne","abbreviationTwo","resultIndex","_err","getLocaleFromPlatform$1$1","resolvedLanguageTag","localizedNumber","lookupObject","repeatedChar","digitsAsArray","getNumeralSystemDigits","resolvedDigits","localizedNumberWithoutDigits","groupingDelimiter","fractionDelimiter","getGroupingAndFractionDelimiters","groupingStyle","subIterationIndex","digitOrGroupingDelimiter","getGroupingStyle","shortAbbreviations","_abbreviationsLong","numerable","jQuery"],"sources":["0"],"sourcesContent":["/*!\n * JavaScript for PHPMaker v2025.2.1\n * Copyright (c) e.World Technology Limited. All rights reserved.\n */\n(function (ew$1, $$1, luxon) {\n  'use strict';\n\n  function MultiPage(formid) {\r\n    var self = this;\r\n    this.$form = null;\r\n    this.formID = formid;\r\n    this.pageIndex = 1;\r\n    this.maxPageIndex = 0;\r\n    this.minPageIndex = 0;\r\n    this.pageIndexes = [];\r\n    this.$pages = null;\r\n    this.$collapses = null;\r\n    this.isTab = false; // Is tabs\r\n    this.isCollapse = false; // Is collapses (accordion)\r\n    this.lastPageSubmit = false; // Enable submit button for the last page only\r\n    this.hideDisabledButton = false; // Hide disabled submit button\r\n    this.hideInactivePages = false; // Hide inactive pages\r\n    this.lockTabs = false; // Set inactive tabs as disabled\r\n    this.hideTabs = false; // Hide all tabs\r\n    this.showPagerTop = false; // Show pager at top\r\n    this.showPagerBottom = false; // Show pager at bottom\r\n    this.pagerTemplate = '<nav><ul class=\"pagination\"><li class=\"page-item previous ew-prev\"><a href=\"#\" class=\"page-link\"><i class=\"fa-solid fa-angle-left\"></i> {Prev}</a></li><li class=\"page-item next ew-next\"><a href=\"#\" class=\"page-link\">{Next} <i class=\"fa-solid fa-angle-right\"></i></a></li></ul></nav>'; // Pager template\r\n\r\n    // \"show\" handler (for disabled tabs)\r\n    var _show = function (e) {\r\n      e.preventDefault();\r\n    };\r\n\r\n    // Set properties\r\n    var _properties = [\"lastPageSubmit\", \"hideDisabledButton\", \"hideInactivePages\", \"lockTabs\", \"hideTabs\", \"showPagerTop\", \"showPagerBottom\", \"pagerTemplate\"];\r\n    this.set = function () {\r\n      if (arguments.length == 1 && $$1.isObject(arguments[0])) {\r\n        var obj = arguments[0];\r\n        for (var i in obj) {\r\n          var p = i[0].toLowerCase() + i.substring(1); // Camel case\r\n          if (_properties.includes(p)) this[p] = obj[i];\r\n        }\r\n      }\r\n    };\r\n\r\n    // DOM loaded\r\n    this.init = function () {\r\n      var tpl = this.pagerTemplate.replace(/\\{prev\\}/i, ew.language.phrase(\"Prev\")).replace(/\\{next\\}/i, ew.language.phrase(\"Next\"));\r\n      if (this.isTab) {\r\n        if (this.showPagerTop) this.$pages.closest(\".ew-nav\").before(tpl);\r\n        if (this.showPagerBottom) this.$pages.closest(\".ew-nav\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().prev(\":has([data-bs-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().next(\":has([data-bs-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        if (this.hideTabs) this.$form.find(\".ew-multi-page > .ew-nav > .nav\").hide();\r\n      } else if (this.isCollapse) {\r\n        if (this.showPagerTop) this.$collapses.closest(\".ew-accordion\").before(tpl);\r\n        if (this.showPagerBottom) this.$collapses.closest(\".ew-accordion\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.closest(\".accordion-item\").filter(\":has(.collapse.show)\").prev(\":has([data-bs-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-bs-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.closest(\".accordion-item\").filter(\":has(.collapse.show)\").next(\":has([data-bs-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-bs-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n      }\r\n      this.pageShow();\r\n    };\r\n\r\n    // Page show\r\n    this.pageShow = function () {\r\n      if (this.isTab) {\r\n        if (this.lockTabs) this.$pages.on(\"show.bs.tab\", _show);\r\n        this.$pages.each(function () {\r\n          var $this = $$1(this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.hasClass(\"active\"));\r\n          if (self.lockTabs) $this.toggleClass(\"disabled\", !$this.hasClass(\"active\"));\r\n        });\r\n      } else if (this.isCollapse) {\r\n        this.$pages.closest(\".accordion-item\").each(function () {\r\n          var $this = $$1(this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.find(\".collapse.show\")[0]);\r\n        });\r\n      }\r\n      var disabled = this.lastPageSubmit && this.pageIndex != this.maxPageIndex;\r\n      var $btn = this.$form.closest(\".content, .modal-content\").find(\"#btn-action, button.ew-submit\").prop(\"disabled\", disabled).toggle(!this.hideDisabledButton || !disabled);\r\n      $$1(\".ew-captcha\").toggle($btn.is(\":visible:not(:disabled)\")); // Re-captcha uses class \"disabled\", not \"disabled\" property.\r\n      disabled = this.pageIndex <= this.minPageIndex;\r\n      this.$form.find(\".ew-prev\").toggleClass(\"disabled\", disabled);\r\n      disabled = this.pageIndex >= this.maxPageIndex;\r\n      this.$form.find(\".ew-next\").toggleClass(\"disabled\", disabled);\r\n    };\r\n\r\n    // Go to page by index\r\n    this.gotoPage = function (i) {\r\n      if (i <= 0 || i < this.minPageIndex || i > this.maxPageIndex) return;\r\n      if (this.pageIndex != i) {\r\n        var $page = this.$pages.eq(i - 1);\r\n        if (this.isTab) {\r\n          if ($page.is(\":not(.d-none):not(.disabled)\")) $page.click();else $page.parent().next(\":has([data-bs-toggle=tab]):not(.d-none):not(.disabled)\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled\", false).click();\r\n        } else if (this.isCollapse) {\r\n          var $p = $page.closest(\".accordion-item\");\r\n          if ($p.is(\":not(.d-none)\")) $page.click();else $p.next(\":has([data-bs-toggle=collapse]):not(.d-none)\").find(\"[data-bs-toggle=collapse]\").click();\r\n        }\r\n        this.pageIndex = i;\r\n      }\r\n    };\r\n    this.gotoPageByIndex = this.gotoPage;\r\n\r\n    // Go to page by element\r\n    this.gotoPageByElement = function (el) {\r\n      this.gotoPage(parseInt($$1(el).data(\"page\"), 10) || -1);\r\n    };\r\n\r\n    // Go to page by element's id or name or data-field attribute\r\n    this.gotoPageByElementId = function (id) {\r\n      var $el = this.$form.find(\"[data-page]\").filter(\"[id='\" + id + \"'],[name='\" + id + \"'],[data-field='\" + id + \"']\");\r\n      this.gotoPageByElement($el);\r\n    };\r\n\r\n    // Toggle page\r\n    this.togglePage = function (i, show) {\r\n      if (this.isTab) {\r\n        this.$pages.eq(i - 1).toggleClass(\"d-none\", !show);\r\n      } else if (this.isCollapse) {\r\n        this.$pages.eq(i - 1).closest(\".accordion-item\").toggle(\"d-none\", !show);\r\n      }\r\n    };\r\n\r\n    // Render\r\n    this.render = function () {\r\n      this.$form = $$1(\"#\" + formid);\r\n      this.pageIndexes = this.$form.find(\"[data-page]\").map(function () {\r\n        var index = parseInt(this.dataset.page, 10);\r\n        return index > 0 ? index : null;\r\n      }).get();\r\n      this.pageIndexes.sort(function (a, b) {\r\n        return a - b;\r\n      });\r\n      this.minPageIndex = this.pageIndexes[0];\r\n      this.maxPageIndex = this.pageIndexes[this.pageIndexes.length - 1];\r\n      var $tabs = this.$form.find(\"[data-bs-toggle=tab]\");\r\n      if ($tabs[0]) {\r\n        this.$pages = $tabs;\r\n        this.isTab = true;\r\n        $tabs.on(\"shown.bs.tab\", function (e) {\r\n          self.pageIndex = $tabs.index(e.target) + 1;\r\n          self.pageShow();\r\n          $$1($$1(this).attr(\"href\")).find(\".ew-map\").each(function () {\r\n            var m = ew.maps[this.id];\r\n            if (m != null && m[\"map\"]) {\r\n              google.maps.event.trigger(m[\"map\"], \"resize\");\r\n              m[\"map\"].setCenter(m[\"latlng\"]);\r\n            }\r\n          });\r\n        });\r\n        this.pageIndex = $tabs.index($tabs.parent(\".active\")) + 1;\r\n      } else {\r\n        this.$collapses = this.$form.find(\"[data-bs-toggle=collapse]\");\r\n        if (this.$collapses[0]) {\r\n          this.$pages = this.$collapses;\r\n          this.isCollapse = true;\r\n          var $bodies = this.$collapses;\r\n          $bodies.on(\"shown.bs.collapse\", function (e) {\r\n            self.pageIndex = $bodies.index(e.target) + 1;\r\n            self.pageShow();\r\n            $$1(this).find(\".ew-map\").each(function () {\r\n              var m = ew.maps[this.id];\r\n              if (m != null && m[\"map\"]) {\r\n                google.maps.event.trigger(m[\"map\"], \"resize\");\r\n                m[\"map\"].setCenter(m[\"latlng\"]);\r\n              }\r\n            });\r\n          });\r\n          this.pageIndex = $bodies.index($bodies.hasClass(\"show\")) + 1;\r\n        }\r\n      }\r\n      $$1(function () {\r\n        self.init();\r\n      });\r\n    };\r\n  }\n\n  function getDefaultExportFromCjs (x) {\n  \treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n  }\n\n  var sprintf$1 = {};\n\n  /* global window, exports, define */\r\n\r\n  var hasRequiredSprintf;\r\n\r\n  function requireSprintf () {\r\n  \tif (hasRequiredSprintf) return sprintf$1;\r\n  \thasRequiredSprintf = 1;\r\n  \t(function (exports) {\r\n  \t\t!function() {\r\n\r\n  \t\t    var re = {\r\n  \t\t        not_string: /[^s]/,\r\n  \t\t        not_bool: /[^t]/,\r\n  \t\t        not_type: /[^T]/,\r\n  \t\t        not_primitive: /[^v]/,\r\n  \t\t        number: /[diefg]/,\r\n  \t\t        numeric_arg: /[bcdiefguxX]/,\r\n  \t\t        json: /[j]/,\r\n  \t\t        not_json: /[^j]/,\r\n  \t\t        text: /^[^\\x25]+/,\r\n  \t\t        modulo: /^\\x25{2}/,\r\n  \t\t        placeholder: /^\\x25(?:([1-9]\\d*)\\$|\\(([^)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-gijostTuvxX])/,\r\n  \t\t        key: /^([a-z_][a-z_\\d]*)/i,\r\n  \t\t        key_access: /^\\.([a-z_][a-z_\\d]*)/i,\r\n  \t\t        index_access: /^\\[(\\d+)\\]/,\r\n  \t\t        sign: /^[+-]/\r\n  \t\t    };\r\n\r\n  \t\t    function sprintf(key) {\r\n  \t\t        // `arguments` is not an array, but should be fine for this call\r\n  \t\t        return sprintf_format(sprintf_parse(key), arguments)\r\n  \t\t    }\r\n\r\n  \t\t    function vsprintf(fmt, argv) {\r\n  \t\t        return sprintf.apply(null, [fmt].concat(argv || []))\r\n  \t\t    }\r\n\r\n  \t\t    function sprintf_format(parse_tree, argv) {\r\n  \t\t        var cursor = 1, tree_length = parse_tree.length, arg, output = '', i, k, ph, pad, pad_character, pad_length, is_positive, sign;\r\n  \t\t        for (i = 0; i < tree_length; i++) {\r\n  \t\t            if (typeof parse_tree[i] === 'string') {\r\n  \t\t                output += parse_tree[i];\r\n  \t\t            }\r\n  \t\t            else if (typeof parse_tree[i] === 'object') {\r\n  \t\t                ph = parse_tree[i]; // convenience purposes only\r\n  \t\t                if (ph.keys) { // keyword argument\r\n  \t\t                    arg = argv[cursor];\r\n  \t\t                    for (k = 0; k < ph.keys.length; k++) {\r\n  \t\t                        if (arg == undefined) {\r\n  \t\t                            throw new Error(sprintf('[sprintf] Cannot access property \"%s\" of undefined value \"%s\"', ph.keys[k], ph.keys[k-1]))\r\n  \t\t                        }\r\n  \t\t                        arg = arg[ph.keys[k]];\r\n  \t\t                    }\r\n  \t\t                }\r\n  \t\t                else if (ph.param_no) { // positional argument (explicit)\r\n  \t\t                    arg = argv[ph.param_no];\r\n  \t\t                }\r\n  \t\t                else { // positional argument (implicit)\r\n  \t\t                    arg = argv[cursor++];\r\n  \t\t                }\r\n\r\n  \t\t                if (re.not_type.test(ph.type) && re.not_primitive.test(ph.type) && arg instanceof Function) {\r\n  \t\t                    arg = arg();\r\n  \t\t                }\r\n\r\n  \t\t                if (re.numeric_arg.test(ph.type) && (typeof arg !== 'number' && isNaN(arg))) {\r\n  \t\t                    throw new TypeError(sprintf('[sprintf] expecting number but found %T', arg))\r\n  \t\t                }\r\n\r\n  \t\t                if (re.number.test(ph.type)) {\r\n  \t\t                    is_positive = arg >= 0;\r\n  \t\t                }\r\n\r\n  \t\t                switch (ph.type) {\r\n  \t\t                    case 'b':\r\n  \t\t                        arg = parseInt(arg, 10).toString(2);\r\n  \t\t                        break\r\n  \t\t                    case 'c':\r\n  \t\t                        arg = String.fromCharCode(parseInt(arg, 10));\r\n  \t\t                        break\r\n  \t\t                    case 'd':\r\n  \t\t                    case 'i':\r\n  \t\t                        arg = parseInt(arg, 10);\r\n  \t\t                        break\r\n  \t\t                    case 'j':\r\n  \t\t                        arg = JSON.stringify(arg, null, ph.width ? parseInt(ph.width) : 0);\r\n  \t\t                        break\r\n  \t\t                    case 'e':\r\n  \t\t                        arg = ph.precision ? parseFloat(arg).toExponential(ph.precision) : parseFloat(arg).toExponential();\r\n  \t\t                        break\r\n  \t\t                    case 'f':\r\n  \t\t                        arg = ph.precision ? parseFloat(arg).toFixed(ph.precision) : parseFloat(arg);\r\n  \t\t                        break\r\n  \t\t                    case 'g':\r\n  \t\t                        arg = ph.precision ? String(Number(arg.toPrecision(ph.precision))) : parseFloat(arg);\r\n  \t\t                        break\r\n  \t\t                    case 'o':\r\n  \t\t                        arg = (parseInt(arg, 10) >>> 0).toString(8);\r\n  \t\t                        break\r\n  \t\t                    case 's':\r\n  \t\t                        arg = String(arg);\r\n  \t\t                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg);\r\n  \t\t                        break\r\n  \t\t                    case 't':\r\n  \t\t                        arg = String(!!arg);\r\n  \t\t                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg);\r\n  \t\t                        break\r\n  \t\t                    case 'T':\r\n  \t\t                        arg = Object.prototype.toString.call(arg).slice(8, -1).toLowerCase();\r\n  \t\t                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg);\r\n  \t\t                        break\r\n  \t\t                    case 'u':\r\n  \t\t                        arg = parseInt(arg, 10) >>> 0;\r\n  \t\t                        break\r\n  \t\t                    case 'v':\r\n  \t\t                        arg = arg.valueOf();\r\n  \t\t                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg);\r\n  \t\t                        break\r\n  \t\t                    case 'x':\r\n  \t\t                        arg = (parseInt(arg, 10) >>> 0).toString(16);\r\n  \t\t                        break\r\n  \t\t                    case 'X':\r\n  \t\t                        arg = (parseInt(arg, 10) >>> 0).toString(16).toUpperCase();\r\n  \t\t                        break\r\n  \t\t                }\r\n  \t\t                if (re.json.test(ph.type)) {\r\n  \t\t                    output += arg;\r\n  \t\t                }\r\n  \t\t                else {\r\n  \t\t                    if (re.number.test(ph.type) && (!is_positive || ph.sign)) {\r\n  \t\t                        sign = is_positive ? '+' : '-';\r\n  \t\t                        arg = arg.toString().replace(re.sign, '');\r\n  \t\t                    }\r\n  \t\t                    else {\r\n  \t\t                        sign = '';\r\n  \t\t                    }\r\n  \t\t                    pad_character = ph.pad_char ? ph.pad_char === '0' ? '0' : ph.pad_char.charAt(1) : ' ';\r\n  \t\t                    pad_length = ph.width - (sign + arg).length;\r\n  \t\t                    pad = ph.width ? (pad_length > 0 ? pad_character.repeat(pad_length) : '') : '';\r\n  \t\t                    output += ph.align ? sign + arg + pad : (pad_character === '0' ? sign + pad + arg : pad + sign + arg);\r\n  \t\t                }\r\n  \t\t            }\r\n  \t\t        }\r\n  \t\t        return output\r\n  \t\t    }\r\n\r\n  \t\t    var sprintf_cache = Object.create(null);\r\n\r\n  \t\t    function sprintf_parse(fmt) {\r\n  \t\t        if (sprintf_cache[fmt]) {\r\n  \t\t            return sprintf_cache[fmt]\r\n  \t\t        }\r\n\r\n  \t\t        var _fmt = fmt, match, parse_tree = [], arg_names = 0;\r\n  \t\t        while (_fmt) {\r\n  \t\t            if ((match = re.text.exec(_fmt)) !== null) {\r\n  \t\t                parse_tree.push(match[0]);\r\n  \t\t            }\r\n  \t\t            else if ((match = re.modulo.exec(_fmt)) !== null) {\r\n  \t\t                parse_tree.push('%');\r\n  \t\t            }\r\n  \t\t            else if ((match = re.placeholder.exec(_fmt)) !== null) {\r\n  \t\t                if (match[2]) {\r\n  \t\t                    arg_names |= 1;\r\n  \t\t                    var field_list = [], replacement_field = match[2], field_match = [];\r\n  \t\t                    if ((field_match = re.key.exec(replacement_field)) !== null) {\r\n  \t\t                        field_list.push(field_match[1]);\r\n  \t\t                        while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\r\n  \t\t                            if ((field_match = re.key_access.exec(replacement_field)) !== null) {\r\n  \t\t                                field_list.push(field_match[1]);\r\n  \t\t                            }\r\n  \t\t                            else if ((field_match = re.index_access.exec(replacement_field)) !== null) {\r\n  \t\t                                field_list.push(field_match[1]);\r\n  \t\t                            }\r\n  \t\t                            else {\r\n  \t\t                                throw new SyntaxError('[sprintf] failed to parse named argument key')\r\n  \t\t                            }\r\n  \t\t                        }\r\n  \t\t                    }\r\n  \t\t                    else {\r\n  \t\t                        throw new SyntaxError('[sprintf] failed to parse named argument key')\r\n  \t\t                    }\r\n  \t\t                    match[2] = field_list;\r\n  \t\t                }\r\n  \t\t                else {\r\n  \t\t                    arg_names |= 2;\r\n  \t\t                }\r\n  \t\t                if (arg_names === 3) {\r\n  \t\t                    throw new Error('[sprintf] mixing positional and named placeholders is not (yet) supported')\r\n  \t\t                }\r\n\r\n  \t\t                parse_tree.push(\r\n  \t\t                    {\r\n  \t\t                        placeholder: match[0],\r\n  \t\t                        param_no:    match[1],\r\n  \t\t                        keys:        match[2],\r\n  \t\t                        sign:        match[3],\r\n  \t\t                        pad_char:    match[4],\r\n  \t\t                        align:       match[5],\r\n  \t\t                        width:       match[6],\r\n  \t\t                        precision:   match[7],\r\n  \t\t                        type:        match[8]\r\n  \t\t                    }\r\n  \t\t                );\r\n  \t\t            }\r\n  \t\t            else {\r\n  \t\t                throw new SyntaxError('[sprintf] unexpected placeholder')\r\n  \t\t            }\r\n  \t\t            _fmt = _fmt.substring(match[0].length);\r\n  \t\t        }\r\n  \t\t        return sprintf_cache[fmt] = parse_tree\r\n  \t\t    }\r\n\r\n  \t\t    /**\r\n  \t\t     * export to either browser or node.js\r\n  \t\t     */\r\n  \t\t    /* eslint-disable quote-props */\r\n  \t\t    {\r\n  \t\t        exports['sprintf'] = sprintf;\r\n  \t\t        exports['vsprintf'] = vsprintf;\r\n  \t\t    }\r\n  \t\t    if (typeof window !== 'undefined') {\r\n  \t\t        window['sprintf'] = sprintf;\r\n  \t\t        window['vsprintf'] = vsprintf;\r\n  \t\t    }\r\n  \t\t    /* eslint-enable quote-props */\r\n  \t\t}(); // eslint-disable-line\r\n  \t} (sprintf$1));\r\n  \treturn sprintf$1;\r\n  }\n\n  var sprintfExports = requireSprintf();\n  var sprintfjs = /*@__PURE__*/getDefaultExportFromCjs(sprintfExports);\n\n  let DateTime$1 = luxon.DateTime;\r\n\r\n  /**\r\n   * User level ID validator\r\n   */\r\n  function userLevelId(el) {\r\n    var _el$dataset$error, _el$dataset$error2;\r\n    if (el && !ew.checkInteger(el.value)) return {\r\n      userLevelId: ew.language.phrase((_el$dataset$error = el.dataset.error) != null ? _el$dataset$error : \"UserLevelIDInteger\")\r\n    };\r\n    let level = parseInt(el.value, 10);\r\n    if (level < 1) return {\r\n      userLevelId: ew.language.phrase((_el$dataset$error2 = el.dataset.error) != null ? _el$dataset$error2 : \"UserLevelIDIncorrect\")\r\n    };\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * User level name validator\r\n   * @param {string} id - User ID Field input element ID\r\n   */\r\n  function userLevelName(id) {\r\n    return function (el) {\r\n      let elId = document.getElementById(\"x_\" + id);\r\n      if (elId && el) {\r\n        let name = el.value.trim(),\r\n          level = parseInt(elId.value.trim(), 10);\r\n        if (level === 0 && !ew.sameText(name, \"Default\")) {\r\n          var _el$dataset$error3;\r\n          return {\r\n            userLevelName: ew.language.phrase((_el$dataset$error3 = el.dataset.error) != null ? _el$dataset$error3 : \"UserLevelDefaultName\")\r\n          };\r\n        } else if (level === -1 && !ew.sameText(name, \"Administrator\")) {\r\n          var _el$dataset$error4;\r\n          return {\r\n            userLevelName: ew.language.phrase((_el$dataset$error4 = el.dataset.error) != null ? _el$dataset$error4 : \"UserLevelAdministratorName\")\r\n          };\r\n        } else if (level === -2 && !ew.sameText(name, \"Anonymous\")) {\r\n          var _el$dataset$error5;\r\n          return {\r\n            userLevelName: ew.language.phrase((_el$dataset$error5 = el.dataset.error) != null ? _el$dataset$error5 : \"UserLevelAnonymousName\")\r\n          };\r\n        } else if (level > 0 && [\"anonymous\", \"administrator\", \"default\"].includes(name.toLowerCase())) {\r\n          var _el$dataset$error6;\r\n          return {\r\n            userLevelName: ew.language.phrase((_el$dataset$error6 = el.dataset.error) != null ? _el$dataset$error6 : \"UserLevelNameIncorrect\")\r\n          };\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Required validator\r\n   */\r\n  function required(fieldName) {\r\n    return function (el) {\r\n      var _$el$data;\r\n      let $el = $$1(el),\r\n        $p = $el.closest(\"#r_\" + ((_$el$data = $el.data(\"field\")) == null ? void 0 : _$el$data.substring(2))); // Find the row\r\n      if (!$p[0]) $p = $el.closest(\"[id^=el]\"); // Find the span\r\n      if ($p.css(\"display\") == \"none\") {\r\n        // Hidden by .visible()\r\n        return false;\r\n      }\r\n      if (el && !ew.hasValue(el)) {\r\n        var _el$dataset$error7;\r\n        return {\r\n          required: sprintfExports.sprintf(ew.language.phrase((_el$dataset$error7 = el.dataset.error) != null ? _el$dataset$error7 : \"EnterRequiredField\"), fieldName)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * File required validator\r\n   */\r\n  function fileRequired(fieldName) {\r\n    return function (el) {\r\n      let elFn = document.getElementById(\"fn_\" + el.id);\r\n      if (elFn && !ew.hasValue(elFn)) {\r\n        var _el$dataset$error8;\r\n        return {\r\n          fileRequired: sprintfExports.sprintf(ew.language.phrase((_el$dataset$error8 = el.dataset.error) != null ? _el$dataset$error8 : \"EnterRequiredField\"), fieldName)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Mismatch password validator\r\n   */\r\n  function mismatchPassword(el) {\r\n    let id;\r\n    if (el.id.startsWith(\"c_\"))\r\n      // Confirm Password field in Register page\r\n      id = el.id.replace(/^c_/, \"x_\");else if (el.id == \"cpwd\")\r\n      // Change Password page\r\n      id = \"npwd\";\r\n    let elPwd = document.getElementById(id);\r\n    if (el.value !== elPwd.value) {\r\n      var _el$dataset$error9;\r\n      return {\r\n        mismatchPassword: ew.language.phrase((_el$dataset$error9 = el.dataset.error) != null ? _el$dataset$error9 : \"MismatchPassword\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Between validator\r\n   */\r\n  function between(el) {\r\n    let x, z;\r\n    if (el.id.startsWith(\"y_\")) {\r\n      x = document.getElementById(el.id.replace(/^y_/, \"x_\"));\r\n      z = document.getElementById(el.id.replace(/^y_/, \"z_\"));\r\n    } else if (el.id.endsWith(\"_value_1\")) {\r\n      // QueryBuilder\r\n      x = document.getElementById(el.id.replace(/_value_1$/, \"_value_0\"));\r\n      z = document.getElementById(el.id.replace(/_value_1$/, \"_operator\"));\r\n    }\r\n    if (ew.hasValue(x) && $$1(z).val().toUpperCase() == \"BETWEEN\" && !ew.hasValue(el)) {\r\n      var _el$dataset$error10;\r\n      return {\r\n        between: ew.language.phrase((_el$dataset$error10 = el.dataset.error) != null ? _el$dataset$error10 : \"EnterValue2\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Password strength validator\r\n   */\r\n  function passwordStrength(el) {\r\n    let $el = $$1(el);\r\n    if (!ew.isMaskedPassword(el) && $el.hasClass(\"ew-password-strength\") && !$el.data(\"validated\")) {\r\n      var _el$dataset$error11;\r\n      return {\r\n        passwordStrength: ew.language.phrase((_el$dataset$error11 = el.dataset.error) != null ? _el$dataset$error11 : \"PasswordTooSimple\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * User name validator\r\n   */\r\n  function username(raw) {\r\n    return function (el) {\r\n      var _el$dataset$error12;\r\n      if (!raw && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_USERNAME_CHARACTERS) + ']'))) return {\r\n        username: ew.language.phrase((_el$dataset$error12 = el.dataset.error) != null ? _el$dataset$error12 : \"InvalidUsernameChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Password validator\r\n   */\r\n  function password(raw) {\r\n    return function (el) {\r\n      var _el$dataset$error13;\r\n      if (!raw && !ew.ENCRYPTED_PASSWORD && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_PASSWORD_CHARACTERS) + ']'))) return {\r\n        password: ew.language.phrase((_el$dataset$error13 = el.dataset.error) != null ? _el$dataset$error13 : \"InvalidPasswordChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Email validator\r\n   */\r\n  function email(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkEmail(value)) {\r\n      var _el$dataset$error14;\r\n      return {\r\n        email: ew.language.phrase((_el$dataset$error14 = el.dataset.error) != null ? _el$dataset$error14 : \"IncorrectEmail\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Emails validator\r\n   */\r\n  function emails(cnt, err) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkEmails(value, cnt)) {\r\n        return {\r\n          emails: err\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * DateTime validator\r\n   * @param {string} format - DateTime format\r\n   */\r\n  function datetime(format) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkDate(value, format)) {\r\n        var _el$dataset$error15;\r\n        return {\r\n          datetime: sprintfExports.sprintf(ew.language.phrase((_el$dataset$error15 = el.dataset.error) != null ? _el$dataset$error15 : \"IncorrectDate\"), format)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Time validator\r\n   * @param {string} format - Time format\r\n   */\r\n  function time(format) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkTime(value, format)) {\r\n        var _el$dataset$error16;\r\n        return {\r\n          time: sprintfExports.sprintf(ew.language.phrase((_el$dataset$error16 = el.dataset.error) != null ? _el$dataset$error16 : \"IncorrectTime\"), format)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Float validator\r\n   */\r\n  function float(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkNumber(value)) {\r\n      var _el$dataset$error17;\r\n      return {\r\n        float: ew.language.phrase((_el$dataset$error17 = el.dataset.error) != null ? _el$dataset$error17 : \"IncorrectFloat\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Range validator\r\n   * @param {number} min - Min value\r\n   * @param {number} max - Max value\r\n   */\r\n  function range(min, max) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkRange(value, min, max)) {\r\n        var _el$dataset$error18;\r\n        return {\r\n          range: sprintfExports.sprintf(ew.language.phrase((_el$dataset$error18 = el.dataset.error) != null ? _el$dataset$error18 : \"IncorrectRange\"), min, max)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Integer validator\r\n   */\r\n  function integer(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkInteger(value)) {\r\n      var _el$dataset$error19;\r\n      return {\r\n        integer: ew.language.phrase((_el$dataset$error19 = el.dataset.error) != null ? _el$dataset$error19 : \"IncorrectInteger\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * US phone validator\r\n   */\r\n  function phone(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkPhone(value)) {\r\n      var _el$dataset$error20;\r\n      return {\r\n        phone: ew.language.phrase((_el$dataset$error20 = el.dataset.error) != null ? _el$dataset$error20 : \"IncorrectPhone\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * US ZIP validator\r\n   */\r\n  function zip(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkZip(value)) {\r\n      var _el$dataset$error21;\r\n      return {\r\n        zip: ew.language.phrase((_el$dataset$error21 = el.dataset.error) != null ? _el$dataset$error21 : \"IncorrectZip\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Credit card validator\r\n   */\r\n  function creditCard(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkCreditCard(value)) {\r\n      var _el$dataset$error22;\r\n      return {\r\n        creditCard: ew.language.phrase((_el$dataset$error22 = el.dataset.error) != null ? _el$dataset$error22 : \"IncorrectCreditCard\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * US SSN validator\r\n   */\r\n  function ssn(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkSsn(value)) {\r\n      var _el$dataset$error23;\r\n      return {\r\n        ssn: ew.language.phrase((_el$dataset$error23 = el.dataset.error) != null ? _el$dataset$error23 : \"IncorrectSSN\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * GUID validator\r\n   */\r\n  function guid(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkGuid(value)) {\r\n      var _el$dataset$error24;\r\n      return {\r\n        guid: ew.language.phrase((_el$dataset$error24 = el.dataset.error) != null ? _el$dataset$error24 : \"IncorrectGUID\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Regular expression validator\r\n   * @param {string} pattern - Regular expression pattern\r\n   */\r\n  function regex(pattern) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkByRegEx(value, pattern)) {\r\n        var _ref, _el$dataset$error25;\r\n        return {\r\n          regex: ew.language.phrase((_ref = (_el$dataset$error25 = el.dataset.error) != null ? _el$dataset$error25 : el.dataset.error) != null ? _ref : \"IncorrectValueRegExp\")\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * URL validator\r\n   */\r\n  function url(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkUrl(value)) {\r\n      var _el$dataset$error26;\r\n      return {\r\n        url: ew.language.phrase((_el$dataset$error26 = el.dataset.error) != null ? _el$dataset$error26 : \"IncorrectUrl\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Custom validator\r\n   * @param {Function} fn - Function(value, ...args)\r\n   * @param {...any} args - Additional arguments for the function\r\n   */\r\n  function custom(fn) {\r\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n      args[_key - 1] = arguments[_key];\r\n    }\r\n    return function (el) {\r\n      if (typeof fn == \"function\") {\r\n        var _ref2, _el$dataset$error27;\r\n        let value = ew.getValue(el);\r\n        if (!fn(value, ...args)) return {\r\n          custom: ew.language.phrase((_ref2 = (_el$dataset$error27 = el.dataset.error) != null ? _el$dataset$error27 : el.dataset.error) != null ? _ref2 : \"IncorrectValue\")\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Captcha validator\r\n   */\r\n  function captcha(el) {\r\n    if (el && !ew.hasValue(el)) {\r\n      var _el$dataset$error28;\r\n      return {\r\n        captcha: ew.language.phrase((_el$dataset$error28 = el.dataset.error) != null ? _el$dataset$error28 : \"EnterValidateCode\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * reCaptcha validator\r\n   */\r\n  function recaptcha(el) {\r\n    var _grecaptcha;\r\n    if (el && !ew.hasValue(el) && ((_grecaptcha = grecaptcha) == null ? void 0 : _grecaptcha.getResponse(el.dataset.id)) === \"\") {\r\n      var _el$dataset$error29;\r\n      return {\r\n        recaptcha: ew.language.phrase((_el$dataset$error29 = el.dataset.error) != null ? _el$dataset$error29 : \"ClickReCaptcha\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Min date/time validator\r\n   * @param {Function|HTMLElement|DateTime|Date} min - Min date\r\n   */\r\n  function minDate(min) {\r\n    return function (el) {\r\n      let value = ew.getValue(el),\r\n        format = el.dataset.formatPattern,\r\n        minDateTime;\r\n      min = typeof min == \"function\" ? min() : min;\r\n      if (min instanceof HTMLElement) {\r\n        let minValue = min.value,\r\n          minFormat = min.dataset.formatPattern;\r\n        if (min.value && min.dataset.formatPattern) minDateTime = ew.parseDate(minValue, minFormat);\r\n      } else if (min instanceof Date) {\r\n        minDateTime = DateTime$1.fromJSDate(min, {\r\n          zone: \"utc\"\r\n        });\r\n      } else if (min instanceof DateTime$1) {\r\n        minDateTime = min;\r\n      }\r\n      if (value && format && minDateTime) {\r\n        var _el$dataset$error30;\r\n        let dateTime = ew.parseDate(value, format);\r\n        if (dateTime < minDateTime) return {\r\n          minDate: sprintfExports.sprintf(ew.language.phrase((_el$dataset$error30 = el.dataset.error) != null ? _el$dataset$error30 : \"IncorrectMinDate\"), ew.formatDateTime(minDateTime, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT))\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Max date/time validator\r\n   * @param {Function|HTMLElement|DateTime|Date} max - Max date\r\n   */\r\n  function maxDate(max) {\r\n    return function (el) {\r\n      let value = ew.getValue(el),\r\n        format = el.dataset.formatPattern,\r\n        maxDateTime;\r\n      max = typeof max == \"function\" ? max() : max;\r\n      if (max instanceof HTMLElement) {\r\n        let maxValue = max.value,\r\n          maxFormat = max.dataset.formatPattern;\r\n        if (max.value && max.dataset.formatPattern) maxDateTime = ew.parseDate(maxValue, maxFormat);\r\n      } else if (max instanceof Date) {\r\n        maxDateTime = DateTime$1.fromJSDate(max, {\r\n          zone: \"utc\"\r\n        });\r\n      } else if (max instanceof DateTime$1) {\r\n        maxDateTime = max;\r\n      }\r\n      if (value && format && maxDateTime) {\r\n        var _el$dataset$error31;\r\n        let dateTime = ew.parseDate(value, format);\r\n        if (dateTime > maxDateTime) return {\r\n          maxDate: sprintfExports.sprintf(ew.language.phrase((_el$dataset$error31 = el.dataset.error) != null ? _el$dataset$error31 : \"IncorrectMaxDate\"), ew.formatDateTime(maxDateTime, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT))\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Min validator\r\n   * @param {Function|HTMLElement|String|Number} min - Min value\r\n   */\r\n  function min(min) {\r\n    return function (el) {\r\n      let value = ew.parseNumber(ew.getValue(el)),\r\n        minValue;\r\n      min = typeof min == \"function\" ? min() : min;\r\n      if (min instanceof HTMLElement) {\r\n        minValue = ew.parseNumber(ew.getValue(min));\r\n      } else if (typeof min == \"string\") {\r\n        minValue = ew.parseNumber(min);\r\n      } else if (typeof min == \"number\") {\r\n        minValue = min;\r\n      }\r\n      if (typeof value == \"number\" && typeof minValue == \"number\") {\r\n        var _el$dataset$error32;\r\n        if (value < minValue) return {\r\n          min: sprintfExports.sprintf(ew.language.phrase((_el$dataset$error32 = el.dataset.error) != null ? _el$dataset$error32 : \"IncorrectMin\"), minValue)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Max validator\r\n   * @param {Function|HTMLElement|String|Number} max - Max value\r\n   */\r\n  function max(max) {\r\n    return function (el) {\r\n      let value = ew.parseNumber(ew.getValue(el)),\r\n        maxValue;\r\n      max = typeof max == \"function\" ? max() : max;\r\n      if (max instanceof HTMLElement) {\r\n        maxValue = ew.parseNumber(ew.getValue(max));\r\n      } else if (typeof max == \"string\") {\r\n        maxValue = ew.parseNumber(max);\r\n      } else if (typeof max == \"number\") {\r\n        maxValue = max;\r\n      }\r\n      if (typeof value == \"number\" && typeof maxValue == \"number\") {\r\n        var _el$dataset$error33;\r\n        if (value > maxValue) return {\r\n          max: sprintfExports.sprintf(ew.language.phrase((_el$dataset$error33 = el.dataset.error) != null ? _el$dataset$error33 : \"IncorrectMax\"), maxValue)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\n\n  var Validators = {\n    __proto__: null,\n    between,\n    captcha,\n    creditCard,\n    custom,\n    datetime,\n    email,\n    emails,\n    fileRequired,\n    float,\n    guid,\n    integer,\n    max,\n    maxDate,\n    min,\n    minDate,\n    mismatchPassword,\n    password,\n    passwordStrength,\n    phone,\n    range,\n    recaptcha,\n    regex,\n    required,\n    ssn,\n    time,\n    url,\n    userLevelId,\n    userLevelName,\n    username,\n    zip\n  };\n\n  function _typeof(o) {\r\n    \"@babel/helpers - typeof\";\r\n\r\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\r\n      return typeof o;\r\n    } : function (o) {\r\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\r\n    }, _typeof(o);\r\n  }\n\n  function toPrimitive(t, r) {\r\n    if (\"object\" != _typeof(t) || !t) return t;\r\n    var e = t[Symbol.toPrimitive];\r\n    if (void 0 !== e) {\r\n      var i = e.call(t, r || \"default\");\r\n      if (\"object\" != _typeof(i)) return i;\r\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\r\n    }\r\n    return (\"string\" === r ? String : Number)(t);\r\n  }\n\n  function toPropertyKey(t) {\r\n    var i = toPrimitive(t, \"string\");\r\n    return \"symbol\" == _typeof(i) ? i : i + \"\";\r\n  }\n\n  function _defineProperties(e, r) {\r\n    for (var t = 0; t < r.length; t++) {\r\n      var o = r[t];\r\n      o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\r\n    }\r\n  }\r\n  function _createClass(e, r, t) {\r\n    return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\r\n      writable: !1\r\n    }), e;\r\n  }\n\n  function _setPrototypeOf(t, e) {\r\n    return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\r\n      return t.__proto__ = e, t;\r\n    }, _setPrototypeOf(t, e);\r\n  }\n\n  function _inheritsLoose(t, o) {\r\n    t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o);\r\n  }\n\n  function _defineProperty(e, r, t) {\r\n    return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\r\n      value: t,\r\n      enumerable: !0,\r\n      configurable: !0,\r\n      writable: !0\r\n    }) : e[r] = t, e;\r\n  }\n\n  /*\r\n   * Based on: jquery.batch v0.1.0\r\n   * Copyright 2013, Matt Morgan (@mlmorg)\r\n   * MIT license\r\n   */\r\n\r\n  // Global batch settings\r\n  $$1.batchSettings = {\r\n    type: 'POST',\r\n    contentType: 'application/json',\r\n    processData: false,\r\n    dataType: 'json',\r\n    toJSON: JSON.stringify,\r\n    parse: data => data\r\n  };\r\n\r\n  // Setup method\r\n  $$1.batchSetup = function (options) {\r\n    return $$1.extend($$1.batchSettings, options);\r\n  };\r\n\r\n  // $.batch class\r\n  // -------------\r\n\r\n  var Batch = $$1.batch = function (func, options) {\r\n    // Always instantiate a Batch class even if called without \"new\"\r\n    if (!(this instanceof Batch)) {\r\n      return new Batch(func, options);\r\n    }\r\n\r\n    // Shift arguments if func is an object\r\n    if (typeof func === 'object') {\r\n      options = func;\r\n      func = undefined;\r\n    }\r\n\r\n    // Default options\r\n    this.options = $$1.extend({}, $$1.batchSettings, options);\r\n\r\n    // Find a parent batch object, if we're nested\r\n    this.parent = $$1.ajaxSetup()._batch;\r\n\r\n    // Requests storage\r\n    this.requests = [];\r\n\r\n    // Add any requests\r\n    if (func) {\r\n      this.add(func);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  // Our methods\r\n  $$1.extend(Batch.prototype, {\r\n    // Method for adding requests to the batch\r\n    add: function (func) {\r\n      var _func$name;\r\n      // Set global _batch variable in jQuery.ajaxSettings\r\n      $$1.ajaxSetup({\r\n        _batch: this.parent || this\r\n      });\r\n\r\n      // Call the user's function\r\n      if ((_func$name = func.name) != null && _func$name.startsWith('bound ')) {\r\n        // Bound function\r\n        func();\r\n      } else {\r\n        func.call($$1.ajaxSetup()._batch);\r\n      }\r\n\r\n      // Remove the global _batch variable when we're not nested\r\n      if (!this.parent) {\r\n        $$1.ajaxSetup({\r\n          _batch: null\r\n        });\r\n      }\r\n      return this;\r\n    },\r\n    // Clear requests storage\r\n    clear: function () {\r\n      this.requests = [];\r\n    },\r\n    // Method for running the batch request\r\n    send: function (options) {\r\n      options = options || {};\r\n      var instance = this;\r\n\r\n      // When we're handling a child batch object, wrap any success functions\r\n      // and add them to the parent batch success\r\n      if (this.parent && options.success) {\r\n        var parentSuccess = this.parent.options.success;\r\n        this.parent.options.success = function (data, status, xhr) {\r\n          options.success(data, status, xhr);\r\n          if (parentSuccess) {\r\n            parentSuccess(data, status, xhr);\r\n          }\r\n        };\r\n      }\r\n\r\n      // When we're handling the top-most batch, send the request\r\n      else if (this.requests.length) {\r\n        // Map an array of requests\r\n        var requests = $$1.map(this.requests, function (request) {\r\n          return request.settings.data;\r\n        });\r\n\r\n        // Override the success callback\r\n        var success = options.success;\r\n        var childSuccess = this.options.success;\r\n        options.success = function (data, statusText, xhr) {\r\n          // Call our _deliver method to handle each individual batch request response\r\n          instance._deliver.call(instance, data, statusText);\r\n\r\n          // Child batch success functions\r\n          if (childSuccess) {\r\n            childSuccess(data, statusText, xhr);\r\n          }\r\n\r\n          // User's success function\r\n          if (success) {\r\n            success(data, statusText, xhr);\r\n          }\r\n        };\r\n\r\n        // Build the Ajax request options\r\n        options = $$1.extend({}, this.options, options);\r\n\r\n        // Create hash of requests to pass as the data in the Ajax request\r\n        if (!options.data) {\r\n          options.data = $$1.batchSettings.toJSON(requests);\r\n        }\r\n\r\n        // Call the request\r\n        return $$1.ajax(options);\r\n      }\r\n    },\r\n    // Private method to add a request to the batch requests array\r\n    _addRequest: function (xhr, settings) {\r\n      this.requests.push({\r\n        xhr: xhr,\r\n        settings: settings\r\n      });\r\n    },\r\n    // Delivers each batch request response to its intended xhr success/complete function\r\n    _deliver: function (data, statusText) {\r\n      var _responses$error;\r\n      var instance = this;\r\n\r\n      // Pass the response off to the user to parse out the responses\r\n      var responses = $$1.batchSettings.parse(data);\r\n      if (responses != null && (_responses$error = responses.error) != null && _responses$error.description) {\r\n        var _responses$error2;\r\n        ew$1.alert(responses == null || (_responses$error2 = responses.error) == null ? void 0 : _responses$error2.description);\r\n        return;\r\n      }\r\n\r\n      // Loop through the responses\r\n      $$1.each(responses, function (i, response) {\r\n        var _request$settings$com;\r\n        // Only work with batch requests that we have stored\r\n        if (!instance.requests[i]) {\r\n          return;\r\n        }\r\n\r\n        // Grab the stored request data\r\n        var request = instance.requests[i];\r\n\r\n        // Build statusText a la jQuery based on status code\r\n        request.xhr.statusText = statusText;\r\n\r\n        // Call the user/success function, if it exists. Pass the response body, status text and xhr.\r\n        if (statusText === 'success') {\r\n          var _request$settings$suc;\r\n          (_request$settings$suc = request.settings.success) == null || _request$settings$suc.call(request.xhr, response, statusText);\r\n        }\r\n\r\n        // Call complete\r\n        (_request$settings$com = request.settings.complete) == null || _request$settings$com.call(request.xhr, statusText);\r\n      });\r\n    }\r\n  });\r\n\r\n  // $.ajax override\r\n  // ---------------\r\n\r\n  // Override jQuery.ajax to cancel any outgoing requests called within\r\n  // a $.batch() function and add them to the batch requests array for\r\n  // that batch instance\r\n  var $ajax = $$1.ajax;\r\n  $$1.ajax = function (url, options) {\r\n    // Shift arguments when options are passed as first argument\r\n    if (typeof url === 'object') {\r\n      options = url;\r\n      url = undefined;\r\n    }\r\n\r\n    // Set options object\r\n    options = options || {};\r\n\r\n    // Override the jQuery beforeSend method\r\n    var beforeSend = options.beforeSend;\r\n    options.beforeSend = function (xhr, settings) {\r\n      // Call the user's beforeSend function, if passed\r\n      if (beforeSend) {\r\n        var before = beforeSend(xhr, settings);\r\n\r\n        // Cancel request if user's beforeSend function returns false\r\n        if (before === false) {\r\n          return before;\r\n        }\r\n      }\r\n\r\n      // We're only worried about requests made within a $.batch function\r\n      // (aka they have a _batch object)\r\n      if (settings._batch) {\r\n        // Add request to batch\r\n        settings._batch._addRequest(xhr, settings);\r\n\r\n        // Cancel this request\r\n        return false;\r\n      }\r\n    };\r\n\r\n    // Run original $.ajax method for all other requests\r\n    return $ajax.call(this, url, options);\r\n  };\n\n  // Form class\r\n  function FormBase(id, pageId) {\r\n    let self = this,\r\n      $self = $$1(self);\r\n    this._initiated = false;\r\n    this.id = id; // Same ID as the form\r\n    this.element = document.getElementById(id); // HTML form or div\r\n    this.$element = $$1(this.element); // jQuery object of the form or div\r\n    this.pageId = pageId;\r\n    this.htmlForm = null; // HTML form element\r\n    this.initSearchPanel = false; // Expanded by default\r\n    this.modified = false;\r\n    this.emptyRow = null; // Check empty row\r\n    this.multiPage = null; // Multi-page\r\n    this.autoSuggests = {}; // AutoSuggests\r\n    this.lists = {}; // Dynamic selection lists\r\n    this.batch = new Batch(); // For batch lookup\r\n    this.formKeyCountName = \"\"; // For list/grid pages\r\n    this.submitWithFetch = false; // Submit form with Fetch API and returns Promise\r\n    this.enableOnInit = false; // Disable form during init\r\n    this.filterList = null;\r\n\r\n    // Disable form\r\n    this.disableForm = function () {\r\n      document.body.style.cursor = \"wait\";\r\n      let form = this.getForm();\r\n      $$1(form.elements).filter(\":submit:not(.dropdown-toggle), .ew-submit\").prop(\"disabled\", true).addClass(\"disabled\");\r\n      this.trigger(\"disabled\");\r\n    };\r\n\r\n    // Enable form\r\n    this.enableForm = function () {\r\n      let form = this.getForm(),\r\n        $elements = $$1(form.elements);\r\n      $elements.filter(\".ew-disabled-element\").removeClass(\"ew-disabled-element\").prop(\"disabled\", false);\r\n      $elements.filter(\".ew-enabled-element\").removeClass(\"ew-enabled-element\").prop(\"disabled\", true);\r\n      $elements.filter(\":submit:not(.dropdown-toggle), .ew-submit\").not(\".ew-disabled\") // Exclude submit buttons with .ew-disabled (disabled purposely)\r\n      .prop(\"disabled\", false).removeClass(\"disabled\");\r\n      this.trigger(\"enabled\");\r\n      document.body.style.cursor = \"default\";\r\n    };\r\n\r\n    // Append hidden element with form name\r\n    this.appendHidden = function (el) {\r\n      var form = this.getForm(),\r\n        $form = $$1(form),\r\n        $dp = $$1(el).closest(\".ew-form\"),\r\n        name = $dp.attr(\"id\") + \"$\" + el.name;\r\n      if ($form.find(\"input:hidden[name='\" + name + \"']\")[0])\r\n        // Already appended\r\n        return;\r\n      var ar = $dp.find('[name=\"' + el.name + '\"]').serializeArray();\r\n      if (ar.length) {\r\n        ar.forEach(function (o, i) {\r\n          $$1('<input type=\"hidden\" name=\"' + name + '\">').val(o.value).appendTo($form);\r\n        });\r\n      } else {\r\n        $$1('<input type=\"hidden\" name=\"' + name + '\">').val(\"\").appendTo($form);\r\n      }\r\n    };\r\n\r\n    // Can submit\r\n    this.canSubmit = async function (e) {\r\n      var _await$this$validate, _this$validate;\r\n      var form = this.getForm(),\r\n        $form = $$1(form);\r\n      this.disableForm();\r\n      this.updateTextArea();\r\n      if (((_await$this$validate = await ((_this$validate = this.validate) == null ? void 0 : _this$validate.call(this, e))) != null ? _await$this$validate : true) && !$form.find(\".is-invalid\")[0]) {\r\n        $form.find(\"input[name^=sv_], input[name^=p_], [name*=_query_builder_rule_], .ew-template input, .ew-custom-option\") // Do not submit these values\r\n        .prop(\"disabled\", true).addClass(\"ew-disabled-element\");\r\n        $form.find(\"[data-readonly=1][disabled]\").prop(\"disabled\", false).addClass(\"ew-enabled-element\"); // Submit readonly values\r\n        var $dps = $form.find(\"input[name=detailpage]\").map(function (i, el) {\r\n          return $form.find(\"#\" + el.value)[0];\r\n        });\r\n        if ($dps.length > 1) {\r\n          // Multiple Master/Detail, check element names\r\n          $dps.each(function (i, dp) {\r\n            $$1(dp).find(\":input, selection-list\").each(function (j, el) {\r\n              if (/^(fn_)?(x|o)\\d*_/.test(el.name)) {\r\n                var $els = $dps.not(dp).find(el.tagName + \"[name='\" + el.name + \"']\");\r\n                if ($els.length) {\r\n                  // Elements with same name found\r\n                  self.appendHidden(el); // Append element with form name\r\n                  $els.each(function () {\r\n                    self.appendHidden(this); // Append elements with same name and form name\r\n                  });\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n        let args = {\r\n            form: form,\r\n            result: true\r\n          },\r\n          evt = $$1.Event(\"beforesubmit\", {\r\n            originalEvent: e\r\n          });\r\n        $form.trigger(evt, [args]);\r\n        let result = await args.result; // Support Promise<boolean|Object>\r\n        if (!evt.isDefaultPrevented() && (result === true || $$1.isObject(result) && result.value))\r\n          // Support Swal.fire()\r\n          return true;\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n      return false;\r\n    };\r\n\r\n    // Submit\r\n    this.submit = async function (e) {\r\n      var _e$originalEvent;\r\n      let form = this.getForm(),\r\n        formAction = e == null || (_e$originalEvent = e.originalEvent) == null || (_e$originalEvent = _e$originalEvent.submitter) == null ? void 0 : _e$originalEvent.formAction;\r\n      if (formAction) {\r\n        formAction = ew.parseUrl(formAction).pathname;\r\n        form.setAttribute(\"action\", formAction);\r\n      }\r\n      if (await this.canSubmit(e)) {\r\n        if (this.submitWithFetch) {\r\n          let url = form.getAttribute(\"action\"),\r\n            method = form.method.toUpperCase(),\r\n            body = $$1(form).serialize();\r\n          return ew.fetch(url, {\r\n            method,\r\n            body\r\n          }).finally(() => this.enableForm()); // Return Promise\r\n        } else {\r\n          form.submit();\r\n        }\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n    };\r\n\r\n    // Get dynamic selection list by element name or id\r\n    this.getList = function (name) {\r\n      var _this$getElement;\r\n      if ($$1.isObject(name)) {\r\n        // Object\r\n        let obj = name;\r\n        name = obj.name || obj.id || \"\";\r\n        if (name.includes(\"query_builder_rule\")) name = obj.dataset.field;\r\n      }\r\n      name = name.replace(/^(sv_)?[xy](\\d*|\\$rowindex\\$)_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n      if (this.lists[name]) return this.lists[name];\r\n      let field = (_this$getElement = this.getElement(name)) == null || (_this$getElement = _this$getElement.dataset.field) == null ? void 0 : _this$getElement.replace(/^x_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n      return field ? this.lists[field] : {};\r\n    };\r\n\r\n    // Compile templates\r\n    this.compileTemplates = function () {\r\n      let lists = Object.values(this.lists);\r\n      for (let list of lists) {\r\n        if (list.template && $$1.isString(list.template)) list.template = $$1.templates(list.template);\r\n      }\r\n    };\r\n\r\n    // Get option template of dynamic selection list\r\n    this.getOptionTemplate = function (list) {\r\n      if (list.template && $$1.isString(list.template)) list.template = $$1.templates(list.template);\r\n      return list.template;\r\n    };\r\n\r\n    // Get the HTML form element\r\n    this.getForm = function () {\r\n      if (!this.htmlForm) {\r\n        var _this$element, _this$element2;\r\n        if (((_this$element = this.element) == null ? void 0 : _this$element.tagName) == \"FORM\") {\r\n          // HTML form\r\n          this.htmlForm = this.element;\r\n        } else if (((_this$element2 = this.element) == null ? void 0 : _this$element2.tagName) == \"DIV\") {\r\n          // HTML div => Grid page\r\n          this.htmlForm = this.element.closest(\"form\");\r\n        }\r\n      }\r\n      return this.htmlForm;\r\n    };\r\n\r\n    // Get form element as single element\r\n    this.getElement = function (name) {\r\n      return name ? ew.getElement(name, this.$element) : this.$element[0];\r\n    };\r\n\r\n    // Get form element(s) as single element or array of radio/checkbox\r\n    this.getElements = function (name) {\r\n      return ew.getElements(name, this.$element);\r\n    };\r\n\r\n    // Fix ID\r\n    this.fixId = function (id, multiple, rowindex) {\r\n      let t = \"\",\r\n        ar = id.split(\" \");\r\n      if (ar.length > 1) {\r\n        t = ar[0];\r\n        rowindex = \"\";\r\n        id = ar[1];\r\n      }\r\n      let prefix = $$1.isNumber(rowindex) ? \"x\" + rowindex + \"_\" : \"x_\"; // Add row index\r\n      id = id.startsWith(\"x_\") ? id.replace(/^x_/, prefix) // Field element name\r\n      : prefix + id; // Field var\r\n      if (multiple && !id.endsWith(\"[]\"))\r\n        // Add [] if select-multiple\r\n        id += \"[]\";\r\n      return t ? t + \" \" + id : id;\r\n    };\r\n\r\n    /**\r\n     * Update a selection list\r\n     * @param {string|HTMLElement} id - ID (Field param) or HTML element\r\n     * @param {Object} list - List\r\n     * @param {(null|undefined|number)} rowindex - Row index\r\n     * @param {boolean} immediate - Send request immediately\r\n     * @returns\r\n     */\r\n    this.updateList = function (id, list, rowindex, immediate) {\r\n      var _list, _Object$entries$find;\r\n      (_list = list) != null ? _list : list = $$1.isString(id) // Find the list if not provided\r\n      ? (_Object$entries$find = Object.entries(this.lists).find(entry => entry[0] == id.replace(/^x_/, \"\"))) == null ? void 0 : _Object$entries$find[1] // String\r\n      : this.getList(id); // HTMLElement\r\n      if (list.template && $$1.isString(list.template))\r\n        // Compile template in case updateLists() called before init()\r\n        list.template = $$1.templates(list.template);\r\n      let form = this.element,\r\n        parents = list.parentFields.slice().map(parent => this.fixId(parent, false, rowindex)),\r\n        // Clone and fix index\r\n        ajax = list.ajax && !list.lookupOptions.length; // Has link table and no lookup cache\r\n      id = $$1.isString(id) ? this.fixId(id, list.multiple, rowindex) : id;\r\n      return !ajax || immediate ? ew.updateOptions.call(this, id, parents, ajax, false) // Non-Ajax (lookup cache or user values) or update immediately\r\n      : [id, parents.map(parent => ew.getOptionValues(parent, form)), ajax, false]; // Ajax (async) => to be batch updated\r\n    };\r\n\r\n    /**\r\n     * Update selection lists\r\n     * @param {(null|undefined|number)} rowindex - Row index\r\n     * @param {bool} [immediate] - Send request immediately\r\n     * @returns\r\n     */\r\n    this.updateLists = function (rowindex, immediate) {\r\n      var _form$querySelector;\r\n      if (rowindex === null)\r\n        // rowindex == $rowindex$ == null\r\n        return;\r\n      if (this.pageId == \"grid\" && !$$1.isNumber(rowindex) && !$$1.isUndefined(rowindex)) return;\r\n      let form = this.getForm(); // Set up $element and htmlForm\r\n      if ((form == null || (_form$querySelector = form.querySelector(\"input#confirm\")) == null ? void 0 : _form$querySelector.value) == \"confirm\")\r\n        // Confirm page\r\n        return;\r\n      let selector = Object.entries(this.lists).map(_ref => {\r\n        let [id, list] = _ref;\r\n        return \"[name='\" + this.fixId(id, list.multiple, rowindex) + \"']\";\r\n      }).join();\r\n      if (selector && this.element.querySelector(selector))\r\n        // List found\r\n        Object.entries(this.lists).map(_ref2 => {\r\n          let [id, list] = _ref2;\r\n          return this.updateList(id, list, rowindex);\r\n        }) // Update each list\r\n        .filter(result => Array.isArray(result)) // Get ajax requests for batch update\r\n        .forEach(request => this.batch.add(ew.updateOptions.bind(this, ...request))); // Batch update async requests\r\n      // Update the Ajax lists\r\n      if (this.batch.requests.length) {\r\n        if (rowindex === undefined || immediate) {\r\n          // Called by form or update immediately (add blank row)\r\n          let deferreds = [],\r\n            batchSize = ew.ajaxBatchSize > 0 ? ew.ajaxBatchSize : 1;\r\n          while (this.batch.requests.length > batchSize) {\r\n            let b = new Batch();\r\n            b.requests = this.batch.requests.splice(0, batchSize);\r\n            deferreds.push(b.send({\r\n              url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n            }));\r\n          }\r\n          if (this.batch.requests.length > 0) deferreds.push(this.batch.send({\r\n            url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n          }));\r\n          $$1.when(...deferreds).then(() => $$1(document).trigger(\"updatedone\", [{\r\n            source: self,\r\n            target: form\r\n          }])).fail(error => console.log(error)).always(() => this.batch.clear());\r\n        }\r\n      } else {\r\n        $$1(document).trigger(\"updatedone\", [{\r\n          source: self,\r\n          target: form\r\n        }]);\r\n      }\r\n    };\r\n\r\n    // Create AutoSuggest\r\n    this.createAutoSuggest = function (settings) {\r\n      var options = Object.assign({\r\n        limit: ew.AUTO_SUGGEST_MAX_ENTRIES,\r\n        form: this\r\n      }, ew.autoSuggestSettings, settings); // Global settings + field specific settings\r\n      self.autoSuggests[settings.id] = new ew.AutoSuggest(options);\r\n    };\r\n\r\n    // Init editors\r\n    this.initEditors = function () {\r\n      var form = this.getForm();\r\n      $$1(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $$1(el).data(\"editor\");\r\n        if (ed && !ed.active && !ed.name.includes(\"$rowindex$\")) ed.create();\r\n      });\r\n    };\r\n\r\n    // Update textareas\r\n    this.updateTextArea = function (name) {\r\n      var form = this.getForm();\r\n      $$1(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $$1(el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n        ed.save();\r\n        if (name) return false; // Break\r\n      });\r\n    };\r\n\r\n    // Destroy editor(s)\r\n    this.destroyEditor = function (name) {\r\n      var form = this.getForm();\r\n      $$1(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $$1(el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n        ed.destroy();\r\n        if (name) return false; // Break\r\n      });\r\n    };\r\n\r\n    // Show error message\r\n    this.onError = function (el, msg) {\r\n      return ew.onError(this, el, msg);\r\n    };\r\n\r\n    // Init file upload\r\n    this.initUpload = function () {\r\n      var form = this.getForm();\r\n      $$1(form.elements).filter(\"input:file:not([name*='$rowindex$'])\").each(function (index) {\r\n        $$1.later(ew.AJAX_DELAY * index, null, ew.upload, this); // Delay a little in case of large number of upload fields\r\n      });\r\n    };\r\n\r\n    // Set up filters\r\n    this.setupFilters = function (e, filters) {\r\n      let id = this.id,\r\n        data = this.filterList ? this.filterList.data : null,\r\n        $sf = $$1(\".ew-save-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !data),\r\n        $df = $$1(\".ew-delete-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !filters.length).toggleClass(\"dropdown-toggle\", !!filters.length),\r\n        $delete = $df.parent(\"li\").toggleClass(\"dropdown-submenu dropdown-hover\", !!filters.length).toggleClass(\"disabled\", !filters.length),\r\n        $save = $sf.parent(\"li\").toggleClass(\"disabled\", !data);\r\n      let saveFilters = function (id, filters) {\r\n        if (ew.CLIENT_SEARCH_FILTER) {\r\n          localStorage.setItem(ew.PROJECT_NAME + \"_\" + id + \"_filters\", JSON.stringify(filters));\r\n        } else if (ew.SERVER_SEARCH_FILTER) {\r\n          document.body.style.cursor = \"wait\";\r\n          $$1.ajax(ew.currentPage(), {\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            data: {\r\n              \"ajax\": \"savefilters\",\r\n              \"filters\": JSON.stringify(filters)\r\n            }\r\n          }).done(function (result) {\r\n            var _result$;\r\n            if ((_result$ = result[0]) != null && _result$.success) self.filterList.filters = filters; // Save filters\r\n          }).always(function () {\r\n            document.body.style.cursor = \"default\";\r\n          });\r\n        }\r\n      };\r\n      $save.off(\"click.ew\").on(\"click.ew\", function (e) {\r\n        // Save filter\r\n        if ($save.hasClass(\"disabled\")) return false;\r\n        ew.prompt({\r\n          input: \"text\",\r\n          html: ew.language.phrase(\"EnterFilterName\")\r\n        }, name => {\r\n          name = ew.sanitize(name);\r\n          if (name) {\r\n            filters.push([name, data]);\r\n            saveFilters(id, filters);\r\n          }\r\n        }, true);\r\n      }).prevAll().remove();\r\n      $df.next(\"ul.dropdown-menu\").remove();\r\n      if (filters.length) {\r\n        let $submenu = $$1('<ul class=\"dropdown-menu\"></ul>');\r\n        filters.forEach((filter, i, ar) => {\r\n          $$1('<li><a class=\"dropdown-item\" data-index=\"' + i + '\" data-ew-action=\"none\">' + filter[0] + '</a></li>').on(\"click\", function (e) {\r\n            // Delete\r\n            let index = this.querySelector(\"a[data-index]\").dataset.index;\r\n            ew.prompt(ew.sprintf(ew.language.phrase(\"DeleteFilterConfirm\"), filter[0]), result => {\r\n              if (result) {\r\n                ar.splice(index, 1);\r\n                saveFilters(id, filters);\r\n              }\r\n            });\r\n          }).appendTo($submenu);\r\n          $$1('<li><a class=\"dropdown-item ew-reset-filter-list\" data-index=\"' + i + '\" data-ew-action=\"none\">' + filter[0] + '</a></li>').insertBefore($save).on(\"click\", function (e) {\r\n            if (currentPageID == \"calendar\") {\r\n              // Post back\r\n              $$1(\"<form>\").attr({\r\n                method: \"post\",\r\n                action: ew.currentPage()\r\n              }).append($$1(\"<input type='hidden'>\").attr({\r\n                name: \"cmd\",\r\n                value: \"resetfilter\"\r\n              }), $$1(\"<input type='hidden'>\").attr({\r\n                name: ew.TOKEN_NAME_KEY,\r\n                value: ew.TOKEN_NAME\r\n              }),\r\n              // PHP\r\n              $$1(\"<input type='hidden'>\").attr({\r\n                name: ew.ANTIFORGERY_TOKEN_KEY,\r\n                value: ew.ANTIFORGERY_TOKEN\r\n              }),\r\n              // PHP\r\n              $$1(\"<input type='hidden'>\").attr({\r\n                name: \"filter\",\r\n                value: JSON.stringify(filter[1])\r\n              })).appendTo(\"body\").trigger(\"submit\");\r\n            } else {\r\n              // Refresh\r\n              let body = {\r\n                cmd: \"resetfilter\",\r\n                filter: JSON.stringify(filter[1])\r\n              };\r\n              ew.refresh(ew.fetch(ew.setLayout(ew.currentPage(), false), {\r\n                method: \"POST\",\r\n                body\r\n              }));\r\n            }\r\n          });\r\n        });\r\n        $$1('<li class=\"dropdown-divider\"></li>').insertBefore($save);\r\n        $delete.append($submenu);\r\n      }\r\n    };\r\n\r\n    // Add event handler\r\n    this.on = function () {\r\n      $self.on(...arguments);\r\n    };\r\n\r\n    // Add event handler\r\n    this.one = function () {\r\n      $self.one(...arguments);\r\n    };\r\n\r\n    // Remove event handler\r\n    this.off = function () {\r\n      $self.off(...arguments);\r\n    };\r\n\r\n    // Trigger event\r\n    this.trigger = function () {\r\n      $self.trigger(...arguments);\r\n    };\r\n\r\n    // Init form\r\n    this.init = function () {\r\n      if (this._initiated) return;\r\n\r\n      // Check form\r\n      var form = this.getForm();\r\n      if (!form) return;\r\n      var $form = $$1(form);\r\n\r\n      // Compile templates\r\n      this.compileTemplates();\r\n\r\n      // Search form\r\n      if (/s(ea)?rch$/.test(this.id)) {\r\n        // Search panel\r\n        if (this.initSearchPanel && !ew.hasFormData(form)) $$1(\"#\" + this.id + \"_search_panel\").removeClass(\"show\");\r\n\r\n        // Hide search operator column\r\n        if (!$$1(\".ew-table .ew-search-operator\").text().trim()) $$1(\".ew-table .ew-search-operator\").parent(\"td\").hide();\r\n\r\n        // Search operators\r\n        $form.find(\"select[id^=z_]\").each(function () {\r\n          var $this = $$1(this).trigger(\"change\");\r\n          if ($this.val() != \"BETWEEN\") $form.find(\"#w_\" + this.id.substring(2)).trigger(\"change\");\r\n        });\r\n      }\r\n\r\n      // Multi-page\r\n      if (this.multiPage) this.multiPage.render();\r\n\r\n      // HTML editors\r\n      loadjs.ready([\"editor\"], () => setTimeout(this.initEditors.bind(this), 0)); // Delay for custom template to apply first\r\n\r\n      // Dynamic selection lists\r\n      this.updateLists();\r\n\r\n      // Init file upload\r\n      this.initUpload();\r\n\r\n      // Submit/Cancel\r\n      if (this.$element.is(\"form\")) {\r\n        // Not Grid page\r\n        // Detail pages\r\n        this.$element.find(\".ew-detail-pages .ew-nav a[data-bs-toggle=tab]\").on(\"shown.bs.tab\", function (e) {\r\n          var $tab = $$1(e.target.getAttribute(\"href\")),\r\n            $panel = $tab.find(\".table-responsive.ew-grid-middle-panel\"),\r\n            $container = $tab.closest(\".container-fluid\");\r\n          if ($panel.width() >= $container.width()) $panel.width($container.width() + \"px\");else $panel.width(\"auto\");\r\n        });\r\n        $form.off(\"submit.ew\").on(\"submit.ew\", function (e) {\r\n          // Bind submit event\r\n          let args = {\r\n              form: form,\r\n              result: self.submit(e)\r\n            },\r\n            evt = $$1.Event(\"aftersubmit\", {\r\n              originalEvent: e\r\n            });\r\n          self.trigger(evt, [args]);\r\n          return false; // Disable normal submission\r\n        });\r\n        $form.find(\"[data-field], .ew-priv\").on(\"change\", function () {\r\n          if (ew.CONFIRM_CANCEL) self.modified = true;\r\n        });\r\n        $form.find(\"#btn-cancel[data-href]\").on(\"click\", function () {\r\n          // Cancel\r\n          self.updateTextArea();\r\n          var href = this.dataset.href;\r\n          if (self.modified && ew.hasFormData(form)) {\r\n            ew.prompt(ew.language.phrase(\"ConfirmCancel\"), result => {\r\n              if (result) {\r\n                $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n                window.location = href;\r\n              }\r\n            });\r\n          } else {\r\n            $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n            window.location = href;\r\n          }\r\n        });\r\n      }\r\n      this._initiated = true;\r\n\r\n      // Store form object as data\r\n      this.$element.data(\"form\", this);\r\n\r\n      // Enable form\r\n      if (this.enableOnInit || Array.from(form.elements).find(el => el.matches(\"button.disabled.enable-on-init\"))) this.enableForm();\r\n\r\n      // Trigger listeners\r\n      this.trigger(\"initiated\");\r\n    };\r\n\r\n    // Add to the global forms object\r\n    ew.forms.add(this);\r\n  }\n\n  /**\r\n   * Class Field\r\n   */\r\n  let Field = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {Function[]|Function} validators - Validators\r\n     * @param {bool} invalid - Initial valid status (e.g. server side)\r\n     */\r\n    function Field(fldvar, validators, invalid) {\r\n      _defineProperty(this, \"name\", \"\");\r\n      _defineProperty(this, \"validators\", []);\r\n      _defineProperty(this, \"_validate\", true);\r\n      this.name = fldvar;\r\n      if (Array.isArray(validators)) {\r\n        for (let validator of validators) this.addValidator(validator);\r\n      } else if (typeof validators === \"function\") {\r\n        this.addValidator(validators);\r\n      }\r\n      this.invalid = invalid;\r\n    }\r\n\r\n    /**\r\n     * Add validator\r\n     * @param {Function} validator - Validator function\r\n     */\r\n    var _proto = Field.prototype;\r\n    _proto.addValidator = function addValidator(validator) {\r\n      if (typeof validator === \"function\") this.validators.push(validator);\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Get error\r\n     * @returns {Object}\r\n     */;\r\n    /**\r\n     * Add error\r\n     * @param {Object} err - Error\r\n     */\r\n    _proto.addError = function addError(err) {\r\n      if (err) {\r\n        var _this$_error;\r\n        let error = (_this$_error = this._error) != null ? _this$_error : {};\r\n        this._error = {\r\n          ...error,\r\n          ...err\r\n        };\r\n        this.invalid = true;\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Clear all errors\r\n     */;\r\n    _proto.clearErrors = function clearErrors() {\r\n      this._error = null;\r\n      this.invalid = false;\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Clear all validators\r\n     */;\r\n    _proto.clearValidators = function clearValidators() {\r\n      this.validators = [];\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Get error message\r\n     * @returns {string} HTML\r\n     */;\r\n    /**\r\n     * Validate field value\r\n     * @returns {boolean}\r\n     */\r\n    _proto.validate = function validate() {\r\n      let result = true;\r\n      this.clearErrors(); // Reset error\r\n      if (this._element && this.shouldValidate) {\r\n        if (Array.isArray(this.validators)) {\r\n          for (let validator of this.validators) {\r\n            let err = validator(this._element);\r\n            if (err !== false) {\r\n              this.addError(err);\r\n              result = false;\r\n            }\r\n          }\r\n          this.updateFeedback();\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    /**\r\n     * Reset invalid property (on page load for Grid-Add/Edit)\r\n     */;\r\n    _proto.resetInvalid = function resetInvalid() {\r\n      var _this$_element, _this$_element$closes;\r\n      this.clearErrors();\r\n      if ((_this$_element = this._element) != null && (_this$_element = _this$_element.classList) != null && _this$_element.contains(\"is-invalid\") && !this._error) this.addError({\r\n        server: (_this$_element$closes = this._element.closest(ew.fieldContainerSelector)) == null || (_this$_element$closes = _this$_element$closes.querySelector(\".invalid-feedback\")) == null ? void 0 : _this$_element$closes.innerHTML\r\n      }); // Server side error\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Update the error message to feedback element\r\n     */;\r\n    _proto.updateFeedback = function updateFeedback() {\r\n      let err = this.errorMessage;\r\n      if (this._element && err) {\r\n        var _this$_element$closes2;\r\n        let feedback = (_this$_element$closes2 = this._element.closest(ew.fieldContainerSelector)) == null ? void 0 : _this$_element$closes2.querySelector(\".invalid-feedback\");\r\n        if (feedback) feedback.innerHTML = err;\r\n        ew.setInvalid(this._element);\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Set focus\r\n     * @param {Object} options - Focus options\r\n     */;\r\n    _proto.focus = function focus(options) {\r\n      if (this._element) ew.setFocus(this._element, options);\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Check if the field can be focused\r\n     */;\r\n    _proto.canFocus = function canFocus() {\r\n      var _el$style, _el$classList;\r\n      let el = this._element;\r\n      return el && !(el.hidden && !el.tagName == \"SELECTION-LIST\" || el.readonly || el.disabled || el.type == \"hidden\" || ((_el$style = el.style) == null ? void 0 : _el$style.display) == \"none\" || (_el$classList = el.classList) != null && _el$classList.contains(\"d-none\"));\r\n    }\r\n\r\n    /**\r\n     * Check if focused\r\n     */;\r\n    return _createClass(Field, [{\r\n      key: \"error\",\r\n      get: function () {\r\n        return this._error;\r\n      }\r\n    }, {\r\n      key: \"errorMessage\",\r\n      get: function () {\r\n        if (this._error) {\r\n          return Array.from(Object.values(this._error)).join(\"<br>\");\r\n        }\r\n        return \"\";\r\n      }\r\n\r\n      /**\r\n       * Check if the field should be validated\r\n       */\r\n    }, {\r\n      key: \"shouldValidate\",\r\n      get: function () {\r\n        return !this._checkbox || this._checkbox.checked;\r\n      }\r\n\r\n      /**\r\n       * Set form element\r\n       */\r\n    }, {\r\n      key: \"element\",\r\n      get:\r\n      /**\r\n       * Get form element\r\n       * @returns {HTMLElement|HTMLElement[]}\r\n       */\r\n      function () {\r\n        return this._element;\r\n      }\r\n\r\n      /**\r\n       * Get field value from form element\r\n       * @returns {string|Array}\r\n       */,\r\n      set: function (el) {\r\n        var _this$_element2;\r\n        this._element = el;\r\n        this._checkbox = (_this$_element2 = this._element) != null && (_this$_element2 = _this$_element2.id) != null && _this$_element2.match(/^[xy]_/) ? document.getElementById(this._element.id.replace(/^[xy]_/, \"u_\").replace(/\\[\\]$/, \"\")) : null; // Find the checkbox for the field in Update page\r\n      }\r\n    }, {\r\n      key: \"value\",\r\n      get: function () {\r\n        return this._element ? ew.getValue(this._element) : \"\";\r\n      }\r\n    }, {\r\n      key: \"focused\",\r\n      get: function () {\r\n        return this._element && this._element == document.activeElement;\r\n      }\r\n    }]);\r\n  }();\n\n  /**\r\n   * Class Form\r\n   */\r\n  let Form = /*#__PURE__*/function (_FormBase) {\r\n    /**\r\n     * Constructor\r\n     * @param {string} id - Form ID\r\n     * @param {string} pageId - Page ID\r\n     */\r\n    function Form(id, pageId) {\r\n      var _this;\r\n      _this = _FormBase.call(this, id, pageId) || this;\r\n      _defineProperty(_this, \"row\", {});\r\n      _defineProperty(_this, \"fields\", {});\r\n      _defineProperty(_this, \"validateRequired\", true);\r\n      _defineProperty(_this, \"autoFocus\", true);\r\n      _defineProperty(_this, \"autoFocusPreventScroll\", true);\r\n      _this.on(\"initiated\", function () {\r\n        let form = this.getForm();\r\n        if (form.classList.contains(\"ew-wait\")) {\r\n          this.one(\"enabled\", function () {\r\n            this.setInvalid();\r\n            this.tryFocus();\r\n          });\r\n          return;\r\n        }\r\n        this.setInvalid();\r\n        this.tryFocus();\r\n      });\r\n      return _this;\r\n    }\r\n\r\n    /**\r\n     * Add field\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {Function[]} validators - Validators\r\n     * @param {bool} invalid - Invalid\r\n     */\r\n    _inheritsLoose(Form, _FormBase);\r\n    var _proto = Form.prototype;\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!(fldvar in this.fields)) this.fields[fldvar] = new Field(fldvar, validators, invalid);\r\n    }\r\n\r\n    /**\r\n     * Get field\r\n     * @param {string} fldvar - Field variable name\r\n     * @returns Field\r\n     */;\r\n    _proto.getField = function getField(fldvar) {\r\n      return this.fields[fldvar];\r\n    }\r\n\r\n    /**\r\n     * Add fields by field definitions\r\n     * @param {Array} fields\r\n     */;\r\n    _proto.addFields = function addFields(fields) {\r\n      if (Array.isArray(fields)) {\r\n        for (let field of fields) {\r\n          if (Array.isArray(field)) {\r\n            this.addField.apply(this, field);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Add error\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {Object} err Error\r\n     */;\r\n    _proto.addError = function addError(fldvar, err) {\r\n      if (err) {\r\n        var _this$_error;\r\n        this._error = (_this$_error = this._error) != null ? _this$_error : {};\r\n        this._error[fldvar] = err;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Add custom error\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {string} msg - Error message\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.addCustomError = function addCustomError(fldvar, msg, rowIndex) {\r\n      if (fldvar in this.fields) {\r\n        let field = this.fields[fldvar],\r\n          err = {\r\n            custom: msg\r\n          };\r\n        field.addError(err);\r\n        this.setFieldElement(fldvar, rowIndex);\r\n        field.updateFeedback();\r\n        this.addError(fldvar, err);\r\n      }\r\n      return false;\r\n    }\r\n\r\n    /**\r\n     * Get error\r\n     */;\r\n    /**\r\n     * Set focus to a HTML element\r\n     * @param {HTMLElement} el - HTML element to be focused\r\n     */\r\n    _proto.setFocus = function setFocus(el) {\r\n      let delay = this.makeVisible(el) ? Form.focusDelay : 0;\r\n      if (el && el != document.activeElement && el.focus) {\r\n        let preventScroll = !el.closest(\".modal-body\") && Form.autoFocusPreventScroll && this.autoFocusPreventScroll;\r\n        setTimeout(() => {\r\n          el.focus({\r\n            preventScroll\r\n          });\r\n        }, delay); // Focus after tab transition\r\n        this._focused = true;\r\n        this.trigger(\"focused\");\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Set focus to the first field with error\r\n     */;\r\n    _proto.focus = function focus() {\r\n      if (!this.canFocus()) return;\r\n      for (let [fldvar, field] of Object.entries(this.fields)) {\r\n        var _this$_error2;\r\n        if (field.invalid || (_this$_error2 = this._error) != null && _this$_error2[fldvar]) {\r\n          this.getFocusable(field);\r\n          if (field.canFocus()) {\r\n            this.setFocus(field.element);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Get focuable field element\r\n     * @param {Field} field - Field object\r\n     */;\r\n    _proto.getFocusable = function getFocusable(field) {\r\n      var _field$element;\r\n      (_field$element = field.element) != null ? _field$element : field.element = this.getFieldElements(field.name);\r\n      if (!field.canFocus()) field.element = this.getFieldElements(field.name, 0); // Inline-Add\r\n      if (!field.canFocus()) field.element = this.getFieldElements(field.name, 1); // Inline-Edit or Grid-Add/Edit\r\n    }\r\n\r\n    /**\r\n     * Try set focus to a field\r\n     * @param {string|undefined|true} fieldName [undefined] - Field variable name. If undefined, find the first field. If true, always try to focus.\r\n     */;\r\n    _proto.tryFocus = function tryFocus(fieldName) {\r\n      if (!this.canFocus()) return;\r\n      if (!fieldName && (!Form.autoFocus || !this.autoFocus || this._focused)) return;\r\n      if (!fieldName && this.invalid) {\r\n        // Has error\r\n        this.focus();\r\n        return;\r\n      }\r\n      if ([\"add\", \"edit\"].includes(this.pageId)) {\r\n        // Process detail forms\r\n        let form = this.getForm(),\r\n          detailpage = Array.from(form.querySelectorAll(\"input[name=detailpage]\")).find(dp => {\r\n            var _ew$forms$get;\r\n            return (_ew$forms$get = ew.forms.get(dp.value)) == null ? void 0 : _ew$forms$get.invalid;\r\n          });\r\n        if (detailpage) {\r\n          detailpage.focus();\r\n          return;\r\n        }\r\n      }\r\n      for (let [fldvar, field] of Object.entries(this.fields)) {\r\n        if (typeof fieldName == \"string\" && fieldName !== fldvar) continue;\r\n        field.element = null; // Reset field element first so that it will get the first element\r\n        this.getFocusable(field);\r\n        if (field.canFocus()) {\r\n          this.setFocus(field.element);\r\n          return;\r\n        }\r\n      }\r\n      let input = this.element[ew.TABLE_BASIC_SEARCH]; // Quick Search input\r\n      if (this.id.endsWith(\"srch\") && input && input != document.activeElement) {\r\n        // Extended Search\r\n        input.focus({\r\n          preventScroll: Form.autoFocusPreventScroll && this.autoFocusPreventScroll\r\n        }); // Focus the Quick Search input\r\n        this._focused = true;\r\n        this.trigger(\"focused\");\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Check if the form can be focused\r\n     */;\r\n    _proto.canFocus = function canFocus() {\r\n      var _el$style, _el$classList;\r\n      let el = this.element;\r\n      return el && !(el.hidden || el.type == \"hidden\" || ((_el$style = el.style) == null ? void 0 : _el$style.display) == \"none\" || (_el$classList = el.classList) != null && _el$classList.contains(\"d-none\"));\r\n    }\r\n\r\n    /**\r\n     * Make the form visible\r\n     * @param {HTMLElement} el - Focused element\r\n     */;\r\n    _proto.makeVisible = function makeVisible(el) {\r\n      if (this.multiPage) {\r\n        // Multi-page\r\n        this.multiPage.gotoPageByElement(el);\r\n        return true;\r\n      } else if (this.$element.is(\"div\")) {\r\n        // Multiple Master/Detail\r\n        let $pane = this.$element.closest(\".tab-pane\");\r\n        if ($pane[0] && !$pane.hasClass(\"active\")) {\r\n          $pane.closest(\".ew-nav\").find(\"a[data-bs-toggle=tab][href='#\" + $pane.attr(\"id\") + \"']\").trigger(\"click\");\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    /**\r\n     * Validate all fields of the specified row\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.validateFields = function validateFields(rowIndex) {\r\n      var _rowIndex;\r\n      (_rowIndex = rowIndex) != null ? _rowIndex : rowIndex = this.getCurrentRowIndex();\r\n      if (rowIndex < 2)\r\n        // Regular pages (\"\"), Inline-Add (\"0\") or first row (\"1\")\r\n        this.value = null; // Reset\r\n      this.row = {};\r\n      this._error = null; // Reset\r\n      let result = true;\r\n      for (let field of Object.values(this.fields)) {\r\n        field.element = this.getFieldElements(field.name, rowIndex);\r\n        this.row[field.name] = field.value; // Get field value\r\n        if (field.element && !field.validate()) {\r\n          // Invalid field value\r\n          this.addError(field.name, field.error);\r\n          result = false;\r\n        }\r\n      }\r\n      // Save the field values of the row\r\n      if (!this.value) {\r\n        this.value = {\r\n          ...this.row\r\n        };\r\n      } else {\r\n        if (!Array.isArray(this.value)) this.value = [this.value];\r\n        let index = parseInt(rowIndex, 10) || 0;\r\n        index = index > 1 ? index - 1 : 0;\r\n        this.value[index] = {\r\n          ...this.row\r\n        };\r\n      }\r\n      this.focus();\r\n      return result;\r\n    }\r\n\r\n    /**\r\n     * Key count (number|NaN)\r\n     */;\r\n    /**\r\n     * Validate\r\n     * @param {Event} e - Event\r\n     * @returns {bool}\r\n     */\r\n    _proto.validate = async function validate(e) {\r\n      var _form$querySelector, _form$querySelector2, _ref, _e$currentTarget;\r\n      if (!this.validateRequired) return true; // Ignore validation\r\n\r\n      let form = this.getForm();\r\n      if (((_form$querySelector = form.querySelector(\"#confirm\")) == null ? void 0 : _form$querySelector.value) == \"confirm\") return true;\r\n      if (this.pageId == \"update\" && !ew.updateSelected(form)) {\r\n        ew.alert(ew.language.phrase(\"NoFieldSelected\"));\r\n        return false;\r\n      }\r\n      let addcnt = 0,\r\n        inlineAdd = form.querySelector(\".ew-inline-insert\"),\r\n        // Inline-Add\r\n        action = ((_form$querySelector2 = form.querySelector(\"#action\")) == null ? void 0 : _form$querySelector2.value) || ((_ref = (_e$currentTarget = e == null ? void 0 : e.currentTarget) != null ? _e$currentTarget : inlineAdd) == null ? void 0 : _ref.dataset.action),\r\n        keycnt = inlineAdd ? 0 : this.keyCount,\r\n        gridinsert = action == \"gridinsert\" || [\"insert\", \"confirm\"].includes(action) && keycnt,\r\n        // Grid-Add or Master/Detail-Add\r\n        startcnt = inlineAdd ? 0 : 1,\r\n        rowcnt = inlineAdd ? 0 : keycnt || 1;\r\n      for (let i = startcnt; i <= rowcnt; i++) {\r\n        var _await$this$customVal, _this$customValidate;\r\n        let rowIndex = keycnt >= 0 ? String(i) : \"\";\r\n        form.dataset.rowindex = rowIndex;\r\n        if ([\"list\", \"grid\"].includes(this.pageId)) {\r\n          if (gridinsert ? !this.emptyRow(rowIndex) : true) addcnt++;else continue;\r\n        }\r\n\r\n        // Validate fields\r\n        if (!this.validateFields(rowIndex)) return false;\r\n\r\n        // Call customValidate event\r\n        if (!((_await$this$customVal = await ((_this$customValidate = this.customValidate) == null ? void 0 : _this$customValidate.call(this, form))) != null ? _await$this$customVal : true)) {\r\n          this.focus();\r\n          return false;\r\n        }\r\n      }\r\n      delete form.dataset.rowindex; // Reset\r\n\r\n      if (this.pageId == \"list\" && gridinsert && addcnt == 0) {\r\n        // No row added\r\n        ew.alert({\r\n          html: ew.language.phrase(\"NoAddRecord\"),\r\n          returnFocus: false\r\n        }); // Do not return focus\r\n        this.tryFocus(true);\r\n        return false;\r\n      }\r\n\r\n      // Process detail forms\r\n      if ([\"add\", \"edit\"].includes(this.pageId)) {\r\n        let detailpages = form.querySelectorAll(\"input[name=detailpage]\");\r\n        for (let dp of detailpages) {\r\n          var _await$frm$validate;\r\n          let frm = ew.forms.get(dp.value);\r\n          if (!((_await$frm$validate = await (frm == null || frm.validate == null ? void 0 : frm.validate(e))) != null ? _await$frm$validate : true)) return false;\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n\r\n    /**\r\n     * Get current row index (during validation)\r\n     * @returns {string} Row index\r\n     */;\r\n    _proto.getCurrentRowIndex = function getCurrentRowIndex() {\r\n      var _this$getForm$dataset;\r\n      return (_this$getForm$dataset = this.getForm().dataset.rowindex) != null ? _this$getForm$dataset : \"\";\r\n    }\r\n\r\n    /**\r\n     * Get field values of the specified row\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.getValue = function getValue(rowIndex) {\r\n      var _rowIndex2;\r\n      (_rowIndex2 = rowIndex) != null ? _rowIndex2 : rowIndex = this.getCurrentRowIndex();\r\n      let value = {};\r\n      for (let field of Object.values(this.fields)) {\r\n        var _field$element2;\r\n        (_field$element2 = field.element) != null ? _field$element2 : field.element = this.getFieldElements(field.name, rowIndex);\r\n        value[field.name] = field.value; // Get field value\r\n      }\r\n      return value;\r\n    }\r\n\r\n    /**\r\n     * Get a field value of the specified row\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.getFieldValue = function getFieldValue(fldvar, rowIndex) {\r\n      let field = this.getField(fldvar);\r\n      if (field) {\r\n        var _rowIndex3, _field$element3;\r\n        (_rowIndex3 = rowIndex) != null ? _rowIndex3 : rowIndex = this.getCurrentRowIndex();\r\n        (_field$element3 = field.element) != null ? _field$element3 : field.element = this.getFieldElements(field.name, rowIndex);\r\n        return field.value;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    /**\r\n     * Get HTML elements for a field\r\n     * @param {string} name - Field name\r\n     * @param {number} rowIndex - Row index\r\n     * @returns HTMLElement|HTMLElement[]|null\r\n     */;\r\n    _proto.getFieldElements = function getFieldElements(name, rowIndex) {\r\n      var _rowIndex4;\r\n      (_rowIndex4 = rowIndex) != null ? _rowIndex4 : rowIndex = this.getCurrentRowIndex();\r\n      return this.getElements(\"x\" + rowIndex + \"_\" + name) ||\r\n      // By name with prefix\r\n      this.getElements(\"x\" + rowIndex + \"_\" + name + \"[]\") ||\r\n      // By name with prefix and []\r\n      this.getElements(name); // By name directly (e.g. email form)\r\n    }\r\n\r\n    /**\r\n     * Set the element property of the field object and return the field elements\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {number} rowIndex - Row index\r\n     * @returns HTMLElement|HTMLElement[]|null\r\n     */;\r\n    _proto.setFieldElement = function setFieldElement(fldvar, rowIndex) {\r\n      let field = this.getField(fldvar);\r\n      if (field) field.element = this.getFieldElements(field.name, rowIndex);\r\n      return field == null ? void 0 : field.element;\r\n    }\r\n\r\n    /**\r\n     * Set invalid fields of the specified row\r\n     * @param {number} rowIndex - Row index. If undefined, set for the whole form.\r\n     */;\r\n    _proto.setInvalid = function setInvalid(rowIndex) {\r\n      let form = this.getForm(); // Get HTML form\r\n      if (typeof rowIndex === \"undefined\" && this.formKeyCountName) {\r\n        let inlineAdd = form.querySelector(\".ew-inline-insert\"),\r\n          // Inline-Add\r\n          keycnt = inlineAdd ? 0 : this.keyCount,\r\n          startcnt = inlineAdd ? 0 : 1,\r\n          rowcnt = inlineAdd ? 0 : keycnt || 1;\r\n        for (let i = startcnt; i <= rowcnt; i++) {\r\n          let rowIndex = keycnt >= 0 ? String(i) : \"\";\r\n          this.setInvalid(rowIndex);\r\n        }\r\n      } else {\r\n        var _rowIndex5;\r\n        (_rowIndex5 = rowIndex) != null ? _rowIndex5 : rowIndex = \"\";\r\n        for (let field of Object.values(this.fields)) {\r\n          field.element = this.getFieldElements(field.name, rowIndex); // Always get element in case Grid-Add/Edit\r\n          if (rowIndex) field.resetInvalid(); // For Grid-Add/Edit\r\n          if (field.invalid) {\r\n            this.addError(field.name, field.error);\r\n            if (!this._focused) this.focus(); // Focus at the current row\r\n          } else {\r\n            continue;\r\n          }\r\n          ew.setInvalid(field.element);\r\n        }\r\n        // Process detail forms\r\n        if ([\"add\", \"edit\"].includes(this.pageId)) form.querySelectorAll(\"input[name=detailpage]\").forEach(dp => {\r\n          var _ew$forms$get2;\r\n          return (_ew$forms$get2 = ew.forms.get(dp.value)) == null ? void 0 : _ew$forms$get2.setInvalid();\r\n        });\r\n      }\r\n    };\r\n    return _createClass(Form, [{\r\n      key: \"error\",\r\n      get: function () {\r\n        return this._error;\r\n      }\r\n\r\n      /**\r\n       * Check if invalid\r\n       */\r\n    }, {\r\n      key: \"invalid\",\r\n      get: function () {\r\n        return this._error || Object.values(this.fields).some(field => field.invalid);\r\n      }\r\n    }, {\r\n      key: \"keyCount\",\r\n      get: function () {\r\n        var _this$getForm$querySe;\r\n        let keycnt = this.formKeyCountName ? (_this$getForm$querySe = this.getForm().querySelector(\"#\" + this.formKeyCountName)) == null ? void 0 : _this$getForm$querySe.value : undefined; // Get key_count\r\n        return parseInt(keycnt, 10);\r\n      }\r\n    }]);\r\n  }(FormBase);\r\n  _defineProperty(Form, \"autoFocus\", true);\r\n  _defineProperty(Form, \"autoFocusPreventScroll\", true);\r\n  _defineProperty(Form, \"focusDelay\", 200);\n\n  /**\r\n   * Class FormBuilder\r\n   */\r\n  let FormBuilder = /*#__PURE__*/function () {\r\n    function FormBuilder() {\r\n      _defineProperty(this, \"lists\", {});\r\n      _defineProperty(this, \"fields\", []);\r\n      _defineProperty(this, \"validateRequired\", false);\r\n      _defineProperty(this, \"multiPage\", false);\r\n      _defineProperty(this, \"submitWithFetch\", false);\r\n      _defineProperty(this, \"initSearchPanel\", false);\r\n      _defineProperty(this, \"enableOnInit\", false);\r\n    }\r\n    var _proto = FormBuilder.prototype;\r\n    // Set ID\r\n    _proto.setId = function setId(value) {\r\n      this.id = value;\r\n      return this;\r\n    }\r\n\r\n    // Set page ID\r\n    ;\r\n    _proto.setPageId = function setPageId(value) {\r\n      this.pageId = value;\r\n      return this;\r\n    }\r\n\r\n    // Set lists\r\n    ;\r\n    _proto.setLists = function setLists(value) {\r\n      if (value && typeof value == \"object\" && !Array.isArray(value)) this.lists = value;\r\n      return this;\r\n    }\r\n\r\n    // Set lists for query builder (Dynamic Selection Lists and AutoFill not supported since there can be multiple inputs for the same field)\r\n    ;\r\n    _proto.setQueryBuilderLists = function setQueryBuilderLists(value) {\r\n      if (value && typeof value == \"object\" && !Array.isArray(value)) {\r\n        for (let [id, list] of Object.entries(value)) value[id] = {\r\n          ...list,\r\n          ...{\r\n            autoFillTargetFields: [],\r\n            childFields: [],\r\n            filterFieldVars: [],\r\n            filterFields: [],\r\n            parentFields: []\r\n          }\r\n        };\r\n        this.lists = value;\r\n      }\r\n      return this;\r\n    }\r\n\r\n    // Add list\r\n    ;\r\n    _proto.addList = function addList(name, value) {\r\n      this.lists[name] = value;\r\n      return this;\r\n    }\r\n\r\n    // Set fields\r\n    ;\r\n    _proto.setFields = function setFields(value) {\r\n      if (Array.isArray(value)) this.fields = value;\r\n      return this;\r\n    }\r\n\r\n    // Add field\r\n    ;\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!this.fields.find(field => field[0] == fldvar)) this.fields.push([fldvar, validators, invalid]);\r\n      return this;\r\n    }\r\n\r\n    // Add fields\r\n    ;\r\n    _proto.addFields = function addFields(value) {\r\n      if (Array.isArray(value)) this.fields = [...this.fields, ...value];\r\n      return this;\r\n    }\r\n\r\n    // Set validate\r\n    ;\r\n    _proto.setValidate = function setValidate(value) {\r\n      this.validate = value;\r\n      return this;\r\n    }\r\n\r\n    // Set custom validate\r\n    ;\r\n    _proto.setCustomValidate = function setCustomValidate(value) {\r\n      this.customValidate = value;\r\n      return this;\r\n    }\r\n\r\n    // Set validate required\r\n    ;\r\n    _proto.setValidateRequired = function setValidateRequired(value) {\r\n      this.validateRequired = value;\r\n      return this;\r\n    }\r\n\r\n    // Set submit\r\n    ;\r\n    _proto.setSubmit = function setSubmit(value) {\r\n      this.submit = value;\r\n      return this;\r\n    }\r\n\r\n    // Set form KeyCount name\r\n    ;\r\n    _proto.setFormKeyCountName = function setFormKeyCountName(value) {\r\n      this.formKeyCountName = value;\r\n      return this;\r\n    }\r\n\r\n    // Set empty row\r\n    ;\r\n    _proto.setEmptyRow = function setEmptyRow(value) {\r\n      this.emptyRow = value;\r\n      return this;\r\n    }\r\n\r\n    // Set multi page\r\n    ;\r\n    _proto.setMultiPage = function setMultiPage(value) {\r\n      this.multiPage = value;\r\n      return this;\r\n    }\r\n\r\n    // Set submit with Fetch API\r\n    ;\r\n    _proto.setSubmitWithFetch = function setSubmitWithFetch(value) {\r\n      this.submitWithFetch = value;\r\n      return this;\r\n    }\r\n\r\n    // Set filter list\r\n    ;\r\n    _proto.setFilterList = function setFilterList(value) {\r\n      this.filterList = value;\r\n      return this;\r\n    }\r\n\r\n    // Set initSearchPanel\r\n    ;\r\n    _proto.setInitSearchPanel = function setInitSearchPanel(value) {\r\n      this.initSearchPanel = value;\r\n      return this;\r\n    }\r\n\r\n    // Set enableOnInit\r\n    ;\r\n    _proto.setEnableOnInit = function setEnableOnInit(value) {\r\n      this.enableOnInit = value;\r\n      return this;\r\n    }\r\n\r\n    // Build\r\n    ;\r\n    _proto.build = function build() {\r\n      let form = new ew.Form(this.id, this.pageId);\r\n      if (Array.isArray(this.fields)) form.addFields(this.fields);\r\n      if (typeof this.validate == 'function') form.validate = this.validate;\r\n      if (typeof this.customValidate == 'function') form.customValidate = this.customValidate;\r\n      if (typeof this.emptyRow == 'function') form.emptyRow = this.emptyRow;\r\n      if (typeof this.submit == 'function') form.submit = this.submit;\r\n      if (this.formKeyCountName) form.formKeyCountName = this.formKeyCountName;\r\n      if (this.multiPage) form.multiPage = new ew.MultiPage(this.id);\r\n      if (this.enableOnInit) form.enableOnInit = true;\r\n      if (this.submitWithFetch) {\r\n        form.submitWithFetch = true;\r\n        form.on(\"aftersubmit\", (e, args) => ew.refresh(args == null ? void 0 : args.result, args == null ? void 0 : args.context));\r\n      }\r\n      if (this.filterList) form.filterList = this.filterList;\r\n      if (this.lists) form.lists = this.lists;\r\n      form.validateRequired = !!this.validateRequired;\r\n      form.initSearchPanel = !!this.initSearchPanel;\r\n      form.lists = this.lists;\r\n      return form;\r\n    };\r\n    return FormBuilder;\r\n  }();\n\n  // AjaxLookup class\r\n  let AjaxLookup = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {Object} settings - Settings\r\n     * @param {string} settings.id - Input element ID\r\n     * @param {string|Form} settings.form - Form of the input element\r\n     * @param {Number} settings.limit - Options per page\r\n     * @param {Object} settings.data - Data submitted by Ajax\r\n     * @param {string} settings.action - Ajax action: \"autosuggest\" or \"modal\"\r\n     */\r\n    function AjaxLookup(settings) {\r\n      var _this$list$parentFiel, _this$list$parentFiel2;\r\n      _defineProperty(this, \"_isAutoSuggest\", null);\r\n      this.elementId = settings.id; // Id\r\n      this.form = settings.form; // Form\r\n      if ($$1.isString(this.form))\r\n        // Form is string => Form id\r\n        this.form = ew.forms.get(this.form);\r\n      this.element = this.form.getElement(this.elementId); // Actual HTML element\r\n      if (!this.element)\r\n        // Element not found\r\n        return;\r\n      this.formElement = this.form.getElement(); // HTML form or DIV\r\n      this.list = this.form.getList(this.element);\r\n      let m = this.elementId.match(/^[xy](\\d*|\\$rowindex\\$)_/),\r\n        rowindex = m ? m[1] : \"\";\r\n      this.parentFields = (_this$list$parentFiel = (_this$list$parentFiel2 = this.list.parentFields) == null ? void 0 : _this$list$parentFiel2.slice() // Clone\r\n      .map(pf => pf.split(\" \").length == 1 ? pf.replace(/^x_/, \"x\" + rowindex + \"_\") : pf)) != null ? _this$list$parentFiel : []; // Parent field in the same table, add row index\r\n      this.limit = settings.limit;\r\n      this.debounce = settings.debounce;\r\n      this.data = settings.data;\r\n      this.recordCount = 0;\r\n      this.action = settings.action || \"autosuggest\";\r\n    }\r\n\r\n    /**\r\n     * Is AutoSuggest\r\n     */\r\n    var _proto = AjaxLookup.prototype;\r\n    /**\r\n     * Format display value\r\n     * @param {Array} opt - Option\r\n     */\r\n    _proto.formatResult = function formatResult(opt) {\r\n      this.form.compileTemplates();\r\n      return this.list.template && !this.isAutoSuggest ? this.list.template.render(opt) : ew.displayValue(opt, this.element) || opt[0];\r\n    }\r\n\r\n    /**\r\n     * Generate request\r\n     */;\r\n    _proto.generateRequest = function generateRequest() {\r\n      var _data$ajax;\r\n      var data = Object.assign({}, this.data, {\r\n        name: this.element.name,\r\n        page: this.list.page,\r\n        field: this.list.field,\r\n        language: ew.LANGUAGE_ID\r\n      }, ew.getUserParams(\"#p_\" + this.elementId, this.formElement));\r\n      (_data$ajax = data.ajax) != null ? _data$ajax : data.ajax = this.action;\r\n      if (this.parentFields.length > 0) this.parentFields.forEach((pf, i) => data[\"v\" + (i + 1)] = ew.getOptionValue(pf, this.formElement));\r\n      return data;\r\n    }\r\n\r\n    /**\r\n     * Get URL\r\n     */;\r\n    _proto.getUrl = function getUrl(query, start) {\r\n      let params = new URLSearchParams({\r\n        q: query || \"\",\r\n        n: this.limit,\r\n        rnd: ew.random(),\r\n        start: $$1.isNumber(start) ? start : -1\r\n      });\r\n      return ew.getApiUrl(ew.API_LOOKUP_ACTION, params.toString());\r\n    }\r\n\r\n    /**\r\n     * Prepare URL and data for sending request\r\n     * @param {string} query - Search term\r\n     * @param {Number} start - Start page\r\n     */;\r\n    _proto.prepare = function prepare(query, start) {\r\n      return {\r\n        url: this.getUrl(query, start),\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: this.generateRequest()\r\n      };\r\n    }\r\n\r\n    /**\r\n     * Transform options (virtual)\r\n     * @param {Object[]} data - Data from server\r\n     */;\r\n    _proto.transform = function transform(data) {\r\n      let results = [];\r\n      if ((data == null ? void 0 : data.result) == \"OK\") {\r\n        this.recordCount = data.totalRecordCount;\r\n        results = data.records;\r\n      }\r\n      return results;\r\n    }\r\n\r\n    /**\r\n     * Convert options to Select2 data format\r\n     * @param {Object[]} options - Options\r\n     * @returns {Object[]}\r\n     */;\r\n    _proto.toSelect2Data = function toSelect2Data(options) {\r\n      if (Array.isArray(options)) {\r\n        if (options.every(item => item.hasOwnProperty(\"gf\"))) {\r\n          // Has group by field\r\n          let groups = [...new Set(options.map(item => item.gf))];\r\n          return groups.map(group => {\r\n            return {\r\n              text: group,\r\n              children: options.filter(item => item.gf == group).map(item => {\r\n                return {\r\n                  id: item.lf,\r\n                  text: this.formatResult({\r\n                    lf: item.lf,\r\n                    df: item.df,\r\n                    df2: item.df2,\r\n                    df3: item.df3,\r\n                    df4: item.df4\r\n                  })\r\n                };\r\n              })\r\n            };\r\n          });\r\n        } else {\r\n          return options.map(item => {\r\n            return {\r\n              id: item.lf,\r\n              text: this.formatResult({\r\n                lf: item.lf,\r\n                df: item.df,\r\n                df2: item.df2,\r\n                df3: item.df3,\r\n                df4: item.df4\r\n              })\r\n            };\r\n          });\r\n        }\r\n      }\r\n      return options;\r\n    };\r\n    return _createClass(AjaxLookup, [{\r\n      key: \"isAutoSuggest\",\r\n      get: function () {\r\n        var _this$_isAutoSuggest;\r\n        (_this$_isAutoSuggest = this._isAutoSuggest) != null ? _this$_isAutoSuggest : this._isAutoSuggest = ew.isAutoSuggest(this.element);\r\n        return this._isAutoSuggest;\r\n      }\r\n\r\n      /**\r\n       * Lookup options\r\n       */\r\n    }, {\r\n      key: \"options\",\r\n      get: function () {\r\n        return this.list.lookupOptions;\r\n      }\r\n    }]);\r\n  }();\n\n  function _assertThisInitialized(e) {\r\n    if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n    return e;\r\n  }\n\n  // AutoSuggest class\r\n  let AutoSuggest = /*#__PURE__*/function (_AjaxLookup) {\r\n    function AutoSuggest(settings) {\r\n      var _this;\r\n      _this = _AjaxLookup.call(this, settings) || this;\r\n      if (!_this.element)\r\n        // Element not found\r\n        return _assertThisInitialized(_this);\r\n      _this.input = _this.form.getElement(\"sv_\" + _this.elementId); // User input\r\n      if (!_this.input || _this.elementId.includes(\"$rowindex$\")) return _assertThisInitialized(_this);\r\n      let self = _this,\r\n        $input = $$1(_this.input),\r\n        $element = $$1(_this.element);\r\n\r\n      // Properties\r\n      _this.minWidth = settings.minWidth;\r\n      _this.maxHeight = settings.maxHeight;\r\n      _this.highlight = settings.highlight;\r\n      _this.hint = settings.hint;\r\n      _this.minLength = settings.minLength;\r\n      _this.templates = Object.assign({}, settings.templates);\r\n      _this.classNames = Object.assign({}, settings.classNames);\r\n      _this.delay = settings.delay; // For loading more results\r\n      _this.debounce = settings.debounce;\r\n      _this.display = settings.display || \"text\";\r\n      _this.forceSelection = settings.forceSelect;\r\n      _this.lineHeight = settings.lineHeight;\r\n      _this.paddingY = settings.paddingY;\r\n      _this.lookupAllDisplayFields = settings.lookupAllDisplayFields;\r\n      _this.$input = $input;\r\n      _this.$element = $element;\r\n\r\n      // Save instance\r\n      $element.data(\"autosuggest\", _this);\r\n\r\n      // Save initial option\r\n      if ($input.val() && $element.val()) _this.element.add($element.val(), $input.val(), true);\r\n\r\n      // Add events\r\n      $input.on(\"typeahead:select\", (e, d) => {\r\n        self.setValue(d[self.display]);\r\n      }).on(\"change\", () => {\r\n        let ta = $input.data(\"tt-typeahead\");\r\n        if (ta != null && ta.isOpen() && !ta.menu.empty()) {\r\n          let $item = ta.menu.getActiveSelectable();\r\n          if ($item) {\r\n            // A suggestion is highlighted\r\n            let i = $item.index(),\r\n              val = self.element.options[i].text;\r\n            $input.typeahead(\"val\", val);\r\n          }\r\n        }\r\n        self.setValue();\r\n      }).on(\"blur\", () => {\r\n        // \"change\" fires before blur\r\n        let ta = $input.data(\"tt-typeahead\");\r\n        if (ta != null && ta.isOpen()) ta.menu.close();\r\n      }).on(\"focus\", () => {\r\n        $input.attr(\"placeholder\", $input.data(\"placeholder\")).removeClass(\"is-invalid\");\r\n        $element.removeClass(\"is-invalid\");\r\n      });\r\n\r\n      // Get suggestions\r\n      let async = !_this.options.length,\r\n        loadingMore = false,\r\n        timer;\r\n\r\n      // Option template (\"suggestion\" template)\r\n      let tpl = self.list.template || self.templates.suggestion;\r\n      if (tpl && $$1.isString(tpl)) tpl = $$1.templates(tpl);\r\n      if (tpl) self.templates.suggestion = tpl.render.bind(tpl);\r\n      if (async && !self.templates.footer) self.templates.footer = '<div class=\"tt-footer dropdown-item\"><div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + ew.language.phrase(\"LoadingMore\") + '</span></div></div>'; // \"footer\" template\r\n\r\n      let source = (query, syncResults, asyncResults) => {\r\n        if (async) {\r\n          if (timer) timer.cancel();\r\n          timer = $$1.later(_this.debounce, null, () => {\r\n            _this.recordCount = 0; // Reset\r\n            $$1.ajax(_this.prepare(query)).done(data => asyncResults(_this.transform(data)));\r\n          });\r\n        } else {\r\n          let records = _this.getSyncResults(query);\r\n          syncResults(_this.transform({\r\n            result: \"OK\",\r\n            totalRecordCount: records.length,\r\n            records\r\n          }));\r\n        }\r\n      };\r\n\r\n      // Create Typeahead\r\n      $$1(function () {\r\n        // Typeahead options and dataset\r\n        let options = {\r\n          highlight: self.highlight,\r\n          minLength: self.minLength,\r\n          hint: self.hint,\r\n          classNames: self.classNames\r\n        };\r\n        let dataset = {\r\n          name: self.form.id + \"-\" + self.elementId,\r\n          source,\r\n          async,\r\n          templates: self.templates,\r\n          display: self.display,\r\n          limit: async ? self.limit : Infinity\r\n        };\r\n        let args = [options, dataset];\r\n        // Trigger \"typeahead\" event\r\n        $element.trigger(\"typeahead\", [args]);\r\n        // Create Typeahead\r\n        self.typeahead = $input.typeahead.apply($input, args).off(\"blur.tt\").data(\"tt-typeahead\");\r\n        let menu = self.typeahead.menu,\r\n          $menu = menu.$node,\r\n          $dataset = $menu.find(\".tt-dataset\"),\r\n          suggestionHeight = () => $menu.find(\".tt-suggestion\").outerHeight(false);\r\n        if (self.minWidth) $menu.css(\"min-width\", self.minWidth);\r\n        $input.on(\"typeahead:rendered\", (e, suggestions) => {\r\n          let rendered = suggestions.length,\r\n            count = self.count;\r\n          if (count >= self.limit) {\r\n            let h = suggestionHeight();\r\n            if (h) $dataset.css(\"max-height\", h * self.limit);\r\n          }\r\n          if (rendered > 0) $dataset.scrollTop(suggestionHeight() * (count - rendered)); // Scroll to the first suggestion\r\n          if (async) $menu.find(\".tt-footer\").toggle(self.recordCount > count);\r\n        });\r\n        if (async) {\r\n          let loadingMoreTimer;\r\n          $dataset.on(\"scroll\", () => {\r\n            var _loadingMoreTimer;\r\n            (_loadingMoreTimer = loadingMoreTimer) == null || _loadingMoreTimer.cancel();\r\n            loadingMoreTimer = $$1.later(self.delay, null, () => {\r\n              let $footer = $menu.find(\".tt-footer\");\r\n              if (!$footer.is(\":hidden\") && !loadingMore) {\r\n                let currentOffset = $dataset.offset().top + $dataset.outerHeight(false),\r\n                  loadingMoreOffset = $footer.offset().top + $footer.outerHeight(false);\r\n                if (currentOffset + 20 > loadingMoreOffset) {\r\n                  // $footer shows more than 20px\r\n                  loadingMore = true;\r\n                  self.getMore().always(() => loadingMore = false);\r\n                } else {\r\n                  var _loadingMoreTimer2;\r\n                  (_loadingMoreTimer2 = loadingMoreTimer) == null || _loadingMoreTimer2.cancel();\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n      });\r\n      return _this;\r\n    }\r\n\r\n    // Set the selected item to the actual field\r\n    _inheritsLoose(AutoSuggest, _AjaxLookup);\r\n    var _proto = AutoSuggest.prototype;\r\n    _proto.setValue = function setValue(v) {\r\n      v || (v = this.$input.val());\r\n      let index = this.element.options.findIndex(option => option.text == v);\r\n      if (index < 0) {\r\n        // Not found in results\r\n        if (this.forceSelection && v) {\r\n          // Force selection and query not empty => error\r\n          this.$input.typeahead(\"val\", \"\").addClass(\"is-invalid\");\r\n          this.$element.next(\".invalid-feedback\").html(ew.language.phrase(\"ValueNotExist\"));\r\n          this.$element.addClass(\"is-invalid\").val(\"\").trigger(\"change\");\r\n          return;\r\n        }\r\n      } else {\r\n        // Found in results\r\n        this.element.options[index].selected = true;\r\n        if (!/s(ea)?rch$/.test(this.formElement.id) || this.forceSelection)\r\n          // Force selection or not search form\r\n          v = this.element.options[index].value; // Replace the display value by Link Field value\r\n      }\r\n      if (v !== this.$element.attr(\"value\")) this.$element.attr(\"value\", v).trigger(\"change\"); // Set value to the actual field\r\n    }\r\n\r\n    // Transform suggestion\r\n    ;\r\n    _proto.transform = function transform(data) {\r\n      let results = _AjaxLookup.prototype.transform.call(this, data).map(item => Object.assign({}, item, {\r\n        text: _AjaxLookup.prototype.formatResult.call(this, item)\r\n      }));\r\n      this.element.options = results.map(item => new ew.SelectionListOption(item.text, item.lf || item[0]));\r\n      return results;\r\n    }\r\n\r\n    // Get current suggestion count\r\n    ;\r\n    // Get suggestions from lookup cache\r\n    _proto.getSyncResults = function getSyncResults(query) {\r\n      if (this.options.length) {\r\n        let results = this.options.filter(item => {\r\n          if (this.lookupAllDisplayFields) {\r\n            let v = [item.df, item.df2, item.df3, item.df4].map(df => String(df).toLowerCase()).join(\" \");\r\n            return query.toLowerCase().split(\" \").filter(q => q !== \"\").every(q => v.includes(q));\r\n          } else {\r\n            return String(item.df).toLowerCase().startsWith(query);\r\n          }\r\n        });\r\n        this.recordCount = results.length;\r\n        return results;\r\n      }\r\n      return [];\r\n    }\r\n\r\n    // Get more suggestions by Ajax\r\n    ;\r\n    _proto.getMore = function getMore() {\r\n      let menu = this.typeahead.menu,\r\n        start = this.count,\r\n        settings = this.prepare(menu.query, start);\r\n      return $$1.ajax(settings).done(data => menu.datasets[0]._append(menu.query, this.transform(data)));\r\n    };\r\n    return _createClass(AutoSuggest, [{\r\n      key: \"count\",\r\n      get: function () {\r\n        return this.typeahead.menu.$node.find(\".tt-suggestion.tt-selectable\").length || 0;\r\n      }\r\n    }]);\r\n  }(AjaxLookup);\n\n  /**\r\n   * Class Forms\r\n   */\r\n  let Forms = /*#__PURE__*/function () {\r\n    function Forms() {\r\n      _defineProperty(this, \"_forms\", {});\r\n    }\r\n    var _proto = Forms.prototype;\r\n    /**\r\n     * Get form by element or id\r\n     * @param {HTMLElement|string} el Element or id\r\n     */\r\n    _proto.get = function get(el) {\r\n      var _ew$getForm;\r\n      if (!el) return null;\r\n      let id = $$1.isString(el) ? el : (_ew$getForm = ew.getForm(el)) == null ? void 0 : _ew$getForm.id;\r\n      return this._forms[id];\r\n    }\r\n\r\n    /**\r\n     * Add form\r\n     * @param {Form} f - Form\r\n     */;\r\n    _proto.add = function add(f) {\r\n      if (this._forms[f.id] && this._forms[f.id] !== f) delete this._forms[f.id];\r\n      this._forms[f.id] = f;\r\n    }\r\n\r\n    /**\r\n     * Get all ids\r\n     * @returns {string[]}\r\n     */;\r\n    _proto.ids = function ids() {\r\n      return Object.keys(this._forms);\r\n    };\r\n    return Forms;\r\n  }();\n\n  let lang = ew.language.phrase(\"select2\");\r\n  var Select2Language = {\r\n    errorLoading: function () {\r\n      return lang.errorLoading;\r\n    },\r\n    inputTooLong: function (args) {\r\n      var overChars = args.input.length - args.maximum;\r\n      return sprintf(lang.inputTooLong, overChars);\r\n    },\r\n    inputTooShort: function (args) {\r\n      var remainingChars = args.minimum - args.input.length;\r\n      return sprintf(lang.inputTooShort, remainingChars);\r\n    },\r\n    loadingMore: function () {\r\n      return '<div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + lang.loadingMore + '</span></div>';\r\n    },\r\n    maximumSelected: function (args) {\r\n      return sprintf(lang.maximumSelected, args.maximum);\r\n    },\r\n    noResults: function () {\r\n      return lang.noResults;\r\n    },\r\n    searching: function () {\r\n      return '<div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + lang.searching + '</span></div>';\r\n    },\r\n    removeAllItems: function () {\r\n      return lang.removeAllItems;\r\n    },\r\n    removeItem: function () {\r\n      return lang.removeItem;\r\n    },\r\n    search: function () {\r\n      return lang.search;\r\n    }\r\n  };\n\n  let _defined$3 = $$1.fn.select2.amd.require._defined,\r\n    Utils$3 = _defined$3['select2/utils'];\r\n\r\n  /**\r\n   * Select2 decorator for Results\r\n   */\r\n  let Select2ResultsDecorator = /*#__PURE__*/function () {\r\n    function Select2ResultsDecorator() {}\r\n    var _proto = Select2ResultsDecorator.prototype;\r\n    _proto.render = function render(decorated) {\r\n      var $results = $$1('<div class=\"select2-results__options ' + this.options.get('containerClass') + '\" role=\"listbox\"></div>'); //***\r\n\r\n      if (this.options.get('multiple')) {\r\n        $results.attr('aria-multiselectable', 'true');\r\n      }\r\n      this.$results = $results;\r\n      return $results;\r\n    };\r\n    _proto.displayMessage = function displayMessage(decorated, params) {\r\n      var escapeMarkup = this.options.get('escapeMarkup');\r\n      this.clear();\r\n      this.hideLoading();\r\n      var $message = $$1('<div role=\"alert\" aria-live=\"assertive\"' + ' class=\"select2-results__option\"></div>'); //***\r\n\r\n      if (params.message.includes(\"<\") && params.message.includes(\">\")) {\r\n        // HTML //***\r\n        $message.append(params.message);\r\n      } else {\r\n        var message = this.options.get('translations').get(params.message);\r\n        $message.append(escapeMarkup(message(params.args)));\r\n      }\r\n      $message[0].className += ' select2-results__message';\r\n      this.$results.append($message);\r\n    };\r\n    _proto.append = function append(decorated, data) {\r\n      this.hideLoading();\r\n      if (data.results == null || data.results.length === 0) {\r\n        if (this.$results.children().length === 0) {\r\n          if (this.$element.data(\"updating\") && data.pagination.more) {\r\n            this.trigger('results:message', {\r\n              message: '<div class=\"spinner-border spinner-border-sm text-primary ew-select-spinner\" role=\"status\"><span class=\"visually-hidden\">' + ew.language.phrase('Loading') + '</span></div> ' + ew.language.phrase('Loading')\r\n            });\r\n            this.$element.one(\"updated\", () => this.$element.select2(\"close\").select2(\"open\"));\r\n          } else {\r\n            this.trigger('results:message', {\r\n              message: 'noResults'\r\n            });\r\n          }\r\n        }\r\n        return;\r\n      }\r\n      data.results = this.sort(data.results);\r\n\r\n      //***\r\n      var cols = this.options.get('columns'),\r\n        len = data.results.length,\r\n        $row = this.$results.find(\".\" + this.options.get('rowClass')).last();\r\n      for (var d = 0; d < data.results.length; d++) {\r\n        var item = data.results[d];\r\n        var $option = this.option(item);\r\n        if (!$row.length || $row.children().length == cols) {\r\n          // Add new row\r\n          $row = $$1('<div class=\"' + this.options.get('rowClass') + '\"></div>');\r\n          this.$results.append($row);\r\n        }\r\n        $row.append($option);\r\n        if (d == len - 1) {\r\n          // Last\r\n          var cnt = cols - $row.children().length;\r\n          for (var i = 0; i < cnt; i++) $row.append('<div class=\"' + this.options.get('cellClass') + '\"></div>');\r\n        }\r\n      }\r\n    };\r\n    _proto.option = function option(decorated, data) {\r\n      // var option = document.createElement('li');\r\n      var option = document.createElement('div'); //***\r\n      option.classList.add('select2-results__option');\r\n      option.classList.add('select2-results__option--selectable');\r\n      this.options.get('cellClass').split(\" \").forEach(c => option.classList.add(c)); //***\r\n\r\n      var attrs = {\r\n        'role': 'option',\r\n        'aria-selected': 'false'\r\n      };\r\n      var matches = window.Element.prototype.matches || window.Element.prototype.msMatchesSelector || window.Element.prototype.webkitMatchesSelector;\r\n      if (data.element != null && matches.call(data.element, ':disabled') || data.element == null && data.disabled) {\r\n        attrs['aria-disabled'] = 'true';\r\n        option.classList.remove('select2-results__option--selectable');\r\n        option.classList.add('select2-results__option--disabled');\r\n      }\r\n      if (data.id == null) {\r\n        option.classList.remove('select2-results__option--selectable');\r\n      }\r\n      if (data._resultId != null) {\r\n        option.id = data._resultId;\r\n      }\r\n      if (data.title) {\r\n        option.title = data.title;\r\n      }\r\n\r\n      // if (data.children) { //***\r\n      //   attrs.role = 'group';\r\n      //   attrs['aria-label'] = data.text;\r\n      //   option.classList.remove('select2-results__option--selectable');\r\n      //   option.classList.add('select2-results__option--group');\r\n      // }\r\n\r\n      for (var attr in attrs) {\r\n        var val = attrs[attr];\r\n        option.setAttribute(attr, val);\r\n      }\r\n\r\n      // if (data.children) { //***\r\n      //   var $option = $(option);\r\n\r\n      //   var label = document.createElement('strong');\r\n      //   label.className = 'select2-results__group';\r\n\r\n      //   this.template(data, label);\r\n\r\n      //   var $children = [];\r\n\r\n      //   for (var c = 0; c < data.children.length; c++) {\r\n      //     var child = data.children[c];\r\n\r\n      //     var $child = this.option(child);\r\n\r\n      //     $children.push($child);\r\n      //   }\r\n\r\n      //   var $childrenContainer = $('<ul></ul>', {\r\n      //     'class': 'select2-results__options select2-results__options--nested',\r\n      //     'role': 'none'\r\n      //   });\r\n\r\n      //   $childrenContainer.append($children);\r\n\r\n      //   $option.append(label);\r\n      //   $option.append($childrenContainer);\r\n      // } else {\r\n      this.template(data, option);\r\n      // }\r\n\r\n      Utils$3.StoreData(option, 'data', data);\r\n      return option;\r\n    };\r\n    return Select2ResultsDecorator;\r\n  }();\n\n  let _defined$2 = $$1.fn.select2.amd.require._defined,\r\n    Utils$2 = _defined$2['select2/utils'];\r\n\r\n  /**\r\n   * Results for modal lookup\r\n   */\r\n  let ModalResults = /*#__PURE__*/function () {\r\n    function ModalResults() {}\r\n    var _proto = ModalResults.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var _container$listeners$;\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n\r\n      // Remove handlers\r\n      (_container$listeners$ = container.listeners['results:select']) == null || _container$listeners$.pop();\r\n      this.$results.off('mouseup');\r\n      container.on('results:select', function (evt) {\r\n        var $highlighted = self.getHighlightedResults();\r\n        if ($highlighted.length === 0) {\r\n          return;\r\n        }\r\n        var data = Utils$2.GetData($highlighted[0], 'data');\r\n        if ($highlighted.hasClass('select2-results__option--selected')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        } else {\r\n          self.trigger('select', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        }\r\n      });\r\n      this.$results.on('mousedown', '.select2-results__option--selectable', function (evt) {\r\n        this._mousedown = true;\r\n      });\r\n      this.$results.on('mouseup', '.select2-results__option--selectable', function (evt) {\r\n        if (!this._mousedown) return;\r\n        var $this = $$1(this);\r\n        var data = Utils$2.GetData(this, 'data');\r\n        if ($this.hasClass('select2-results__option--selected')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n          return;\r\n        }\r\n        self.trigger('select', {\r\n          originalEvent: evt,\r\n          data: data\r\n        });\r\n      });\r\n    };\r\n    return ModalResults;\r\n  }();\n\n  /**\r\n   * Search box for modal lookup\r\n   */\r\n  let ModalSearch = /*#__PURE__*/function () {\r\n    function ModalSearch() {}\r\n    var _proto = ModalSearch.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var _container$listeners$;\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      (_container$listeners$ = container.listeners['close']) == null || _container$listeners$.pop(); // Remove handler from Search\r\n\r\n      container.on('close', function () {\r\n        self.$search.attr('tabindex', -1).removeAttr('aria-controls').removeAttr('aria-activedescendant');\r\n      });\r\n    };\r\n    return ModalSearch;\r\n  }();\n\n  /**\r\n   * Dropdown search decorator\r\n   */\r\n  let KEYS = $.fn.select2.amd.require._defined['select2/keys'];\r\n  KEYS.PRINT_SCREEN = 44;\r\n  let DropdownSearchDecorator = /*#__PURE__*/function () {\r\n    function DropdownSearchDecorator() {}\r\n    var _proto = DropdownSearchDecorator.prototype;\r\n    _proto.handleSearch = function handleSearch(decorated, evt) {\r\n      var key = evt.which;\r\n\r\n      // Ignore events from modifier keys\r\n      if ([KEYS.TAB, KEYS.SHIFT, KEYS.CTRL, KEYS.ALT, KEYS.PRINT_SCREEN].includes(key)) {\r\n        return;\r\n      }\r\n      if (!this._keyUpPrevented) {\r\n        var input = this.$search.val();\r\n        this.trigger('query', {\r\n          term: input\r\n        });\r\n      }\r\n      this._keyUpPrevented = false;\r\n    };\r\n    return DropdownSearchDecorator;\r\n  }();\n\n  let AttachBody$2 = $$1.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n\r\n  /**\r\n   * Select2 AttachBody with popper\r\n   */\r\n  let Select2AttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    // Constructor\r\n    function Select2AttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    }\r\n\r\n    // Override _attachPositioningHandler\r\n    _inheritsLoose(Select2AttachBody, _AttachBody);\r\n    var _proto = Select2AttachBody.prototype;\r\n    _proto._attachPositioningHandler = function _attachPositioningHandler(decorated, container) {\r\n      var self = this;\r\n      var events = ['scroll.select2.' + container.id, 'resize.select2.' + container.id, 'orientationchange.select2.' + container.id];\r\n      var handler = () => {\r\n        self._positionDropdown();\r\n        self._resizeDropdown();\r\n      };\r\n      $$1(window).on(events.join(' '), handler);\r\n      container.$element.closest('.modal').on('scroll.select2.' + container.id, handler);\r\n    };\r\n    // Override _detachPositioningHandler\r\n    _proto._detachPositioningHandler = function _detachPositioningHandler(decorated, container) {\r\n      var events = ['scroll.select2.' + container.id, 'resize.select2.' + container.id, 'orientationchange.select2.' + container.id];\r\n      $$1(window).off(events.join(' '));\r\n      container.$element.closest('.modal').off('scroll.select2.' + container.id);\r\n    };\r\n    // Override _showDropdown\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$_popper;\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n      (_this$_popper = this._popper) != null ? _this$_popper : this._popper = Popper.createPopper(this.$container[0], this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n      this._positionDropdown();\r\n      this._resizeDropdown();\r\n    };\r\n    // Override _positionDropdown()\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper2;\r\n      (_this$_popper2 = this._popper) == null || _this$_popper2.update();\r\n    }\r\n\r\n    // Override destroy()\r\n    ;\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n      (_this$_popper3 = this._popper) == null || _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n    return Select2AttachBody;\r\n  }(AttachBody$2);\n\n  /**\r\n   * Select2 AttachBody decorator for modal lookup\r\n   */\r\n  let ModalAttachBody = /*#__PURE__*/function () {\r\n    function ModalAttachBody(decorated, $element, options) {\r\n      _defineProperty(this, \"$modal\", null);\r\n      options.set('dropdownParent', $$1(document.body));\r\n      decorated.call(this, $element, options);\r\n    }\r\n    var _proto = ModalAttachBody.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      let self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown();\r\n\r\n        // Must bind after the results handlers to ensure correct sizing\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    };\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown.removeClass('select2');\r\n      this.$container = $container;\r\n    };\r\n    _proto.render = function render(decorated) {\r\n      let $container = $$1('<span></span>');\r\n      let $dropdown = decorated.call(this);\r\n      $container.append($dropdown);\r\n      this.$dropdownContainer = $container;\r\n      return $container;\r\n    };\r\n    _proto._bindContainerResultHandlers = function _bindContainerResultHandlers(decorated, container) {\r\n      // These should only be bound once\r\n      if (this._containerResultsHandlersBound) {\r\n        return;\r\n      }\r\n      let self = this;\r\n      container.$modal = this.$modal;\r\n      container.on('results:all', function () {\r\n        var _self$$search$;\r\n        self._updateDropdown();\r\n        (_self$$search$ = self.$search[0]) == null || _self$$search$.focus();\r\n      });\r\n      container.on('results:append', function () {\r\n        self._updateDropdown();\r\n      });\r\n      container.on('results:message', function () {\r\n        self._updateDropdown();\r\n      });\r\n      container.on('select', function (e) {\r\n        var _e$originalEvent;\r\n        let target = (_e$originalEvent = e.originalEvent) == null ? void 0 : _e$originalEvent.currentTarget;\r\n        target == null || target.classList.add('select2-results__option--selected');\r\n        self._updateDropdown();\r\n      });\r\n      container.on('unselect', function (e) {\r\n        var _e$originalEvent2;\r\n        let target = (_e$originalEvent2 = e.originalEvent) == null ? void 0 : _e$originalEvent2.currentTarget;\r\n        target == null || target.classList.remove('select2-results__option--selected');\r\n        self._updateDropdown();\r\n      });\r\n      this._containerResultsHandlersBound = true;\r\n    };\r\n    _proto._updateDropdown = function _updateDropdown() {\r\n      if (!this.$modal.find(this.$dropdownContainer)[0]) this.$modal.find('.modal-body').children().detach().end().append(this.$dropdownContainer);\r\n    };\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$$modal;\r\n      let self = this,\r\n        oldValue = this.$element.val();\r\n      this.$dropdownContainer.appendTo(this.options.get('dropdownParent'));\r\n      (_this$$modal = this.$modal) != null ? _this$$modal : this.$modal = $$1('#ew-modal-lookup-dialog');\r\n      this._updateDropdown();\r\n      this.$modal.find('.modal-title').empty().append(sprintf(ew.language.phrase('LookupTitle'), this.$element.data('caption')));\r\n      this.$modal.find('.modal-footer button[data-value]').off().on('click', function () {\r\n        if (!$$1(this).data('value'))\r\n          // Cancel\r\n          self.$element.val(oldValue).trigger('change');\r\n      });\r\n      this.$modal.modal('show').on('hidden.bs.modal', function (event) {\r\n        self.$container.removeClass('select2-container--open');\r\n      }).draggable(this.options.get('draggableOptions'));\r\n    };\r\n    return ModalAttachBody;\r\n  }();\n\n  let AttachBody$1 = $$1.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n\r\n  /**\r\n   * Select2 AttachBody for table header filter\r\n   */\r\n  let FilterAttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    // Constructor\r\n    function FilterAttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    }\r\n\r\n    // Override bind()\r\n    _inheritsLoose(FilterAttachBody, _AttachBody);\r\n    var _proto = FilterAttachBody.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown();\r\n\r\n        // Must bind after the results handlers to ensure correct sizing\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      container.on('close', function () {\r\n        self._hideDropdown();\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    }\r\n\r\n    // Override _positionDropdown()\r\n    ;\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper;\r\n      (_this$_popper = this._popper) == null || _this$_popper.update();\r\n    }\r\n\r\n    // Override _resizeDropdown()\r\n    ;\r\n    _proto._resizeDropdown = function _resizeDropdown() {\r\n      var css = {\r\n        width: this.$container.outerWidth(false) + 'px'\r\n      };\r\n      if (this.options.get('dropdownAutoWidth')) {\r\n        css.minWidth = css.width;\r\n        css.position = 'relative';\r\n        css.width = 'auto';\r\n      }\r\n      this.$dropdown.css(css);\r\n    }\r\n\r\n    // Override _showDropdown()\r\n    ;\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _dropdownButton$close, _this$_popper2;\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n\r\n      // Footer\r\n      let self = this,\r\n        oldValue = this.$element.val(),\r\n        $footer = $$1('#ew-filter-dropdown-footer').contents().clone();\r\n      $footer.find('.ew-filter-btn[data-value]').off('click.ew').on('click.ew', function (e) {\r\n        let value = $$1(this).data('value');\r\n        if (value) {\r\n          // OK\r\n          $$1(self.$element[0].form).triggerHandler('submit');\r\n        } else {\r\n          // Cancel\r\n          self.$element.val(oldValue).trigger('change');\r\n        }\r\n        self.$element.select2('close');\r\n      });\r\n      $footer.find('.ew-filter-clear').off('click.ew').on('click.ew', e => self.$element.data('select2').selection._handleClear(e));\r\n      let $filterDropdown = this.$dropdownContainer.find('.ew-filter-dropdown');\r\n      if (!$filterDropdown.find('.ew-filter-btn')[0]) $filterDropdown.append($footer);\r\n\r\n      // Popper\r\n      var dropdownButton = document.querySelector('.ew-filter-dropdown-btn[data-table=' + this.$element.data('table') + '][data-field=' + this.$element.data('field') + ']'),\r\n        reference = (_dropdownButton$close = dropdownButton.closest(\".ew-table-header-cell\")) != null ? _dropdownButton$close : dropdownButton.closest(\".ew-table-header-btn\");\r\n      (_this$_popper2 = this._popper) != null ? _this$_popper2 : this._popper = Popper.createPopper(reference, this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n      this._positionDropdown();\r\n      this._resizeDropdown();\r\n    }\r\n\r\n    // Override position()\r\n    ;\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown[0].classList.remove('select2');\r\n      $dropdown[0].classList.add('select2-container--open');\r\n      this.$container = $container;\r\n    };\r\n    // Override destroy()\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n      (_this$_popper3 = this._popper) == null || _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n    return FilterAttachBody;\r\n  }(AttachBody$1);\n\n  let AttachBody = $$1.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n\r\n  /**\r\n   * Select2 AttachBody for dropdown\r\n   */\r\n  let DropdownAttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    // Constructor\r\n    function DropdownAttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    }\r\n\r\n    // Override bind()\r\n    _inheritsLoose(DropdownAttachBody, _AttachBody);\r\n    var _proto = DropdownAttachBody.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown();\r\n\r\n        // Must bind after the results handlers to ensure correct sizing\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      container.on('close', function () {\r\n        self._hideDropdown();\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    }\r\n\r\n    // Override _showDropdown()\r\n    ;\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$_popper;\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n      (_this$_popper = this._popper) != null ? _this$_popper : this._popper = Popper.createPopper(this.$element.parent().find('.select2-container')[0], this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n      this._positionDropdown();\r\n      this._resizeDropdown();\r\n    }\r\n\r\n    // Override _positionDropdown()\r\n    ;\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper2;\r\n      (_this$_popper2 = this._popper) == null || _this$_popper2.update();\r\n    }\r\n\r\n    // Override position()\r\n    ;\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown[0].classList.remove('select2');\r\n      $dropdown[0].classList.add('select2-container--open');\r\n      this.$container = $container;\r\n    };\r\n    // Override destroy()\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n      (_this$_popper3 = this._popper) == null || _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n    return DropdownAttachBody;\r\n  }(AttachBody);\n\n  let _defined$1 = $$1.fn.select2.amd.require._defined,\r\n    AllowClear$1 = _defined$1['select2/selection/allowClear'],\r\n    Utils$1 = _defined$1['select2/utils'];\r\n\r\n  /**\r\n   * Select2 AttachBody for table header filter\r\n   */\r\n  let FilterAllowClear = /*#__PURE__*/function (_AllowClear) {\r\n    function FilterAllowClear() {\r\n      return _AllowClear.apply(this, arguments) || this;\r\n    }\r\n    _inheritsLoose(FilterAllowClear, _AllowClear);\r\n    var _proto = FilterAllowClear.prototype;\r\n    // Override _handleClear\r\n    _proto._handleClear = function _handleClear(_, evt) {\r\n      // Ignore the event if it is disabled\r\n      if (this.isDisabled()) {\r\n        return;\r\n      }\r\n      var $clear = this.$selection.find('.select2-selection__clear');\r\n\r\n      // Ignore the event if nothing has been selected\r\n      if ($clear.length === 0) {\r\n        return;\r\n      }\r\n      evt.stopPropagation();\r\n      var data = Utils$1.GetData($clear[0], 'data');\r\n      var previousVal = this.$element.val();\r\n      this.$element.val(this.placeholder.id);\r\n      var unselectData = {\r\n        data: data\r\n      };\r\n      this.trigger('clear', unselectData);\r\n      if (unselectData.prevented) {\r\n        this.$element.val(previousVal);\r\n        return;\r\n      }\r\n      for (var d = 0; d < data.length; d++) {\r\n        unselectData = {\r\n          data: data[d]\r\n        };\r\n\r\n        // Trigger the `unselect` event, so people can prevent it from being\r\n        // cleared.\r\n        this.trigger('unselect', unselectData);\r\n\r\n        // If the event was prevented, don't clear it out.\r\n        if (unselectData.prevented) {\r\n          this.$element.val(previousVal);\r\n          return;\r\n        }\r\n      }\r\n      this.$element.trigger('input').trigger('change');\r\n    };\r\n    return FilterAllowClear;\r\n  }(AllowClear$1);\n\n  /**\r\n   * Select2 decorator for MultipleSelection\r\n   */\r\n  let Select2MultipleSelectionDecorator = /*#__PURE__*/function () {\r\n    function Select2MultipleSelectionDecorator() {}\r\n    var _proto = Select2MultipleSelectionDecorator.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      decorated.call(this, container, $container);\r\n      this.$selection.on('click', '.select2-selection__choice__remove', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    };\r\n    return Select2MultipleSelectionDecorator;\r\n  }();\n\n  /**\r\n   * Select2 decorator for SelectAdapter\r\n   */\r\n  let Select2DataAdapterDecorator = /*#__PURE__*/function () {\r\n    function Select2DataAdapterDecorator() {}\r\n    var _proto = Select2DataAdapterDecorator.prototype;\r\n    _proto.option = function option(decorated, data) {\r\n      var _data$element;\r\n      var text = data.text,\r\n        html = (_data$element = data.element) == null ? void 0 : _data$element.innerHTML,\r\n        $option = decorated.call(this, data);\r\n\r\n      // Check HTML\r\n      if (text.startsWith('<') && text.endsWith('>')) $option.html(text);else if (html && html != text) $option.html(html);\r\n      return $option;\r\n    };\r\n    return Select2DataAdapterDecorator;\r\n  }();\n\n  // Defined classes from select2\r\n  let _defined = $.fn.select2.amd.require._defined,\r\n    ResultsList = _defined['select2/results'],\r\n    SingleSelection = _defined['select2/selection/single'],\r\n    MultipleSelection = _defined['select2/selection/multiple'],\r\n    Placeholder = _defined['select2/selection/placeholder'],\r\n    AllowClear = _defined['select2/selection/allowClear'],\r\n    SelectionSearch = _defined['select2/selection/search'],\r\n    EventRelay = _defined['select2/selection/eventRelay'],\r\n    Utils = _defined['select2/utils'],\r\n    Translation = _defined['select2/translation'],\r\n    SelectData = _defined['select2/data/select'],\r\n    ArrayData = _defined['select2/data/array'],\r\n    AjaxData = _defined['select2/data/ajax'],\r\n    Tags = _defined['select2/data/tags'],\r\n    Tokenizer = _defined['select2/data/tokenizer'],\r\n    MinimumInputLength = _defined['select2/data/minimumInputLength'],\r\n    MaximumInputLength = _defined['select2/data/maximumInputLength'],\r\n    MaximumSelectionLength = _defined['select2/data/maximumSelectionLength'],\r\n    Dropdown = _defined['select2/dropdown'],\r\n    DropdownSearch = _defined['select2/dropdown/search'],\r\n    HidePlaceholder = _defined['select2/dropdown/hidePlaceholder'],\r\n    InfiniteScroll = _defined['select2/dropdown/infiniteScroll'],\r\n    // AttachBody = _defined['select2/dropdown/attachBody'],\r\n    MinimumResultsForSearch = _defined['select2/dropdown/minimumResultsForSearch'],\r\n    SelectOnClose = _defined['select2/dropdown/selectOnClose'],\r\n    CloseOnSelect = _defined['select2/dropdown/closeOnSelect'],\r\n    DropdownCSS = _defined['select2/dropdown/dropdownCss'],\r\n    TagsSearchHighlight = _defined['select2/dropdown/tagsSearchHighlight'],\r\n    Defaults = _defined['select2/defaults'];\r\n\r\n  // Override select2 Defaults\r\n  Defaults.apply = function (options) {\r\n    options = $.extend(true, {}, this.defaults, options);\r\n    if (options.dataAdapter == null) {\r\n      if (options.ajax != null) {\r\n        options.dataAdapter = AjaxData;\r\n      } else if (options.data != null) {\r\n        options.dataAdapter = ArrayData;\r\n      } else {\r\n        options.dataAdapter = SelectData;\r\n      }\r\n      options.dataAdapter = Utils.Decorate(\r\n      // Override\r\n      options.dataAdapter, Select2DataAdapterDecorator);\r\n      if (options.minimumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MinimumInputLength);\r\n      }\r\n      if (options.maximumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumInputLength);\r\n      }\r\n      if (options.maximumSelectionLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumSelectionLength);\r\n      }\r\n      if (options.tags) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags);\r\n      }\r\n      if (options.tokenSeparators != null || options.tokenizer != null) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tokenizer);\r\n      }\r\n    }\r\n    if (options.resultsAdapter == null) {\r\n      options.resultsAdapter = ResultsList;\r\n\r\n      // Override\r\n      if (options.columns > 0 && options.customOption) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, Select2ResultsDecorator);\r\n        if (options.iconClass && options.multiple && options.templateResult == ew.selectOptions.templateResult) {\r\n          options._templateResult = options.templateResult;\r\n          options.templateResult = result => result.loading ? result.text : '<div class=\"form-check-input ew-dropdown-check-input\"></div><label class=\"' + options.iconClass + ' ew-dropdown-check-label\">' + options._templateResult(result) + '</label>';\r\n        }\r\n      } else if (options.modal || options.filter) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, ModalResults);\r\n      }\r\n      if (options.ajax != null) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, InfiniteScroll);\r\n      }\r\n      if (options.placeholder != null) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, HidePlaceholder);\r\n      }\r\n      if (options.selectOnClose) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, SelectOnClose);\r\n      }\r\n      if (options.tags) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, TagsSearchHighlight);\r\n      }\r\n    }\r\n    if (options.dropdownAdapter == null) {\r\n      if (options.modal || options.filter) {\r\n        options.dropdownAdapter = Utils.Decorate(Dropdown, DropdownSearch);\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearchDecorator);\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, ModalSearch);\r\n      } else {\r\n        options.dropdownAdapter = Dropdown;\r\n        if (!options.multiple) {\r\n          options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearch);\r\n          options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearchDecorator);\r\n        }\r\n      }\r\n      if (options.minimumResultsForSearch !== 0) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, MinimumResultsForSearch);\r\n      }\r\n      if (options.closeOnSelect) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, CloseOnSelect);\r\n      }\r\n      if (options.dropdownCssClass != null) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownCSS);\r\n      }\r\n      options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, options.modal ? ModalAttachBody : options.filter ? FilterAttachBody : options.dropdown ? DropdownAttachBody : Select2AttachBody // Override\r\n      );\r\n    }\r\n    if (options.selectionAdapter == null) {\r\n      if (options.multiple) {\r\n        options.selectionAdapter = MultipleSelection;\r\n        options.selectionAdapter = Utils.Decorate(\r\n        // Override\r\n        options.selectionAdapter, Select2MultipleSelectionDecorator);\r\n      } else {\r\n        options.selectionAdapter = SingleSelection;\r\n      }\r\n\r\n      // Add the placeholder mixin if a placeholder was specified\r\n      if (options.placeholder != null) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, Placeholder);\r\n      }\r\n      if (options.allowClear) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, options.filter ? FilterAllowClear : AllowClear);\r\n      }\r\n      if (options.multiple) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, SelectionSearch);\r\n      }\r\n      options.selectionAdapter = Utils.Decorate(options.selectionAdapter, EventRelay);\r\n    }\r\n    options.translations = new Translation(Select2Language);\r\n    options.dir = ew.IS_RTL ? \"rtl\" : \"ltr\";\r\n    return options;\r\n  };\n\n  let currentUrl = new URL(window.location);\r\n  let forms = new Forms();\r\n  let $document$1 = $$1(document),\r\n    $body = $$1(\"body\");\r\n  let fieldContainerSelector = \".row, [id^=el_], [class^=el_], form\";\r\n\r\n  // Set focus\r\n  Pace.on(\"done\", () => {\r\n    var _forms$get;\r\n    let form = document.querySelector(\".modal.show form.ew-form\") || document.querySelector(\"form.ew-form\");\r\n    (_forms$get = forms.get(form == null ? void 0 : form.id)) == null || _forms$get.tryFocus();\r\n  });\r\n\r\n  // Create select2\r\n  function createSelect(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n    if ($$1.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.toSelect2Data(lookup.options);\r\n    }\r\n    if ($$1.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n        lookup = new ew.AjaxLookup({\r\n          ...options.ajax,\r\n          ...{\r\n            action: \"modal\"\r\n          }\r\n        });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length, _data$records;\r\n          let self = this;\r\n          return {\r\n            results: lookup.toSelect2Data(lookup.transform(data)),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length = (_data$records = data.records) == null ? void 0 : _data$records.length) != null ? _data$records$length : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $$1.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n    let args = {\r\n      name: options.name,\r\n      options\r\n    };\r\n    $document$1.trigger(\"select2\", [args]);\r\n    let $select = $$1(\"select[data-select2-id='\" + options.selectId + \"']\").select2(args.options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin;\r\n      (_$$data$$dropdown$fin = $$1(this).data(\"select2\").$dropdown.find(\".select2-search__field\")[0]) == null || _$$data$$dropdown$fin.focus({\r\n        preventScroll: true\r\n      });\r\n    });\r\n    if ($$1.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $$1(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n    if (options.minimumResultsForSearch === Infinity) {\r\n      $select.on(\"select2:opening select2:closing\", function () {\r\n        $$1(this).data(\"select2\").$dropdown.find(\".select2-search--dropdown\").addClass(\"select2-search--hide\");\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create modal lookup\r\n  function createModalLookup(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n    if ($$1.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n    if ($$1.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n        lookup = new ew.AjaxLookup({\r\n          ...options.ajax,\r\n          ...{\r\n            action: \"modal\"\r\n          }\r\n        });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length2, _data$records2;\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length2 = (_data$records2 = data.records) == null ? void 0 : _data$records2.length) != null ? _data$records$length2 : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $$1.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n    let $select = $$1(\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin2;\r\n      (_$$data$$dropdown$fin2 = $$1(this).data(\"select2\").$dropdown.find(\".select2-search__field\").addClass(\"form-control\")[0]) == null || _$$data$$dropdown$fin2.focus({\r\n        preventScroll: true\r\n      });\r\n    });\r\n    if ($$1.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $$1(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create table header filter\r\n  function createFilter(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n    if ($$1.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n    if ($$1.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n        lookup = new ew.AjaxLookup({\r\n          ...options.ajax,\r\n          ...{\r\n            action: \"modal\"\r\n          }\r\n        });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length3, _data$records3;\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length3 = (_data$records3 = data.records) == null ? void 0 : _data$records3.length) != null ? _data$records$length3 : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $$1.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n    let $select = $$1(\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin3;\r\n      (_$$data$$dropdown$fin3 = $$1(this).data(\"select2\").$dropdown.find(\".select2-search__field\").addClass(\"form-control\")[0]) == null || _$$data$$dropdown$fin3.focus({\r\n        preventScroll: options.preventScroll\r\n      }); // Do not scroll on focus by default\r\n    });\r\n    if ($$1.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $$1(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n  }\r\n\r\n  // Init icon tooltip\r\n  function initIcons(e) {\r\n    var _e$target;\r\n    let el = (_e$target = e == null ? void 0 : e.target) != null ? _e$target : document,\r\n      tooltipOptions = {\r\n        ...ew.tooltipOptions,\r\n        container: \"body\",\r\n        trigger: ew.IS_MOBILE ? \"manual\" : \"hover\"\r\n      };\r\n    $$1(el).find(\".ew-icon\").closest(\".btn, .ew-home, .ew-row-link:not(.dropdown-item)\").each(function () {\r\n      let $this = $$1(this);\r\n      if ($this.hasClass(\"dropdown-toggle\")) {\r\n        let $p = $this.closest(\".btn-group\");\r\n        if ($p.children(\".btn\").length == 1) {\r\n          $p.tooltip({\r\n            ...tooltipOptions,\r\n            title: this.dataset.title || this.title\r\n          }).on(\"mouseleave\", e => {\r\n            var _bootstrap$Tooltip$ge;\r\n            return (_bootstrap$Tooltip$ge = bootstrap.Tooltip.getInstance(e.currentTarget)) == null ? void 0 : _bootstrap$Tooltip$ge.hide();\r\n          });\r\n          $this.next(\".dropdown-menu\").on(\"mouseover\", e => e.stopPropagation());\r\n        }\r\n      } else {\r\n        $this.tooltip(tooltipOptions);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Init password options\r\n  function initPasswordOptions(e) {\r\n    var _e$target2;\r\n    var el = (_e$target2 = e == null ? void 0 : e.target) != null ? _e$target2 : document;\r\n    if ($$1.fn.pStrength && typeof ew.MIN_PASSWORD_STRENGTH != \"undefined\") {\r\n      $$1(el).find(\".ew-password-strength\").each(function () {\r\n        var $this = $$1(this);\r\n        if (!$this.data(\"pStrength\")) $this.pStrength({\r\n          \"changeBackground\": false,\r\n          \"backgrounds\": [],\r\n          \"passwordValidFrom\": ew.MIN_PASSWORD_STRENGTH,\r\n          \"onPasswordStrengthChanged\": function (strength, percentage) {\r\n            var $pst = $$1(\"[id='\" + this.attr(\"data-password-strength\") + \"']\"),\r\n              // Do not use #\r\n              $pb = $pst.find(\".progress-bar\");\r\n            if (this.val() && !ew.isMaskedPassword(this)) {\r\n              var pct = percentage + \"%\",\r\n                min = ew.MIN_PASSWORD_STRENGTH,\r\n                valid = percentage >= min;\r\n              if (percentage < min * 0.25) {\r\n                $pb.addClass(\"text-bg-danger\").removeClass(\"text-bg-warning text-bg-info text-bg-success\");\r\n              } else if (percentage < min * 0.5) {\r\n                $pb.addClass(\"text-bg-warning\").removeClass(\"text-bg-danger text-bg-info text-bg-success\");\r\n              } else if (percentage < min * 0.75) {\r\n                $pb.addClass(\"text-bg-primary\").removeClass(\"text-bg-danger text-bg-warning text-bg-success\");\r\n              } else {\r\n                $pb.addClass(\"text-bg-success\").removeClass(\"text-bg-danger text-bg-warning text-bg-info\");\r\n              }\r\n              $pb.css(\"width\", pct);\r\n              if (percentage > min * 0.5) pct = sprintf(ew.language.phrase(\"PasswordStrength\"), pct);\r\n              $pb.html(pct);\r\n              $pst.removeClass(\"d-none\");\r\n              this.data(\"validated\", valid);\r\n              if (valid) setValid(this[0]);\r\n            } else {\r\n              $pst.addClass(\"d-none\");\r\n              this.data(\"validated\", null);\r\n            }\r\n            $pst.width(this.outerWidth());\r\n          }\r\n        });\r\n      });\r\n    }\r\n    if ($$1.fn.pGenerator) {\r\n      $$1(el).find(\".ew-password-generator\").each(function () {\r\n        var $this = $$1(this);\r\n        if (!$this.data(\"pGenerator\")) $this.pGenerator({\r\n          \"passwordLength\": ew.GENERATE_PASSWORD_LENGTH,\r\n          \"uppercase\": ew.GENERATE_PASSWORD_UPPERCASE,\r\n          \"lowercase\": ew.GENERATE_PASSWORD_LOWERCASE,\r\n          \"numbers\": ew.GENERATE_PASSWORD_NUMBER,\r\n          \"specialChars\": ew.GENERATE_PASSWORD_SPECIALCHARS,\r\n          \"onPasswordGenerated\": function (pwd) {\r\n            $$1(\"#\" + this.attr(\"data-password-confirm\")).val(pwd);\r\n            $$1(\"#\" + this.attr(\"data-password-field\")).val(pwd).trigger(\"change\").trigger(\"focus\").triggerHandler(\"click\"); // Trigger click to remove \"is-invalid\" class (Do not use $this.data)\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get API action URL\r\n   * @param {string|string[]} action - Route as string or array, e.g. \"foo\", [\"foo\", \"1\"]\r\n   * @param {string|string[]|Object|URLSearchParams|FormData} query - Search params, e.g. \"foo=1&bar=2\", [[\"foo\", \"1\"], [\"bar\", \"2\"]], {\"foo\": \"1\", \"bar\": \"2\"}\r\n   */\r\n  function getApiUrl(action, query) {\r\n    var url = ew.PATH_BASE + ew.API_URL,\r\n      params = query instanceof URLSearchParams ? query : new URLSearchParams(query),\r\n      qs = params.toString();\r\n    if ($$1.isString(action)) {\r\n      // Route as string\r\n      url += action ? action : \"\";\r\n    } else if (Array.isArray(action)) {\r\n      // Route as array\r\n      var route = action.map(function (v) {\r\n        return encodeURIComponent(v);\r\n      }).join(\"/\");\r\n      url += route ? route : \"\";\r\n    }\r\n    return url + (qs ? \"?\" + qs : \"\");\r\n  }\r\n\r\n  /**\r\n   * Parse URL\r\n   * Note: .search is read only, always use .searchParams to change parameters\r\n   * @param {string} url - URL\r\n   * @returns {Object}\r\n   */\r\n  function parseUrl(url) {\r\n    var _pathname, _hash;\r\n    let pathname, search, hash;\r\n    [pathname, hash] = url.split(\"#\");\r\n    [pathname, search] = pathname.split(\"?\");\r\n    if (!search && pathname.includes(\"=\")) [pathname, search] = [\"\", pathname];\r\n    let obj = {\r\n      url: url,\r\n      pathname: (_pathname = pathname) != null ? _pathname : \"\",\r\n      hash: (_hash = hash) != null ? _hash : \"\",\r\n      searchParams: new URLSearchParams(search)\r\n    };\r\n    Object.defineProperty(obj, \"search\", {\r\n      // Read only\r\n      value: search,\r\n      writable: false,\r\n      enumerable: true\r\n    });\r\n    return obj;\r\n  }\r\n\r\n  /**\r\n   * Create URLSearchParams\r\n   * @param {*} params - search parameters\r\n   * @returns {URLSearchParams}\r\n   */\r\n  function createSearchParams(params) {\r\n    try {\r\n      return new URLSearchParams(params);\r\n    } catch (e) {\r\n      console.log(e);\r\n      return new URLSearchParams();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get URL search parameters\r\n   * @param {string} url - URL\r\n   * @returns {URLSearchParams}\r\n   */\r\n  function getSearchParams(url) {\r\n    return parseUrl(url).searchParams;\r\n  }\r\n\r\n  /**\r\n   * Get a search parameter from URL\r\n   * @param {string} url - URL\r\n   * @param {string} name - Name\r\n   * @returns {string} Value\r\n   */\r\n  function getSearchParam(url, name) {\r\n    return getSearchParams(url).get(name);\r\n  }\r\n\r\n  /**\r\n   * Set URL search parameters\r\n   * @param {string} url - URL\r\n   * @param {*} args - search parameters to be merged\r\n   * @returns {string} URL\r\n   */\r\n  function setSearchParams(url) {\r\n    let obj = parseUrl(url);\r\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n      args[_key - 1] = arguments[_key];\r\n    }\r\n    obj.searchParams = mergeSearchParams(obj.searchParams, ...args);\r\n    return buildUrl(obj);\r\n  }\r\n\r\n  /**\r\n   * Merge URL search parameters\r\n   * @param {*} args - search parameters to be merged\r\n   * @returns {URLSearchParams}\r\n   */\r\n  function mergeSearchParams() {\r\n    let searchParams = new URLSearchParams();\r\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n      args[_key2] = arguments[_key2];\r\n    }\r\n    for (const params of args) {\r\n      if ($$1.isObject(params) || $$1.isString(params) && params) {\r\n        // Note: Array is also object\r\n        let newParams = params instanceof URLSearchParams ? params : createSearchParams(params);\r\n        newParams.forEach((value, key) => searchParams.has(key) ? key.endsWith(\"[]\") ? searchParams.append(key, value) : searchParams.set(key, value) : searchParams.set(key, value));\r\n      }\r\n    }\r\n    return searchParams;\r\n  }\r\n\r\n  /**\r\n   * Set URL search parameter\r\n   * @param {string} url - URL\r\n   * @param {string} name - Name\r\n   * @param {string} value - Value\r\n   * @returns {string} URL\r\n   */\r\n  function setSearchParam(url, name, value) {\r\n    return setSearchParams(url, {\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Delete search parameters from URL\r\n   * @param {string} url - URL\r\n   * @param {string[]} names - Names\r\n   * @returns {string} URL\r\n   */\r\n  function deleteSearchParam(url) {\r\n    let obj = parseUrl(url);\r\n    for (var _len3 = arguments.length, names = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\r\n      names[_key3 - 1] = arguments[_key3];\r\n    }\r\n    names.forEach(name => obj.searchParams.delete(name));\r\n    return buildUrl(obj);\r\n  }\r\n\r\n  /**\r\n   * Build URL\r\n   * @param {Object} obj - Object { pathname, searchParams, hash }\r\n   * @returns {string} URL\r\n   */\r\n  function buildUrl(obj) {\r\n    let search = obj.searchParams.toString();\r\n    return obj.pathname + (obj.pathname && search ? \"?\" : \"\") + search + (obj.hash ? \"#\" + obj.hash : \"\");\r\n  }\r\n\r\n  /**\r\n   * Set layout parameter to URL\r\n   * Disable layout by adding \"layout=false\"\r\n   * @param {string} url - URL\r\n   * @param {string} value - Layout\r\n   * @returns {string} URL\r\n   */\r\n  function setLayout(url, value) {\r\n    return url && url != \"#\" ? setSearchParams(url, {\r\n      [ew.PAGE_LAYOUT]: String(value)\r\n    }) : url;\r\n  }\r\n\r\n  // Sanitize URL\r\n  function sanitizeUrl(url) {\r\n    let obj = parseUrl(url),\r\n      searchParams = obj.searchParams;\r\n    searchParams.forEach((value, key) => {\r\n      value = decodeURIComponent(value);\r\n      if ([\"<>\", \"<=\", \">=\", \">\", \"<\"].includes(value)) searchParams.set(key, value);else searchParams.set(key, ew.sanitize(value));\r\n    });\r\n    return buildUrl(obj);\r\n  }\r\n\r\n  // Set session timer\r\n  function setSessionTimer() {\r\n    let timeoutTime, timer, keepAliveTimer, counter;\r\n    // Keep alive\r\n    let keepAlive = () => {\r\n      $$1.get(getApiUrl(ew.API_SESSION_ACTION), {\r\n        \"rnd\": random()\r\n      }).then(token => {\r\n        if (token && $$1.isObject(token)) {\r\n          // PHP\r\n          ew.TOKEN_NAME = token[ew.TOKEN_NAME_KEY];\r\n          ew.ANTIFORGERY_TOKEN = token[ew.ANTIFORGERY_TOKEN_KEY];\r\n          if (token[\"JWT\"]) ew.API_JWT_TOKEN = token[\"JWT\"];\r\n          setTimer();\r\n        }\r\n      });\r\n    };\r\n    // Reset timer\r\n    let resetTimer = () => {\r\n      var _timer;\r\n      counter = ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      timeoutTime = ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      if (timeoutTime < 0) {\r\n        // Timeout now\r\n        timeoutTime = 0;\r\n        counter = 0;\r\n      }\r\n      (_timer = timer) == null || _timer.cancel(); // Clear timer\r\n    };\r\n    // Redirect to TIMEOUT_URL\r\n    let doTimeout = () => {\r\n      resetTimer();\r\n      window.location = sanitizeUrl(ew.TIMEOUT_URL + \"?expired=1\");\r\n    };\r\n    // Timeout\r\n    let timeout = () => {\r\n      var _keepAliveTimer;\r\n      (_keepAliveTimer = keepAliveTimer) == null || _keepAliveTimer.cancel(); // Stop keep alive\r\n      if (counter > 0) {\r\n        let timerInterval,\r\n          message = '<p class=\"text-danger\">' + ew.language.phrase(\"SessionWillExpire\") + '</p>';\r\n        if (message.includes(\"%1$s\") && message.includes(\"%2$s\")) {\r\n          message = sprintf(message, '<span class=\"ew-session-counter-second\">' + counter % 60 + '</span>', '<span class=\"ew-session-counter-minute\">' + Math.floor(counter / 60) + '</span>');\r\n        } else if (message.includes(\"%s\")) {\r\n          message = sprintf(message, '<span class=\"ew-session-counter-second\">' + counter + '</span>');\r\n        }\r\n        Swal.fire({\r\n          ...ew.sweetAlertSettings,\r\n          html: message,\r\n          showConfirmButton: true,\r\n          confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n          timer: counter * 1000,\r\n          timerProgressBar: true,\r\n          allowOutsideClick: false,\r\n          allowEscapeKey: false,\r\n          willOpen: () => {\r\n            timerInterval = setInterval(() => {\r\n              let content = Swal.getHtmlContainer(),\r\n                min = content.querySelector(\".ew-session-counter-minute\"),\r\n                sec = content.querySelector(\".ew-session-counter-second\"),\r\n                timeleft = Math.round(Swal.getTimerLeft() / 1000);\r\n              if (min && sec) {\r\n                min.textContent = Math.floor(timeleft / 60);\r\n                sec.textContent = timeleft % 60;\r\n              } else if (sec) {\r\n                sec.textContent = timeleft;\r\n              }\r\n            }, 1000);\r\n          },\r\n          willClose: () => {\r\n            clearInterval(timerInterval);\r\n          }\r\n        }).then(result => {\r\n          if (result.value) {\r\n            // OK button pressed\r\n            keepAlive();\r\n          } else if (result.dismiss === Swal.DismissReason.timer) {\r\n            // Timeout\r\n            doTimeout();\r\n          }\r\n        });\r\n      } else {\r\n        doTimeout();\r\n      }\r\n    };\r\n    // Set timer\r\n    let setTimer = () => {\r\n      var _ew$vars$login;\r\n      if (ew.SESSION_TIMEOUT > 0 && window.location.pathname != ((_ew$vars$login = ew.vars.login) == null || (_ew$vars$login = _ew$vars$login.login) == null ? void 0 : _ew$vars$login.url)) {\r\n        // Set session timeout except for login page\r\n        resetTimer(); // Reset timer first\r\n        timer = $$1.later(timeoutTime * 1000, null, timeout);\r\n      }\r\n    };\r\n    if (ew.SESSION_KEEP_ALIVE_INTERVAL > 0 || ew.IS_LOGGED_IN && ew.IS_REMEMBER_ME) {\r\n      // Keep alive\r\n      let keepAliveInterval = Math.max(ew.SESSION_KEEP_ALIVE_INTERVAL || ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN, ew.MIN_SESSION_KEEP_ALIVE_INTERVAL);\r\n      keepAliveTimer = $$1.later(keepAliveInterval * 1000, null, keepAlive, null, true); // Periodic\r\n    } else {\r\n      setTimer();\r\n    }\r\n  }\r\n\r\n  // Init export links\r\n  function initExportLinks(e) {\r\n    var _e$target3;\r\n    let $el = $$1((_e$target3 = e == null ? void 0 : e.target) != null ? _e$target3 : document);\r\n    if (e != null && e.target && !$el.find(\"a.ew-export-link[href]\")[0])\r\n      // Export links not found\r\n      $el = $el.closest(\".content\"); // For refresh\r\n    $el.find(\"a.ew-export-link[href]:not(.ew-email):not(.ew-print):not(.ew-xml)\").on(\"click\", function (e) {\r\n      let href = this.href;\r\n      if (href && href != \"#\") fileDownload(href, getchartParams());\r\n      e.preventDefault();\r\n    });\r\n    $el.find(\"a.ew-export-link[href].ew-print, a.ew-export-link[href].ew-xml\").each(function () {\r\n      let url = new URL(this.href);\r\n      url.searchParams.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n      url.searchParams.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n      this.href = url.pathname + url.search; // Add token name and antiforgery token // PHP\r\n    });\r\n  }\r\n\r\n  // Init multi-select checkboxes\r\n  function initMultiSelectCheckboxes(e) {\r\n    var _e$target4;\r\n    var el = (_e$target4 = e == null ? void 0 : e.target) != null ? _e$target4 : document,\r\n      $el = $$1(el),\r\n      $cbs = $el.find(\"input[type=checkbox].ew-multi-select\");\r\n    var _update = function (id) {\r\n      var $els = $cbs.filter(\"[name^='\" + id + \"_']\"),\r\n        cnt = $els.length,\r\n        len = $els.filter(\":checked\").length;\r\n      $$1(\"input[type=checkbox]#\" + id).prop(\"checked\", len == cnt).prop(\"indeterminate\", len != cnt && len != 0);\r\n    };\r\n    $cbs.on(\"change\", e => _update(e.target.name.split(\"_\")[0]));\r\n    $el.find(\"input[type=checkbox].ew-priv:not(.ew-multi-select)\").each((i, el) => _update(el.id)); // Init\r\n  }\r\n\r\n  // Get error from response\r\n  function getError(result) {\r\n    var _result$error, _result$error2;\r\n    return result && (((_result$error = result.error) == null ? void 0 : _result$error.description) || ((_result$error2 = result.error) == null ? void 0 : _result$error2.message) || $$1.isString(result.error) && result.error || result.failureMessage ||\r\n    // Check this first\r\n    result.success === false && result.message || null);\r\n  }\r\n\r\n  // Download file\r\n  function fileDownload(href, data) {\r\n    let isHtml = href.includes(\"export=html\") || href.includes(getApiUrl([ew.API_EXPORT_ACTION, \"html\"])),\r\n      swal = window.parent.Swal; // Use window.parent.Swal in case in iframe\r\n    data = mergeSearchParams(data, [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]]);\r\n    return swal.fire({\r\n      ...ew.sweetAlertSettings,\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: () => {\r\n        swal.showLoading();\r\n        _fetch(href, {\r\n          method: data ? \"POST\" : \"GET\",\r\n          body: data || null\r\n        }).then(async response => {\r\n          let ct = response.headers.get(\"Content-Type\");\r\n          if (ct != null && ct.includes(\"json\")) {\r\n            var _getError;\r\n            let result = await response.json(),\r\n              error = (_getError = getError(result)) != null ? _getError : ew.language.phrase(\"FailedToExport\");\r\n            if (error) {\r\n              swal.hideLoading();\r\n              swal.update({\r\n                html: \"<div class='text-danger'>\" + error + \"</div>\",\r\n                showConfirmButton: true\r\n              });\r\n              $document$1.trigger(\"export\", [{\r\n                type: \"fail\",\r\n                url: href\r\n              }]);\r\n            }\r\n          } else {\r\n            let data = isHtml ? await response.text() : await response.blob(),\r\n              url = URL.createObjectURL(isHtml ? new Blob([data], {\r\n                type: \"text/html\"\r\n              }) : data),\r\n              a = document.createElement(\"a\"),\r\n              cd = response.headers.get(\"Content-Disposition\"),\r\n              m = cd == null ? void 0 : cd.match(/\\bfilename=((['\"])(.+)\\2|([^;]+))/i);\r\n            a.style.display = \"none\";\r\n            a.href = url;\r\n            if (m) a.download = m[3] || m[4];\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"done\",\r\n              url: href,\r\n              objectUrl: url\r\n            }]);\r\n            URL.revokeObjectURL(url);\r\n            swal.close();\r\n          }\r\n        }).catch(error => {\r\n          swal.hideLoading();\r\n          swal.update({\r\n            html: \"<div class='text-danger'>\" + error + \"</div>\",\r\n            showConfirmButton: true\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"fail\",\r\n            url: href\r\n          }]);\r\n        }).finally(() => {\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"always\",\r\n            url: href\r\n          }]);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  // Lazy load images\r\n  function lazyLoad(e) {\r\n    var _e$target5;\r\n    if (!ew.LAZY_LOAD) return;\r\n    var el = (_e$target5 = e == null ? void 0 : e.target) != null ? _e$target5 : document;\r\n    el.querySelectorAll(\"img.ew-lazy\").forEach((img, i) => {\r\n      if (ew.LAZY_LOAD_DELAY > 0) setTimeout(() => img.src = img.dataset.src, i * ew.LAZY_LOAD_DELAY);else img.src = img.dataset.src;\r\n    });\r\n    $document$1.trigger(\"lazyload\"); // All images loaded\r\n  }\r\n\r\n  // Update select2 dropdown position\r\n  function updateDropdownPosition() {\r\n    var select = $$1(\".select2-container--open\").prev(\".ew-select\").data(\"select2\");\r\n    if (select) {\r\n      select.dropdown._positionDropdown();\r\n      select.dropdown._resizeDropdown();\r\n    }\r\n  }\r\n\r\n  // Colorboxes\r\n  function initLightboxes(e) {\r\n    var _e$target6;\r\n    if (!ew.USE_COLORBOX) return;\r\n    var el = (_e$target6 = e == null ? void 0 : e.target) != null ? _e$target6 : document;\r\n    var settings = Object.assign({}, ew.lightboxSettings, {\r\n      title: ew.language.phrase(\"LightboxTitle\"),\r\n      current: ew.language.phrase(\"LightboxCurrent\"),\r\n      previous: ew.language.phrase(\"LightboxPrevious\"),\r\n      next: ew.language.phrase(\"LightboxNext\"),\r\n      close: ew.language.phrase(\"LightboxClose\"),\r\n      xhrError: ew.language.phrase(\"LightboxXhrError\"),\r\n      imgError: ew.language.phrase(\"LightboxImgError\")\r\n    });\r\n    $$1(el).find(\".ew-lightbox\").each(function () {\r\n      var $this = $$1(this);\r\n      $this.colorbox(Object.assign({\r\n        rel: $this.data(\"rel\")\r\n      }, settings));\r\n    });\r\n  }\r\n\r\n  // PDFObjects\r\n  function initPdfObjects(e) {\r\n    var _e$target7;\r\n    if (!ew.EMBED_PDF) return;\r\n    let el = (_e$target7 = e == null ? void 0 : e.target) != null ? _e$target7 : document,\r\n      options = Object.assign({}, ew.PDFObjectOptions);\r\n    $$1(el).find(\".ew-pdfobject\").not(\":has(.pdfobject)\").each(function () {\r\n      // Not already embedded\r\n      let $this = $$1(this),\r\n        url = $this.data(\"url\"),\r\n        html = $this.html();\r\n      if (url) PDFObject.embed(url, this, Object.assign(options, {\r\n        fallbackLink: html\r\n      }));\r\n    });\r\n  }\r\n\r\n  // Tooltips and popovers\r\n  function initTooltips(e) {\r\n    var _e$target8;\r\n    let el = (_e$target8 = e == null ? void 0 : e.target) != null ? _e$target8 : document,\r\n      $el = $$1(el);\r\n    $el.find(\"input[data-bs-toggle=tooltip], textarea[data-bs-toggle=tooltip], select[data-bs-toggle=tooltip]\").each(function () {\r\n      let $this = $$1(this);\r\n      $this.tooltip({\r\n        ...ew.tooltipOptions,\r\n        html: true,\r\n        ...$this.data()\r\n      });\r\n    });\r\n    $el.find(\"a.ew-tooltip-link\").each(tooltip); // Set up tooltip links as popovers\r\n    $el.find(\".ew-tooltip\").tooltip(ew.tooltipOptions);\r\n    $el.find(\".ew-popover\").popover(ew.popoverOptions);\r\n    $el.find(\".ew-tippy[data-title]\").each(function () {\r\n      tippy(this, {\r\n        content: this.dataset.title,\r\n        ...ew.tippyOptions\r\n      });\r\n    });\r\n  }\r\n\r\n  // Parse JSON\r\n  function parseJson(data) {\r\n    if ($$1.isString(data)) {\r\n      try {\r\n        return JSON.parse(data);\r\n      } catch (e) {\r\n        return undefined;\r\n      }\r\n    }\r\n    return data;\r\n  }\r\n\r\n  // Change search operator\r\n  function searchOperatorChange(el) {\r\n    let $el = $$1(el),\r\n      $p = $el.closest(\"[id^=r_], [id^=xs_]\"),\r\n      parm = el.id.substring(2),\r\n      $fld = $p.find(\".ew-search-field\"),\r\n      $fld2 = $p.find(\".ew-search-field2\"),\r\n      $y = $fld2.find(\"[name='y_\" + parm + \"'], [name='y_\" + parm + \"[]']\"),\r\n      hasY = $y.length,\r\n      $cond = $p.find(\".ew-search-cond\"),\r\n      hasCond = $cond.length,\r\n      // Has condition and operator 2\r\n      $and = $p.find(\".ew-search-and\"),\r\n      $opr = $p.find(\".ew-search-operator\"),\r\n      opr = $opr.find(\"[name='z_\" + parm + \"']\").val(),\r\n      $opr2 = $p.find(\".ew-search-operator2\"),\r\n      opr2 = $opr2.find(\"[name='w_\" + parm + \"']\").val(),\r\n      isBetween = opr.includes(\"BETWEEN\"),\r\n      // Can only be operator 1\r\n      isEmptyOpr = [\"IS NULL\", \"IS NOT NULL\", \"IS EMPTY\", \"IS NOT EMPTY\"].includes(opr),\r\n      isEmptyOpr2 = [\"IS NULL\", \"IS NOT NULL\", \"IS EMPTY\", \"IS NOT EMPTY\"].includes(opr2),\r\n      hideOpr2 = !hasY || isBetween,\r\n      hideX = isEmptyOpr,\r\n      hideY = !isBetween && (!hasCond || isEmptyOpr2);\r\n    $cond.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $and.toggleClass(\"d-none\", !isBetween);\r\n    $opr2.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $fld.toggleClass(\"d-none\", hideX).find(\":input\").prop(\"disabled\", hideX);\r\n    $fld2.toggleClass(\"d-none\", hideY).find(\":input\").prop(\"disabled\", hideY);\r\n  }\r\n\r\n  // Init forms\r\n  function initForms(e) {\r\n    var _e$target9;\r\n    let el = (_e$target9 = e == null ? void 0 : e.target) != null ? _e$target9 : document,\r\n      ids = ew.forms.ids();\r\n    for (let id of ids) {\r\n      if (el.matches != null && el.matches(\"#\" + id) || el.querySelector(\"#\" + id)) forms.get(id).init();\r\n    }\r\n  }\r\n\r\n  // Is function\r\n  function isFunction$2(x) {\r\n    return typeof x === \"function\";\r\n  }\r\n\r\n  /**\r\n   * Alert (OK button only)\r\n   *\r\n   * @param {string|Object} msg - Message or config\r\n   * @param {callback} [cb] - Callback function\r\n   * @param {string} [type] - CSS class (see https://getbootstrap.com/docs/5.3/utilities/colors/)\r\n   * @returns {Promise}\r\n   */\r\n  function _alert(msg, cb, type) {\r\n    let config = $$1.isObject(msg) ? msg : {};\r\n    msg = $$1.isString(msg) ? msg : \"\";\r\n    type = $$1.isString(cb) ? cb : type;\r\n    config = $$1.extend(true, {}, ew.sweetAlertSettings, {\r\n      html: msg,\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n      customClass: {\r\n        htmlContainer: \"ew-swal2-html-container text-\" + (type || \"danger\")\r\n      }\r\n    }, config);\r\n    let args = {\r\n      config,\r\n      type,\r\n      show: true\r\n    };\r\n    $document$1.trigger(\"alert\", [args]);\r\n    if (args.show) return Swal.fire(args.config).then(result => isFunction$2(cb) ? cb(result.isConfirmed) : result);\r\n  }\r\n\r\n  /**\r\n   * Prompt/Confirm/Alert\r\n   *\r\n   * @param {string|Object} cfg - Message or config object\r\n   * @param {callback} [cb] - Callback function\r\n   * @returns {Promise}\r\n   */\r\n  function _prompt(cfg, cb) {\r\n    var _config, _config$inputValidato;\r\n    let config = $$1.isObject(cfg) ? cfg : {};\r\n    config = $$1.extend(true, {}, ew.sweetAlertSettings, {\r\n      html: $$1.isString(cfg) ? cfg : \"\",\r\n      showCancelButton: true,\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n      cancelButtonText: ew.language.phrase(\"CancelBtn\")\r\n    }, config); // Confirm/Alert\r\n    if (config.input)\r\n      // Prompt\r\n      (_config$inputValidato = (_config = config).inputValidator) != null ? _config$inputValidato : _config.inputValidator = value => {\r\n        if (!value) return ew.language.phrase(\"EnterValue\");\r\n      };\r\n    return Swal.fire(config).then(result => isFunction$2(cb) ? cb(result.value) : result);\r\n  }\r\n\r\n  // Toast\r\n  function toast(options) {\r\n    options = Object.assign({}, ew.toastOptions, options);\r\n    $document$1.Toasts(\"create\", options);\r\n    var position = options.position,\r\n      $container = $$1(\"#toastsContainer\" + position[0].toUpperCase() + position.substring(1));\r\n    return $container.children().first();\r\n  }\r\n\r\n  /**\r\n   * Show toast\r\n   *\r\n   * @param {string} message - Message\r\n   * @param {string} type - CSS class: \"primary|secondary|success|info|warning|danger|light|dark\"\r\n   * @param {string} title - Title\r\n   */\r\n  function showToast(message, type, title) {\r\n    if (!message) return;\r\n    type || (type = \"danger\");\r\n    title || (title = ew.language.phrase(type));\r\n    let args = {\r\n      message,\r\n      type,\r\n      title,\r\n      show: true\r\n    };\r\n    $document$1.trigger(\"toast\", [args]);\r\n    if (!args.show) return;\r\n    ({\r\n      message,\r\n      type,\r\n      title\r\n    } = args);\r\n    return toast({\r\n      class: \"ew-toast text-bg-\" + type,\r\n      title,\r\n      body: message,\r\n      autohide: type == \"success\" ? ew.autoHideSuccessMessage : false,\r\n      // Autohide for success message\r\n      delay: type == \"success\" ? ew.autoHideSuccessMessageDelay : 500\r\n    });\r\n  }\r\n\r\n  // Get form.ew-form or div.ew-form HTML element\r\n  function getForm(el) {\r\n    if (el instanceof Form) return el.$element[0];\r\n    var $el = $$1(el),\r\n      $f = $el.closest(\".ew-form\");\r\n    if (!$f[0])\r\n      // Element not inside form\r\n      $f = $el.closest(\".ew-grid, .ew-multi-column-grid, .modal\").find(\".ew-form\");\r\n    return $f[0];\r\n  }\r\n\r\n  // Check form data\r\n  function hasFormData(form) {\r\n    var selector = \"[name^=x_],[name^=y_],[name^=z_],[name^=w_],[name=\" + ew.TABLE_BASIC_SEARCH + \"]\",\r\n      els = $$1(form).find(selector).filter(\":enabled\").get();\r\n    for (var i = 0, len = els.length; i < len; i++) {\r\n      var el = els[i];\r\n      if (/^(z|w)_/.test(el.name)) {\r\n        if (/^IS/.test($$1(el).val())) return true;\r\n      } else if (el.type == \"checkbox\" || el.type == \"radio\") {\r\n        if (el.checked) return true;\r\n      } else if (el.type == \"select-one\" || el.type == \"select-multiple\") {\r\n        if (!!$$1(el).val()) return true;\r\n      } else if ([\"text\", \"textarea\", \"password\", \"search\", \"color\", \"date\", \"datetime-local\", \"datetime\", \"email\", \"hidden\", \"month\", \"number\", \"range\", \"tel\", \"time\", \"url\", \"week\"].includes(el.type)) {\r\n        if (el.value) return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Set search type\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns false\r\n   */\r\n  function setSearchType(el) {\r\n    var val = el.dataset.searchType,\r\n      phraseId = \"Auto\";\r\n    if (val == \"=\") phraseId = \"Exact\";else if (val == \"AND\") phraseId = \"All\";else if (val == \"OR\") phraseId = \"Any\";\r\n    el.closest(\".ew-basic-search\").querySelector(\"input.ew-basic-search-type\").value = val || \"\";\r\n    el.closest(\".dropdown-menu\").querySelectorAll(\".dropdown-item\").forEach(item => item.classList.remove(\"active\"));\r\n    el.closest(\".dropdown-item\").classList.add(\"active\");\r\n    var searchType = el.closest(\".input-group\").querySelector(\"#searchtype\"),\r\n      text = ew.language.phrase(\"QuickSearch\" + phraseId + \"Short\");\r\n    searchType.innerHTML = text;\r\n    searchType.classList.toggle(\"me-2\", !!text);\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @this {Form|HTMLElement} Form or parent element\r\n   * @param {(HTMLElement|HTMLElement[]|string|string[])} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns {Promise}\r\n   */\r\n  function updateOptions(obj, parentId, async, change) {\r\n    var _obj, _batch$send;\r\n    var f = this.$element ? this.$element[0] : this.form || ((_obj = obj) == null ? void 0 : _obj.form); // Get form/div element from this/obj\r\n    if (!f) return;\r\n    var frm = this.htmlForm ? this : forms.get(f.id); // Get Form object\r\n    if (!frm) return;\r\n    if (this.form && $$1.isUndefined(obj))\r\n      // Target unspecified => update child fields\r\n      obj = forms.get(this).getList(this).childFields.slice(); // Clone\r\n    else if ($$1.isString(obj)) obj = getElements(obj, f);\r\n    if (!obj || Array.isArray(obj) && obj.length == 0) return;\r\n    var self = this,\r\n      batch = new Batch();\r\n    if (Array.isArray(obj) && $$1.isString(obj[0])) {\r\n      // Array of id\r\n      var els = [];\r\n      for (var i = 0, len = obj.length; i < len; i++) {\r\n        var ar = obj[i].split(\" \");\r\n        if (ar.length == 1 && self.form) {\r\n          // Parent/Child fields in the same table\r\n          var m = getId(self, false).match(/^([xy]\\d*_)/);\r\n          if (m) obj[i] = obj[i].replace(/^([xy]\\d*_)/, m[1]);\r\n        }\r\n        var el = getElements(obj[i], f),\r\n          names = [];\r\n        if (isTextbox(el) || isFilter(el))\r\n          // Search text box or filter\r\n          continue;\r\n        els.push(el);\r\n        if (ar.length == 2 && Array.isArray(el)) {\r\n          // Check if id is \"tblVar fldVar\" and multiple inputs\r\n          var $el = $$1(el);\r\n          $el.each(function () {\r\n            if (!names.includes(this.name)) {\r\n              names.push(this.name);\r\n              var $elf = $el.filter(\"[name='\" + this.name + \"']\"),\r\n                typ = $elf.attr(\"type\"),\r\n                elf = [\"radio\", \"checkbox\"].includes(typ) ? $elf.get() : $elf[0];\r\n              batch.add(_updateOptions.bind(self, elf, parentId, async, change));\r\n            }\r\n          });\r\n        } else {\r\n          batch.add(_updateOptions.bind(self, el, parentId, async, change));\r\n        }\r\n      }\r\n      obj = els;\r\n      var list = forms.get(self).getList(self);\r\n      if (Array.isArray(list == null ? void 0 : list.autoFillTargetFields) && list.autoFillTargetFields[0])\r\n        // AutoFill\r\n        batch.add(autoFill.bind(null, self));\r\n    } else {\r\n      if (isTextbox(obj) || isFilter(obj))\r\n        // Search text box or filter\r\n        return;\r\n      batch.add(_updateOptions.bind(self, obj, parentId, async, change));\r\n    }\r\n    return (_batch$send = batch.send({\r\n      url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n    })) == null ? void 0 : _batch$send.then(function () {\r\n      $document$1.trigger(\"updatedone\", [{\r\n        source: self,\r\n        target: obj\r\n      }]); // Document \"updatedone\" event fired after all the target elements are updated\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @param {(HTMLElement|HTMLElement[]} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns {Promise}\r\n   */\r\n  function _updateOptions(obj, parentId, async, change) {\r\n    if (change === void 0) {\r\n      change = true;\r\n    }\r\n    var id = getId(obj, false);\r\n    if (!id) return;\r\n    var fo = getForm(obj); // Get form/div element from obj\r\n    if (!fo || !fo.id) return;\r\n    var frmo = forms.get(fo.id);\r\n    if (!frmo) return;\r\n    var self = this,\r\n      args = Array.from(arguments),\r\n      ar = getOptionValues(obj),\r\n      m = id.match(/^([xy])(\\d*)_/),\r\n      prefix = m ? m[1] : \"\",\r\n      rowindex = m ? m[2] : \"\",\r\n      arp = [],\r\n      list = frmo.getList(obj),\r\n      $obj = $$1(obj).data(\"updating\", true);\r\n    if ($obj.data(\"hidden\"))\r\n      // Skip data-hidden field, e.g. detail key\r\n      return;\r\n    if ($$1.isUndefined(parentId)) {\r\n      // Parent IDs not specified, use default\r\n      parentId = list.parentFields.slice(); // Clone\r\n      if (rowindex != \"\") {\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n          var arr = parentId[i].split(\" \");\r\n          if (arr.length == 1)\r\n            // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n    }\r\n    if (Array.isArray(parentId) && parentId.length > 0) {\r\n      if (Array.isArray(parentId[0])) {\r\n        // Array of array => data\r\n        arp = parentId;\r\n      } else if ($$1.isString(parentId[0])) {\r\n        // Array of string => Parent IDs\r\n        for (var i = 0, len = parentId.length; i < len; i++) arp.push(getOptionValues(parentId[i], fo));\r\n      }\r\n    }\r\n    if (!isAutoSuggest(obj))\r\n      // Do not clear Auto-Suggest\r\n      clearOptions(obj);\r\n    var addOpt = function (results) {\r\n      var name = getId(obj);\r\n      results.forEach(function (result) {\r\n        let args = {\r\n          \"data\": result,\r\n          \"parents\": arp,\r\n          \"valid\": true,\r\n          \"name\": name,\r\n          \"form\": fo\r\n        };\r\n        $document$1.trigger(\"addoption\", [args]);\r\n        if (args.valid) newOption(obj, result, fo);\r\n      });\r\n      obj.render == null || obj.render(); // Selection list\r\n      selectOption(obj, ar, change);\r\n      if (change) {\r\n        if (!obj.options && obj.length) $obj.first().triggerHandler(\"click\");\r\n        // else\r\n        //     $obj.first().trigger(\"change\");\r\n      }\r\n    };\r\n    if ($$1.isUndefined(async))\r\n      // Async not specified, use default\r\n      async = list.ajax;\r\n    var _updateSibling = function () {\r\n      // Update the y_* element\r\n      if (/(srch|search|summary|crosstab)$/.test(fo.id) && prefix == \"x\" && !rowindex) {\r\n        // Search form\r\n        args[0] = id.replace(/^x_/, \"y_\");\r\n        updateOptions.apply(self, args); // args[0] is string, use updateOptions()\r\n      }\r\n    };\r\n    if (!$$1.isBoolean(async) || Array.isArray(list.lookupOptions) && list.lookupOptions.length > 0) {\r\n      // Non-Ajax or Options loaded\r\n      var ds = list.lookupOptions;\r\n      addOpt(ds);\r\n      _updateSibling();\r\n      $obj.first().trigger(\"updated\", [{\r\n        target: obj\r\n      }]); // Object \"updated\" event fired after the object is updated\r\n      return ds;\r\n    } else {\r\n      // Ajax\r\n      var name = getId(obj),\r\n        data = Object.assign({\r\n          page: list.page,\r\n          field: list.field,\r\n          ajax: \"updateoption\",\r\n          language: ew.LANGUAGE_ID,\r\n          name: name // Name of the target element\r\n        }, getUserParams(\"#p_\" + id, fo)); // Add user parameters\r\n      if (isAutoSuggest(obj) && self.htmlForm)\r\n        // Auto-Suggest (init form or auto-fill)\r\n        data[\"v0\"] = ar[0] || random(); // Filter by the current value\r\n      else if (obj.options && !obj.list && !isNativeSelectOne(obj) ||\r\n      // Not <selection-list> or native <select>\r\n      isModalLookup(obj))\r\n        // Lookup\r\n        data[\"v0\"] = ar[0] ? obj.multiple ? ar.join(ew.MULTIPLE_OPTION_SEPARATOR) : ar[0] : random(); // Filter by the current value\r\n      for (var i = 0, cnt = arp.length; i < cnt; i++)\r\n      // Filter by parent fields\r\n      data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n      obj.showLoading == null || obj.showLoading(); // selection-list\r\n      return $$1.ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n        method: \"POST\",\r\n        dataType: \"json\",\r\n        data: data,\r\n        async: async,\r\n        processData: false,\r\n        success: result => {\r\n          let error = getError(result);\r\n          if (error) {\r\n            _alert(error);\r\n            return;\r\n          }\r\n          let ds = result.records || [];\r\n          addOpt(ds);\r\n          _updateSibling();\r\n          $obj.first().trigger(\"updated\", [Object.assign({}, result, {\r\n            target: obj\r\n          })]); // Object \"updated\" event fired after the object is updated\r\n          return ds;\r\n        },\r\n        error: (jqXHR, textStatus, errorThrown) => _alert(errorThrown),\r\n        complete: () => $obj.data(\"updating\", false)\r\n      });\r\n    }\r\n  }\r\n\r\n  // Get user parameters from id\r\n  function getUserParams(id, root) {\r\n    var id = id.replace(/\\[\\]$/, \"\"),\r\n      o = {};\r\n    var root = !$$1.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    var $els = root ? $$1(root).find(id) : $$1(id);\r\n    var val = $els.val();\r\n    if (val) {\r\n      var params = new URLSearchParams(val);\r\n      params.forEach(function (value, key) {\r\n        o[key] = value;\r\n      });\r\n    }\r\n    return o;\r\n  }\r\n\r\n  // Get query builder filter input HTML\r\n  function getQueryBuilderFilterInput() {\r\n    return function (rule, name) {\r\n      var _document$getElementB, _span$innerHTML$repla;\r\n      let tblVar = this.status.id.replace(/_query_builder$/, \"\"),\r\n        // \"this\" is QueryBuilder\r\n        fldVar = rule.filter.id,\r\n        tmplId = \"tpx_\" + tblVar + \"_\" + fldVar,\r\n        span = (_document$getElementB = document.getElementById(tmplId)) == null || (_document$getElementB = _document$getElementB.content) == null ? void 0 : _document$getElementB.cloneNode(true).querySelector(\".ew-search-field\"),\r\n        html = (_span$innerHTML$repla = span == null ? void 0 : span.innerHTML.replace(/\\binvalid-feedback\\b/, ew.queryBuilderErrorClass).replace(new RegExp(\"(data-field=\\\")?(\\\\b|_)x_\" + fldVar + \"(\\\\[\\\\]|\\\\b)\", \"g\"), ($0, $1, $2) => $1 ? $0 : $2 + name)) != null ? _span$innerHTML$repla : \"\"; // Keep \"data-field\" attribute\r\n      return \"<div class=\\\"d-inline-flex position-relative\\\">\" + html + \"</div>\";\r\n    };\r\n  }\r\n\r\n  // Get query builder value setter\r\n  function getQueryBuilderValueSetter() {\r\n    return function (rule, value) {\r\n      let input = rule.$el.find(\".rule-value-container\").find(\"select, selection-list, input[name^=sv_], input[data-field]\")[0],\r\n        values = Array.isArray(value) ? value : $$1.isValue(value) ? [value] : [];\r\n      if (input != null && input.matches(\"select, selection-list\")) {\r\n        // Selection list\r\n        let form = forms.get(input);\r\n        values.forEach(val => newOption(input, {\r\n          lf: val\r\n        }, form, true));\r\n        form.updateList(input, undefined, undefined, true); // Update immediately\r\n      } else {\r\n        ew.selectOption(input, values);\r\n      }\r\n      return null;\r\n    };\r\n  }\r\n\r\n  // Get query builder filter validation object\r\n  function getQueryBuilderFilterValidation(validators) {\r\n    return {\r\n      callback: function (value, rule) {\r\n        // value not used\r\n        let $value = rule.$el.find(\".rule-value-container\"),\r\n          errors = 0;\r\n        for (let i = 0; i < rule.operator.nb_inputs; i++) {\r\n          $value.find(\"[name='\" + rule.id + '_value_' + i + \"']\").each(function () {\r\n            let $this = $$1(this),\r\n              $invalid = $this.next(\".\" + ew.queryBuilderErrorClass).empty();\r\n            validators == null || validators.forEach == null || validators.forEach(validator => {\r\n              let err = validator(this);\r\n              if ($$1.isObject(err)) {\r\n                errors++;\r\n                $invalid.append(\"<span>\" + Object.values(err)[0] + \"</span>\");\r\n              }\r\n            });\r\n            if ($invalid.html()) $this.addClass(\"is-invalid\").one(\"click\", () => $this.removeClass(\"is-invalid\"));\r\n          });\r\n        }\r\n        return errors ? \"\" : true; // Return error as empty string (errors already set in $invalid)\r\n      }\r\n    };\r\n  }\r\n\r\n  // Apply client side template to a DIV\r\n  function applyTemplate(divId, tmplId, classId, exportType, tblVar, data, isModal) {\r\n    let args = {\r\n      data: data || {},\r\n      id: divId,\r\n      template: tmplId,\r\n      class: classId,\r\n      export: exportType,\r\n      enabled: true\r\n    };\r\n    $document$1.trigger(\"rendertemplate\", [args]);\r\n    if (args.enabled) {\r\n      var _parent$querySelector;\r\n      let parent = isModal ? document.querySelector(\"#ew-modal-dialog.show\") : document.body,\r\n        // Parent (Modal dialog or document)\r\n        template = parent == null || (_parent$querySelector = parent.querySelector(\"#\" + tmplId)) == null ? void 0 : _parent$querySelector.content;\r\n      if (!template) return;\r\n      template.querySelectorAll(\".ew-slot\").forEach(el => {\r\n        let id = el.name || el.id,\r\n          subtmpl = parent.querySelector(\"#\" + id); // Find in parent in case Custom Template in modal dialog\r\n        if (subtmpl != null && subtmpl.content) {\r\n          if (el.dataset.rowspan > 1) Array.prototype.slice.call(subtmpl.content.childNodes).forEach(node => node.rowSpan = el.dataset.rowspan);\r\n          el.replaceWith(subtmpl.content.cloneNode(true));\r\n        } else {\r\n          el.remove();\r\n        }\r\n      });\r\n      if ($$1.views) {\r\n        let textContent = template.textContent,\r\n          hasTag = textContent.includes(\"{{\") && textContent.includes(\"}}\");\r\n        if (!hasTag) {\r\n          let selector = ew.jsRenderAttributes.map(attr => \"[\" + attr + \"*='{{'][\" + attr + \"*='}}']\").join(\",\");\r\n          hasTag = template.querySelector(selector);\r\n        }\r\n        if (hasTag) {\r\n          // Includes JsRender template\r\n          let scripts = Array.prototype.slice.call(template.querySelectorAll(\"script\")); // Extract scripts\r\n          scripts.forEach(item => item.remove());\r\n          let div = document.createElement(\"div\");\r\n          div.appendChild(template);\r\n          let html = div.innerHTML.replace(/{{([^}]+)}}/g, m => htmlDecode(m)),\r\n            // HTML-decode comparison operators\r\n            tmpl = $$1.templates(html);\r\n          parent.querySelector(\"#\" + divId).innerHTML = tmpl.render(args.data);\r\n          scripts.forEach(item => document.body.appendChild(item)); // Add scripts\r\n        } else {\r\n          parent.querySelector(\"#\" + divId).appendChild(template);\r\n        }\r\n      } else {\r\n        parent.querySelector(\"#\" + divId).appendChild(template);\r\n      }\r\n    }\r\n    if (exportType && exportType != \"print\")\r\n      // Export custom template with charts\r\n      exportCustom(divId, exportType, tblVar); // Note: Use classId as fileName\r\n  }\r\n\r\n  // Export custom\r\n  function exportCustom(divId, exportType, tblVar) {\r\n    var _div$children$;\r\n    let div = document.getElementById(divId);\r\n    if ((_div$children$ = div.children[0]) != null && _div$children$.matches(\"div[id^=ct_]\"))\r\n      // Custom template, remove first div tag\r\n      div = div.children[0];\r\n    let data = {\r\n      customexport: exportType,\r\n      data: div.innerHTML,\r\n      ...getchartParams()\r\n    };\r\n    if (ew.TOKEN_NAME && ew.ANTIFORGERY_TOKEN) {\r\n      data[ew.TOKEN_NAME_KEY] = ew.TOKEN_NAME;\r\n      data[ew.ANTIFORGERY_TOKEN_KEY] = ew.ANTIFORGERY_TOKEN;\r\n    }\r\n    if (exportType == \"email\") exportEmail(tblVar, mergeSearchParams(currentUrl.searchParams, data)); // Merge data with email form data in current URL parameters\r\n    else fileDownload(getApiUrl([ew.API_EXPORT_ACTION, exportType, tblVar]), data);\r\n  }\r\n\r\n  // Toggle group\r\n  function toggleGroup(el) {\r\n    let $el = $$1(el),\r\n      $tr = $el.closest(\"tr\");\r\n    if (!$tr.data(\"group\")) {\r\n      // Toggle all\r\n      $tr.closest(\"table\").find(\"tbody\").find(\".ew-rpt-grp-field-1 > .ew-group-toggle\").each(function () {\r\n        toggleGroup(this);\r\n        $el.toggleClass(\"ew-rpt-grp-hide\");\r\n      });\r\n    } else {\r\n      let selector = \"tr\",\r\n        level;\r\n      for (let i = 1; i <= 6; i++) {\r\n        let idx = i == 1 ? \"\" : \"-\" + i,\r\n          data = $tr.data(\"group\" + idx);\r\n        if ($$1.isValue(data)) {\r\n          level = i;\r\n          if (data != \"\") selector += \"[data-group\" + idx + \"='\" + String(data).replace(/'/g, \"\\\\'\") + \"']\";\r\n        }\r\n      }\r\n      if ($el.hasClass(\"ew-rpt-grp-hide\")) {\r\n        // Show\r\n        $$1(selector).slice(1).removeClass(\"ew-rpt-grp-hide-\" + level);\r\n        $el.removeClass(\"ew-rpt-grp-hide\");\r\n      } else {\r\n        // Hide\r\n        $$1(selector).slice(1).addClass(\"ew-rpt-grp-hide-\" + level);\r\n        $el.addClass(\"ew-rpt-grp-hide\");\r\n      }\r\n    }\r\n  }\r\n\r\n  // Check if boolean value is true\r\n  function convertToBool(value) {\r\n    return value && [\"1\", \"y\", \"t\", \"true\"].includes(String(value).toLowerCase());\r\n  }\r\n\r\n  // Check if element value changed\r\n  function valueChanged(fobj, infix, fld, bool) {\r\n    let el = getElement(\"x\" + infix + \"_\" + fld, fobj),\r\n      oldEl = getElement(\"o\" + infix + \"_\" + fld, fobj),\r\n      // Hidden element\r\n      fnEl = getElement(\"fn_x\" + infix + \"_\" + fld, fobj); // Hidden element\r\n    if ((el == null ? void 0 : el.type) == \"hidden\" && !oldEl)\r\n      // For example, detail key\r\n      return false;\r\n    if (!oldEl && (!el || Array.isArray(el) && el.length == 0)) return false;\r\n    if (oldEl && el) {\r\n      if (bool) {\r\n        if (convertToBool(getOptionValue(oldEl)) === convertToBool(getOptionValue(el))) return false;\r\n      } else {\r\n        let oldValue = getOptionValue(oldEl),\r\n          newValue = fnEl ? getOptionValue(fnEl) : getOptionValue(el);\r\n        if (oldValue == newValue) return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Set language\r\n  function setLanguage(el) {\r\n    let val = el.value || el.dataset.language;\r\n    if (!val) return false;\r\n    let currentUrl = new URL(window.location);\r\n    currentUrl.searchParams.set(\"language\", val);\r\n    window.location = sanitizeUrl(currentUrl.toString());\r\n    return false;\r\n  }\r\n\r\n  // Set active user\r\n  function setActiveUser(el) {\r\n    let val = el.checked ? \"1\" : \"0\";\r\n    let currentUrl = new URL(window.location);\r\n    currentUrl.searchParams.set(\"activeuser\", val);\r\n    window.location = sanitizeUrl(currentUrl.toString());\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Submit action\r\n   *\r\n   * @param {MouseEvent} e - Mouse event\r\n   * @param {Object} args - Arguments\r\n   * @param {HTMLElement} args.f - HTML form (default is the form of the source element)\r\n   * @param {string} args.url - URL to which the request is sent (default is current page)\r\n   * @param {Object} args.key - Key as object (for single record only)\r\n   * @param {string|Object} args.msg - Message or Swal config\r\n   * @param {string} args.action - Custom action name\r\n   * @param {string} args.select - \"S\" (single record) or \"M\" (multiple records, default)\r\n   * @param {string} args.method - \"A\" (Ajax by HTTP POST) or \"R\" (Redirect by HTTP GET) or \"P\" (HTTP POST by HTML form, default)\r\n   * @param {Object} args.data - Object of user data that is sent to the server\r\n   * @param {string|callback|Object} success - Function to be called if the request succeeds, or settings for jQuery.ajax() (for Ajax only)\r\n   * @returns\r\n   */\r\n  function submitAction(e, args) {\r\n    var _window$msg;\r\n    let el = e.currentTarget,\r\n      f = args.f || el.form || el.closest(\"form\"),\r\n      $f = $$1(f),\r\n      key = args.key,\r\n      action = args.action,\r\n      url = args.url || currentPage(),\r\n      msg = args.msg,\r\n      data = args.data,\r\n      success = args.success,\r\n      method = Array.isArray(args.method) && args.method.length ? args.method[0] : args.method || \"\",\r\n      isAjax = sameText(method[0], \"A\"),\r\n      isRedirect = sameText(method[0], \"R\"),\r\n      isPostBack = !args.method || sameText(method[0], \"P\"),\r\n      isMultiple = !args.select && !args.key || args.select && sameText(args.select[0], \"M\");\r\n    if ((isMultiple || isPostBack) && !f) {\r\n      _alert(ew.language.phrase(\"NoHtmlForm\"));\r\n      return false;\r\n    }\r\n    if (isMultiple && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let _success = function (result) {\r\n      if ($$1.isString(result)) {\r\n        showMessage(result);\r\n      } else if ($$1.isObject(result)) {\r\n        // JSON\r\n        let error = getError(result);\r\n        if (error) _alert(error);else if ($$1.isString(result.successMessage)) _alert(result.successMessage, \"success\");\r\n        if (result.disabled) el.disabled = true;\r\n      }\r\n    };\r\n    let _append = function (name, value) {\r\n      let $input = $f.find(\"input[type=hidden][name='\" + name + \"']\");\r\n      if ($input[0])\r\n        // Hidden tag exists\r\n        $input.val(value); // Set value\r\n      else\r\n        // Hidden tag does not exist, add one\r\n        $$1(\"<input>\").attr({\r\n          type: \"hidden\",\r\n          name,\r\n          value\r\n        }).appendTo($f);\r\n    };\r\n    let _submit = function (value) {\r\n      if (isPostBack && f) {\r\n        // Post back by form\r\n        if (action) {\r\n          // Action\r\n          _append(\"action\", action); // Set action\r\n        }\r\n        if (!$$1.isUndefined(value)) _append(\"actionvalue\", value); // Set action value\r\n        if ($$1.isObject(data)) {\r\n          // User data\r\n          for (const [name, value] of Object.entries(data)) _append(name, value);\r\n        }\r\n        if (!isMultiple && $$1.isObject(key)) {\r\n          // Key\r\n          for (const [name, value] of Object.entries(key)) _append(name, value);\r\n        }\r\n        if (parseUrl(url).pathname != currentUrl.pathname)\r\n          // Do not use refresh if post to another page\r\n          $f.off(\"submit.ew\");\r\n        $f.prop({\r\n          action: url,\r\n          method: \"post\"\r\n        }).trigger(\"submit\");\r\n      } else if (isAjax || isRedirect) {\r\n        // Ajax or rediect\r\n        data = new URLSearchParams(data); // User data\r\n        if (action) {\r\n          // Action\r\n          data.set(\"action\", action);\r\n          $f.find(\"#action\").remove(); // Remove action in form\r\n        }\r\n        if (isAjax) data.set(\"ajax\", action);\r\n        if (!$$1.isUndefined(value)) data.set(\"actionvalue\", value); // User input value\r\n        if (isAjax) data = mergeSearchParams(data, $f.serialize()); // Form data including key_m[]\r\n        if (!isMultiple && $$1.isObject(key))\r\n          // Key\r\n          data = mergeSearchParams(data, key);\r\n        if (isAjax) {\r\n          if (success && $$1.isString(success)) success = window[success];\r\n          let settings = $$1.isObject(success) ? success : {};\r\n          settings.data = data.toString();\r\n          settings.method || (settings.method = \"POST\");\r\n          settings.success || (settings.success = isFunction$2(success) ? success : _success);\r\n          $$1.ajax(url, settings);\r\n        } else if (isRedirect) {\r\n          redirect(url, null, \"GET\", data); // Note: Does not support \"success\" callback\r\n        }\r\n      }\r\n    };\r\n    msg = $$1.isString(msg) ? (_window$msg = window[msg]) != null ? _window$msg : msg : msg; // Get config object if available\r\n    msg ? _prompt(msg).then(result => result.isDismissed || _submit(result.value)) : _submit();\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Get charts parameters as object\r\n   *\r\n   * @returns string\r\n   */\r\n  function getchartParams() {\r\n    let charts = Array.from(Object.entries(window.exportCharts)).map(_ref => {\r\n      let [id, chart] = _ref;\r\n      return {\r\n        chartEngine: \"Chart.js\",\r\n        streamType: \"base64\",\r\n        stream: chart.toBase64Image(),\r\n        fileName: id + \".png\"\r\n      };\r\n    });\r\n    return charts.length ? {\r\n      charts: JSON.stringify(charts)\r\n    } : null;\r\n  }\r\n\r\n  /**\r\n   * Export with charts, selected records and/or Custom Template (non-API)\r\n   *\r\n   * @param {MouseEvent|HTMLFormElement} args.evt - Event or HTML form\r\n   * @param {string} args.url - Form action\r\n   * @param {string} args.export - Export type\r\n   * @param {boolean} args.custom - Use Custom Template\r\n   * @param {boolean} args.exportSelected - Selected records only\r\n   * @param {HTMLFormElement} args.emailForm - email form object\r\n   * @returns false\r\n   */\r\n  async function _export(args) {\r\n    let {\r\n        evt,\r\n        url,\r\n        export: type,\r\n        custom,\r\n        exportSelected,\r\n        emailForm\r\n      } = args,\r\n      f = evt.currentTarget.form;\r\n    exportSelected && (exportSelected = f && !!f.querySelector(\"input[type=checkbox][name='key_m[]']\"));\r\n    if (exportSelected && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let $f = f ? $$1(f) : $$1('<form class=\"ew-export-form\" method=\"post\"></form>').appendTo($body),\r\n      target = $f.attr(\"target\"),\r\n      action = $f.attr(\"action\"),\r\n      postParams = [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]];\r\n\r\n    // Export data\r\n    try {\r\n      if (custom) {\r\n        var _document$querySelect;\r\n        // Use Custom Template (chart data to be retrieved later in iframe)\r\n        document.body.style.cursor = \"wait\";\r\n        let name = \"ew-export-frame\";\r\n        url = setSearchParams(url, {\r\n          export: type,\r\n          custom: 1\r\n        }, $$1(emailForm).serialize()); // Make sure parameters include \"export=type&custom=1\"\r\n        (_document$querySelect = document.querySelector(\"iframe[name='\" + name + \"']\")) == null || _document$querySelect.remove();\r\n        let $iframe = $$1(\"<iframe>\").attr(\"name\", name).addClass(\"d-none\").appendTo($body);\r\n        $f.attr({\r\n          action: url,\r\n          target: name\r\n        }); // Pass all data including email form data from URL to the iframe by URL parameters\r\n        postParams.forEach(_ref2 => {\r\n          let [name, value] = _ref2;\r\n          return $f.find(\"input[name=\\\"\" + name + \"\\\"]\").val(value)[0] || $$1(\"<input>\").attr({\r\n            type: \"hidden\",\r\n            name,\r\n            value\r\n          }).appendTo($f);\r\n        });\r\n        $iframe.one(\"load\", () => document.body.style.cursor = \"default\").one(\"load\", () => $f.attr({\r\n          action,\r\n          target\r\n        })); // Reset\r\n        $f.trigger(\"submit\");\r\n      } else {\r\n        // No Custom Template\r\n        url = setSearchParam(url, \"export\", type); // Make sure URL parameters include \"export=type\"\r\n        if (type == \"print\") $f.attr(\"action\", url).trigger(\"submit\"); // Submit the form directly\r\n        else fileDownload(url, mergeSearchParams($f.serialize(), getchartParams()));\r\n      }\r\n    } finally {\r\n      f || $f.remove();\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Remove spaces\r\n   * @param {string} value - Value\r\n   * @returns {string}\r\n   */\r\n  function removeSpaces(value) {\r\n    return /^(<(p|br)\\/?>(&nbsp;)?(<\\/p>)?)?$/i.test(value.replace(/\\s/g, \"\")) ? \"\" : value;\r\n  }\r\n\r\n  /**\r\n   * Check if hidden text area (HTML editor)\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n  function isHiddenTextArea(el) {\r\n    var $el = $$1(el);\r\n    return $el.is(\":hidden\") && $el.data(\"editor\");\r\n  }\r\n\r\n  /**\r\n   * Check if modal lookup\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isModalLookup(el) {\r\n    var _el$dataset;\r\n    return el == null || (_el$dataset = el.dataset) == null ? void 0 : _el$dataset.modalLookup;\r\n  }\r\n\r\n  /**\r\n   * Check if filter\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isFilter(el) {\r\n    var _el$dataset2;\r\n    return el == null || (_el$dataset2 = el.dataset) == null ? void 0 : _el$dataset2.filter;\r\n  }\r\n\r\n  /**\r\n   * Check if hidden textbox (Auto-Suggest)\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n  function isAutoSuggest(el) {\r\n    var $el = $$1(el);\r\n    return $el.is(\":hidden\") && $el.data(\"autosuggest\");\r\n  }\r\n\r\n  /**\r\n   * Check if Select2\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isSelect2(el) {\r\n    return el == null || el.matches == null ? void 0 : el.matches(\"select.select2-hidden-accessible\");\r\n  }\r\n\r\n  /**\r\n   * Check if native selection list (select-one)\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isNativeSelectOne(el) {\r\n    return (el == null || el.matches == null ? void 0 : el.matches(\"select:not(.select2-hidden-accessible)\")) && el.type == \"select-one\";\r\n  }\r\n\r\n  /**\r\n   * Check if textbox\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isTextbox(el) {\r\n    return (el == null || el.matches == null ? void 0 : el.matches(\"input:not([type=checkbox]):not([type=radio])\")) && !isAutoSuggest(el);\r\n  }\r\n\r\n  /**\r\n   * Check if boolean checkbox\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isBooleanCheckbox(el) {\r\n    return el == null || el.matches == null ? void 0 : el.matches(\"input[type=checkbox][data-boolean]\");\r\n  }\r\n\r\n  /**\r\n   * Clear error message\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el - HTML element(s) or jQuery\r\n   */\r\n  function clearError(el) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      let typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    }\r\n    $$1(el).closest(fieldContainerSelector).find(\".invalid-feedback\").html(\"\");\r\n  }\r\n\r\n  /**\r\n   * Show error message\r\n   * @param {Form} frm - Form object\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el - HTML element(s) or jQuery\r\n   * @param {string} msg - Error message\r\n   * @param {boolean} focus - Set focus\r\n   */\r\n  function onError(frm, el, msg, focus) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      let typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    } else if (el instanceof Field) {\r\n      // el is Field object\r\n      el = el.element;\r\n    }\r\n    $$1(el).closest(fieldContainerSelector).find(\".invalid-feedback\").append(\"<p>\" + msg + \"</p>\");\r\n    if (focus) setFocus(el);\r\n    frm == null || frm.makeVisible(el);\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Set focus\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   * @param {Object} options - Focus options\r\n   */\r\n  function setFocus(obj, options) {\r\n    if (!obj) return;\r\n    var $obj = $$1(obj);\r\n    if (isHidden($obj)) return;\r\n    if (isHiddenTextArea(obj)) {\r\n      // HTML editor\r\n      return $obj.data(\"editor\").focus();\r\n    } else if (!obj.options && obj.length) {\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    } else if (isAutoSuggest(obj)) {\r\n      // Auto-Suggest\r\n      obj = obj.input;\r\n    }\r\n    obj.focus(options);\r\n  }\r\n\r\n  /**\r\n   * Set invalid\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   */\r\n  function setInvalid(obj) {\r\n    if (!obj) return;\r\n    let $obj = $$1(obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length)\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    let $p = $obj.closest(fieldContainerSelector),\r\n      reset = () => $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"click keydown paste\", reset);\r\n    } else if (isHiddenTextArea(obj)) {\r\n      $obj.removeClass(\"is-valid\").addClass(\"is-invalid\");\r\n      $obj.data(\"editor\").instance.once(\"change\", reset);\r\n    } else if (isModalLookup(obj)) {\r\n      $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"select2:open\", reset);\r\n    } else {\r\n      if ([\"checkbox\", \"radio\"].includes(obj.type)) {\r\n        $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"click keydown\", reset);\r\n      } else {\r\n        let events = ew.BROWSER_NAME.includes(\"Safari\") && !ew.BROWSER_NAME.includes(\"Chrome\") ? \"change input\" : \"click input\"; // Use \"change\" event for Safari\r\n        $obj.parent().one(events, reset);\r\n        $obj.add($obj.closest(\".input-group\")).removeClass(\"is-valid\").addClass(\"is-invalid\");\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set valid\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   */\r\n  function setValid(obj) {\r\n    if (!obj) return;\r\n    let $obj = $$1(obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length)\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    let $p = $obj.closest(fieldContainerSelector),\r\n      reset = () => $p.find(\".is-valid\").removeClass(\"is-valid\");\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"click keydown paste\", reset);\r\n    } else if (isHiddenTextArea(obj)) {\r\n      $obj.removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n      $obj.data(\"editor\").instance.once(\"change\", reset);\r\n    } else if (isModalLookup(obj)) {\r\n      $obj.removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"select2:open\", reset);\r\n    } else {\r\n      if ([\"checkbox\", \"radio\"].includes(obj.type)) {\r\n        $obj.removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"click keydown\", reset);\r\n      } else {\r\n        let events = ew.BROWSER_NAME.includes(\"Safari\") && !ew.BROWSER_NAME.includes(\"Chrome\") ? \"change input\" : \"click input\"; // Use \"change\" event for Safari\r\n        $obj.parent().one(events, reset);\r\n        $obj.add($obj.closest(\".input-group\")).removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n      }\r\n    }\r\n  }\r\n\r\n  // Check if object has value\r\n  function hasValue(obj) {\r\n    return getOptionValue(obj) != \"\";\r\n  }\r\n\r\n  // Check if object value is a masked password\r\n  function isMaskedPassword(obj) {\r\n    var val = $$1(obj).val();\r\n    return val == null ? void 0 : val.match(/^\\*+$/);\r\n  }\r\n\r\n  // Sort by field\r\n  function sort(e, dataset) {\r\n    let {\r\n      sortUrl: url,\r\n      sortType: type,\r\n      context,\r\n      ajax\r\n    } = dataset;\r\n    if (e.shiftKey && !e.ctrlKey) url = setSearchParams(url, {\r\n      cmd: \"resetsort\"\r\n    });else if (type == 2 && e.ctrlKey) url = setSearchParams(url, {\r\n      ctrl: \"1\"\r\n    });\r\n    if (convertToBool(ajax)) refresh(fetch(setLayout(url, false)), context);else window.location = sanitizeUrl(url);\r\n    return false;\r\n  }\r\n\r\n  // Open table header filter by field\r\n  function filter(e) {\r\n    let data = e.currentTarget.dataset;\r\n    $$1(\"select[data-select2-id='f\" + data.table + \"srch_\" + data.field + \"']\").select2(\"open\");\r\n  }\r\n\r\n  /**\r\n   * Scroll an element into view\r\n   */\r\n  function scrollIntoView(el) {\r\n    el == null || el.scrollIntoView(ew.scrollIntoViewOptions);\r\n  }\r\n\r\n  /**\r\n   * Inline actions\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {string} args.url - URL\r\n   * @param {string} args.ewAction - Inline/Grid action (inline/grid)\r\n   * @param {string} args.action - Inline/Grid action type (insert/cancel/update/add/edit/copy/delete)\r\n   * @returns false\r\n   */\r\n  async function inlineAction(args) {\r\n    var _args$evt;\r\n    let $el = $$1((_args$evt = args.evt) == null ? void 0 : _args$evt.currentTarget),\r\n      $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\");\r\n    $el.tooltip(\"hide\");\r\n    if (!$grid[0] && $el.is(\".dropdown-item\")) {\r\n      let $btn = $$1(\"#\" + $el.closest(\".dropdown-menu\").attr(\"aria-labelledby\"));\r\n      if ($btn[0]) {\r\n        $el = $btn;\r\n        $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\");\r\n      }\r\n    }\r\n    if (!$el[0]) return;\r\n    let {\r\n        url,\r\n        ewAction,\r\n        action\r\n      } = args,\r\n      $f = $grid.find(\"form\"),\r\n      f = $f[0],\r\n      $record = $el.closest(\"tr[data-rowindex], div[data-rowindex]\"),\r\n      key = $record.data(\"key\"),\r\n      curindex = $record.data(\"rowindex\"),\r\n      $detached;\r\n    if (action != \"add\" && (!$grid[0] || !f))\r\n      // Allow add with no records => no grid\r\n      return;\r\n\r\n    // Fail\r\n    let _fail = function (o) {\r\n      !o.status || showToast(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    };\r\n\r\n    // Always\r\n    let _always = function () {\r\n      document.body.style.cursor = \"default\";\r\n    };\r\n\r\n    // Success handler for delete\r\n    let _deleted = async function (response) {\r\n      if (!(response instanceof Response))\r\n        // Inline actions only\r\n        return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json();\r\n        if (result != null && result.success) {\r\n          $record.remove();\r\n          showToast(ew.language.phrase(\"DeleteSuccess\"), \"success\");\r\n        } else {\r\n          showToast(getError(result) || ew.language.phrase(\"DeleteFailed\"));\r\n        }\r\n      } else {\r\n        _alert(await response.text());\r\n      }\r\n    };\r\n\r\n    // Disable inline buttons\r\n    let _disableInlineButtons = () => $$1(\".ew-list-options, .ew-list-option-body\").find(\"[data-ew-action='inline'][data-action='add'],[data-ew-action='inline'][data-action='copy'],[data-ew-action='inline'][data-action='edit']\").addClass(\"disabled\");\r\n\r\n    // Enable inline buttons\r\n    let _enableInlineButtons = () => $$1(\".ew-list-options, .ew-list-option-body\").find(\"[data-ew-action='inline'][data-action='add'],[data-ew-action='inline'][data-action='copy'],[data-ew-action='inline'][data-action='edit']\").removeClass(\"disabled\");\r\n\r\n    // Get table\r\n    let _getTable = () => $grid.find(\".ew-grid-middle-panel .ew-table\")[0];\r\n\r\n    // Update row index\r\n    let _updateRowIndexes = tbl => {\r\n      let j = 0;\r\n      Array.from(tbl.rows).forEach(row => row.dataset.rowindex = row.dataset.rowindex === \"0\" ? \"0\" : String(j++)); // Update row index if not Inline-Add/Copy row\r\n    };\r\n\r\n    // Success handler for inline actions\r\n    let _success = async function (response) {\r\n      if (!(response instanceof Response))\r\n        // Inline actions only\r\n        return;\r\n      let text = await response.clone().text(),\r\n        $data = $$1(\"<div>\" + text + \"</div>\"),\r\n        $row = $data.find(\"tr[data-rowindex=0], div[data-rowindex=0]\" + (key ? \", tr[data-key='\" + key + \"'], div[data-key='\" + key + \"']\" : \"\")).filter(\"[data-rowtype=2], [data-rowtype=3]\"),\r\n        // Find Inline-Add first\r\n        inline = $row.data(\"inline\"),\r\n        rowtype = $row.data(\"rowtype\"),\r\n        rowindex = inline && rowtype == 2 /* Inline-Add */ ? 0 : inline && rowtype == 3 /* Inline-Edit */ ? 1 : $row.data(\"rowindex\"),\r\n        $els = $row.add($data.find(\"script[data-rowindex=\" + rowindex + \"]\")); // Add script for the row\r\n      if ([\"add\", \"copy\", \"edit\"].includes(action) && !$els[0])\r\n        // Edit row not found => Error\r\n        return showToast(text);\r\n      if ([\"add\", \"copy\"].includes(action)) {\r\n        // Inline-Add/Copy\r\n        if (document.querySelector(\"main.ew-no-record\") && $data.find(\"main:not(.ew-no-record)\")[0]) {\r\n          // No existing record, new Inline-Add/Copy row found\r\n          await refresh(Promise.resolve(response));\r\n        } else {\r\n          if ($row.is(\"TR\")) {\r\n            // Table\r\n            let tbl = _getTable();\r\n            if (tbl.matches(\".ew-infinite-scroll-table\")) $$1(tbl.tBodies).last().append($els);else $$1(tbl.tBodies).last().prepend($els);\r\n            _updateRowIndexes(tbl); // Update row index\r\n            setupTable(tbl, true);\r\n          } else {\r\n            $grid.find(\".ew-multi-column-row\").append($els);\r\n          }\r\n          _disableInlineButtons();\r\n        }\r\n        ew.initPage($$1.Event({\r\n          type: \"load.ew\",\r\n          target: $grid[0]\r\n        }));\r\n        forms.get(f.id).tryFocus();\r\n        scrollIntoView($grid.find(\"[data-rowtype=2]\")[0]);\r\n      } else if (action == \"edit\") {\r\n        // Inline-Edit\r\n        $detached = $record.replaceWith($els); // Replace current row\r\n        $grid.data(\"detached\", $detached); // Save the detached row\r\n        if ($row.is(\"TR\"))\r\n          // Table\r\n          setupTable(_getTable(), true);\r\n        _disableInlineButtons();\r\n        ew.initPage($$1.Event({\r\n          type: \"load.ew\",\r\n          target: $grid[0]\r\n        }));\r\n        forms.get(f.id).tryFocus();\r\n        scrollIntoView($grid.find(\"[data-rowtype=3]\")[0]);\r\n      }\r\n    };\r\n\r\n    // Submit success handler for inline actions\r\n    let _submitSuccess = async function (response) {\r\n      if (!(response instanceof Response)) return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json(),\r\n          error = getError(result);\r\n        if (error) {\r\n          showToast(error);\r\n          return;\r\n        }\r\n      }\r\n      if (response.headers.get(\"Infinite-Scroll\")) {\r\n        // Infinite scroll\r\n        let text = await response.text(),\r\n          $data = $$1(\"<div>\" + text + \"</div>\"),\r\n          $main = $data.find(\".main\"),\r\n          $row;\r\n        if ([\"insert\", \"update\"].includes(action)) {\r\n          $row = $data.find(\"tr[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"], div[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"]\"); // Row(s) with ROWTYPE_VIEW\r\n          if (!$row[0]) return; // Affected row(s) not found\r\n          if (action == \"insert\")\r\n            // Inline-Add/Copy\r\n            $grid.find(\"tr[data-rowtype=\" + ew.ROWTYPE_ADD + \"], div[data-rowtype=\" + ew.ROWTYPE_ADD + \"]\").replaceWith($row[0]); // Replace add row\r\n          else if (action == \"update\")\r\n            // Inline-Edit/Update\r\n            $row.get().forEach(row => $grid.find(\"tr[data-key='\" + row.dataset.key + \"'], div[data-key='\" + row.dataset.key + \"']\").replaceWith(row)); // Replace row(s) edited/updated\r\n        } else if ([\"add\", \"edit\", \"multiedit\"].includes(action)) {\r\n          // Grid-Add/Grid-Edit/Multi-Edit\r\n          $row = $data.find(\"tr[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"], div[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"]\"); // Row(s) with ROWTYPE_VIEW\r\n          if ([\"edit\", \"multiedit\"].includes(action))\r\n            // Grid-Edit/Multi-Edit\r\n            $row.get().forEach(row => $grid.find(\"tr[data-key='\" + row.dataset.key + \"'], div[data-rowtype='\" + row.dataset.key + \"']\").replaceWith(row));else if (action == \"add\")\r\n            // Grid-Add\r\n            $grid.find(\".ew-grid-middle-panel .ew-table > tbody:last\").append($row); // Append to bottom\r\n        }\r\n        let tbl = _getTable();\r\n        _updateRowIndexes(tbl); // Update row index\r\n        setupTable(tbl, true);\r\n        showMessage({\r\n          target: $data\r\n        }); // Show message, if any\r\n        ew.initPage($$1.Event({\r\n          type: \"load.ew\",\r\n          target: $main[0]\r\n        }));\r\n      } else {\r\n        // Use Ajax actions\r\n        await refresh(Promise.resolve(response));\r\n      }\r\n      let returnUrl = response.headers.get(\"Return-Url\"); // Check if return URL exists\r\n      if (returnUrl && [\"inline\", \"modal\"].includes(args.ewAction) && !samePath(parseUrl(returnUrl).pathname, currentUrl.pathname)) $grid.find(\"[data-ew-action=modal][data-url='\" + returnUrl + \"'], [data-ew-action=inline][data-url='\" + returnUrl + \"']\").trigger(\"click\");\r\n    };\r\n    if (ewAction == \"inline\") {\r\n      if (action == \"cancel\") {\r\n        if (curindex == \"0\") {\r\n          // Cancel Inline-Add/Copy\r\n          $record.remove();\r\n        } else {\r\n          var _$grid$data;\r\n          // Cancel Inline-Edit\r\n          (_$grid$data = $grid.data(\"detached\")) == null || _$grid$data.replaceAll($record);\r\n        }\r\n        _enableInlineButtons();\r\n      } else if (f && [\"insert\", \"update\"].includes(action)) {\r\n        // Post form\r\n        let frm = forms.get(f.id);\r\n        if (await frm.canSubmit(args.evt)) {\r\n          // Validate\r\n          document.body.style.cursor = \"wait\";\r\n          let body = setSearchParams($f.serialize(), {\r\n              action\r\n            }),\r\n            // Set up action\r\n            p = _fetch(setSearchParams(url, {\r\n              rnd: random()\r\n            }), {\r\n              method: \"POST\",\r\n              body\r\n            }).catch(_fail).finally(() => {\r\n              frm.enableForm();\r\n              _always();\r\n            });\r\n          if (frm.submitWithFetch) {\r\n            let args = {\r\n                form: f,\r\n                result: p\r\n              },\r\n              evt = $$1.Event(\"aftersubmit\", {\r\n                originalEvent: args.evt\r\n              });\r\n            frm.trigger(evt, [args]);\r\n          } else {\r\n            p.then(_submitSuccess).finally(_enableInlineButtons);\r\n          }\r\n        }\r\n      } else if (action == \"delete\") {\r\n        // Inline-Delete\r\n        if (!key) {\r\n          // No key from the clicked row => Multi-Delete\r\n          $record = $grid.find(\"input[type=checkbox][name='key_m[]']:checked\").closest(\"tr[data-rowindex], div[data-rowindex]\"); // Update $record\r\n          if (!$record[0]) {\r\n            _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n            return false;\r\n          }\r\n        }\r\n        _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n          if (result) {\r\n            document.body.style.cursor = \"wait\";\r\n            let method = key ? \"GET\" : \"POST\",\r\n              body = deleteSearchParam($f.serialize(), \"action\"),\r\n              frm = forms.get(f.id),\r\n              p = _fetch(setSearchParams(url, {\r\n                action: \"delete\",\r\n                rnd: random()\r\n              }), {\r\n                method,\r\n                body\r\n              }).catch(_fail).finally(() => {\r\n                frm.enableForm();\r\n                _always();\r\n              });\r\n            if (frm.submitWithFetch) {\r\n              let args = {\r\n                  form: f,\r\n                  result: p\r\n                },\r\n                evt = $$1.Event(\"aftersubmit\", {\r\n                  originalEvent: args.evt\r\n                });\r\n              frm.trigger(evt, [args]);\r\n            } else {\r\n              p.then(_deleted);\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        document.body.style.cursor = \"wait\";\r\n        _fetch(setSearchParams(url, {\r\n          rnd: random()\r\n        })).then(_success).catch(_fail).finally(_always);\r\n      }\r\n    } else if (ewAction == \"grid\" || ewAction == \"modal\") {\r\n      // Grid-Add/Edit, Modal-Add/Copy/Edit/Update\r\n      if ((ewAction == \"grid\" && action == \"edit\" || ewAction == \"modal\" && [\"multiedit\", \"update\"].includes(action)) && !keySelected(f)) {\r\n        // Grid-Edit and Multi-Edit/Update\r\n        _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n        return false;\r\n      }\r\n      ew.modalDialogShow({\r\n        ...args,\r\n        callback: _submitSuccess\r\n      });\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Confirm inline-delete\r\n  function confirmDelete(el) {\r\n    clickDelete(el);\r\n    _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n      if (result) {\r\n        if (el.dataset.json && el.href)\r\n          // Handle JSON response\r\n          ew.modalDialogShow({\r\n            url: setSearchParams(el.href, {\r\n              action: \"delete\"\r\n            }),\r\n            lnk: el,\r\n            json: true,\r\n            callback: true\r\n          });else if (el.href) window.location = sanitizeUrl(setSearchParams(el.href, {\r\n          action: \"delete\"\r\n        }));else clearDelete(el);\r\n      }\r\n    });\r\n    return false;\r\n  }\r\n\r\n  // Check if any key selected // PHP\r\n  function keySelected(f) {\r\n    return !!(f != null && f.querySelector(\"input[type=checkbox][name='key_m[]']:checked\"));\r\n  }\r\n\r\n  // Select all keys\r\n  function selectAllKeys(cb) {\r\n    selectAll(cb);\r\n    let tbl = cb == null ? void 0 : cb.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    $$1(tbl.tBodies).each(function () {\r\n      $$1(this.rows).each(function () {\r\n        let $r = $$1(this);\r\n        if ($r.is(\":not(.ew-template):not(.ew-table-preview-row)\")) $r.toggleClass(\"table-active ew-table-selected-row\", cb.checked).triggerHandler(\"change\");\r\n      });\r\n    });\r\n  }\r\n\r\n  // Select all related checkboxes in the form\r\n  function selectAll(cb) {\r\n    if (!(cb != null && cb.form)) return;\r\n    $$1(cb.form.elements).filter(\"input[type=checkbox][name^=\" + cb.name + \"_], [type=checkbox][name=\" + cb.name + \"]\").not(cb).not(\":disabled\").prop(\"checked\", cb.checked).each((i, el) => $$1(el).triggerHandler(\"change\"));\r\n  }\r\n\r\n  // Update selected checkbox\r\n  function updateSelected(f) {\r\n    return !!(f != null && f.querySelector(\"input[type=checkbox][name^=u_]:checked,input[type=hidden][name^=u_][value='1']\"));\r\n  }\r\n\r\n  // Clear selected rows color\r\n  function clearSelected(tbl) {\r\n    let rowIndexes = $$1(tbl).find(\"input[type=checkbox][name='key_m[]']:checked\").closest(\"[data-rowindex]\").map((i, r) => r.dataset.rowindex).get();\r\n    $$1(tbl == null ? void 0 : tbl.rows).filter((i, r) => r.classList.contains(\"table-active\") && !rowIndexes.includes(r.dataset.rowindex)).removeClass(\"table-active ew-table-selected-row\").triggerHandler(\"change\");\r\n  }\r\n\r\n  // Clear all row delete status\r\n  function clearDelete(el) {\r\n    let tbl = el == null ? void 0 : el.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    let $tr = $$1(el).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().removeClass(\"table-active\").triggerHandler(\"change\");\r\n  }\r\n\r\n  // Click single delete link\r\n  function clickDelete(el) {\r\n    let tbl = el == null ? void 0 : el.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    let $tr = $$1(el).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().addClass(\"table-active\").triggerHandler(\"change\");\r\n  }\r\n\r\n  // Select a row\r\n  function selectKey(e) {\r\n    let chk = e.target,\r\n      tbl = chk == null ? void 0 : chk.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    let $tr = $$1(chk).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function () {\r\n      $$1(this).toggleClass(\"table-active ew-table-selected-row\", chk.checked).triggerHandler(\"change\");\r\n    });\r\n    e.stopPropagation();\r\n  }\r\n\r\n  /**\r\n   * Setup table\r\n   *\r\n   * @param {number} [index=undefined] - Index\r\n   * @param {HTMLTableElement} tbl - HTML table element\r\n   * @param {boolean} [force=undefined] - Force setup\r\n   * @returns\r\n   */\r\n  function setupTable() {\r\n    let tbl, force;\r\n    if ($$1.isNumber(arguments[0])) {\r\n      tbl = arguments[1];\r\n    } else if (arguments[0] instanceof HTMLTableElement) {\r\n      tbl = arguments[0];\r\n      force = arguments[1];\r\n    }\r\n    let $tbl = $$1(tbl),\r\n      $rows = $$1(tbl.rows);\r\n    if (!tbl || !tbl.rows || !force && tbl.dataset.isset || tbl.tBodies.length == 0) return;\r\n    // Set selected row color\r\n    let click = function (e) {\r\n      let $this = $$1(this),\r\n        tbl = this.closest(\".ew-table\"),\r\n        $target = $$1(e.target);\r\n      if (!tbl || $target.hasClass(\"btn\") || $target.hasClass(\"ew-preview-btn\") || $target.is(\":input\")) return;\r\n      clearSelected(tbl); // Clear all other selected rows\r\n      $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().toggleClass(\"table-active\").triggerHandler(\"change\");\r\n    };\r\n    let n = $rows.filter(\"[data-rowindex=1]\").length || $rows.filter(\"[data-rowindex=0]\").length || 1,\r\n      // Alternate color every n rows\r\n      rows = $rows.filter(\":not(.ew-template)\").each(function () {\r\n        $$1(this.cells).removeClass(\"ew-table-last-row\").last().addClass(\"ew-table-last-col\"); // Cell of last column\r\n      }).get();\r\n    if (rows.length >= n) {\r\n      let div = $tbl.parentsUntil(\".ew-grid\", \".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\r\n      rows[rows.length - 1].classList.add(\"border-bottom-0\"); // Last row\r\n      rows.splice(n * -1).forEach((row, i) => Array.from(row.cells).filter(cell => cell.rowSpan == i + 1) // Cell of last row\r\n      .forEach(cell => {\r\n        cell.classList.add(\"ew-table-last-row\");\r\n        cell.classList.toggle(\"ew-table-border-bottom\", (div == null ? void 0 : div.clientHeight) > tbl.offsetHeight);\r\n      }));\r\n    }\r\n    let form = tbl.closest(\"form\"),\r\n      attach = form && $$1(form.elements).filter(\"input#action:not([value^=grid])\").length > 0;\r\n    $$1(tbl.tBodies[tbl.tBodies.length - 1].rows) // Use last TBODY (avoid Opera bug)\r\n    .filter(\":not(.ew-template):not(.ew-table-preview-row)\").each(function () {\r\n      let $r = $$1(this);\r\n      if (attach && !$r.data(\"isset\")) $r.on(\"click\", click).data(\"isset\", true);\r\n    });\r\n    setupGrid(tbl.closest(\".ew-grid\"), force);\r\n    tbl.dataset.isset = \"true\";\r\n  }\r\n\r\n  // Setup grid\r\n  function setupGrid(grid, force) {\r\n    let $grid = $$1(grid);\r\n    if (!grid || !force && grid.dataset.isset) return;\r\n    let rowcnt = $grid.find(\"table.ew-table > tbody\").first().children(\"tr:not(.ew-table-preview-row, .ew-template)\").length;\r\n    if (rowcnt == 0 && !grid.querySelector(\".ew-grid-upper-panel, .ew-grid-lower-panel\")) $grid.hide();\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\").hasClass(ew.RESPONSIVE_TABLE_CLASS) && $grid.width() > $$1(\".content\").width()) {\r\n      $grid.addClass(\"d-flex\");\r\n      $grid.closest(\".ew-detail-pages\").addClass(\"d-block\");\r\n      $grid.closest(\".ew-form\").addClass(\"w-100\");\r\n    }\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\") && (!grid.querySelector(\".ew-grid-upper-panel\") || $grid.find(\".ew-grid-upper-panel:hidden\")[0])) {\r\n      let $panel = $grid.find(\".ew-grid-middle-panel:not(.overflow-y-auto):visible\").addClass(\"rounded-top\"),\r\n        $cells = $panel.children(\".ew-table:not(.table-head-fixed):visible\").first().children(\"thead:visible\").first().children(\"tr:visible\").first().children(\"th:visible\");\r\n      $cells.first().addClass(\"rounded-top-left\");\r\n      $cells.last().addClass(\"rounded-top-right\");\r\n    }\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\") && (!grid.querySelector(\".ew-grid-lower-panel\") || $grid.find(\".ew-grid-lower-panel:hidden\")[0])) {\r\n      let $panel = $grid.find(\".ew-grid-middle-panel:not(.overflow-y-auto):visible\").addClass(\"rounded-bottom\"),\r\n        $cells = $panel.children(\".ew-table:not(.table-head-fixed):visible\").last().children(\"tbody:visible\").last().children(\"tr:visible\").last().children(\"td:visible\");\r\n      $cells.first().addClass(\"rounded-bottom-left\");\r\n      $cells.last().addClass(\"rounded-bottom-right\");\r\n    }\r\n    grid.dataset.isset = \"true\";\r\n  }\r\n\r\n  // Add a row to grid\r\n  function addGridRow(el) {\r\n    var _bootstrap$Tooltip$ge2;\r\n    let grid = el == null ? void 0 : el.closest(\".ew-grid\"),\r\n      $grid = $$1(grid),\r\n      $tbl = $grid.find(\"table.ew-table\").last(),\r\n      $p = $tbl.parent(\"div\"),\r\n      $tpl = $tbl.find(\"tr.ew-template\");\r\n    if (!el || !grid || !$tbl[0] || !$tpl[0]) return false;\r\n    let $lastrow = $$1($tbl[0].rows).last();\r\n    $tbl.find(\"td.ew-table-last-row\").removeClass(\"ew-table-last-row\");\r\n    let $row = $tpl.clone(true, true).removeClass(\"ew-template\"),\r\n      form = grid.querySelector(\"div.ew-form[id^=f][id$=grid]\") || grid.querySelector(\"form.ew-form[id^=f][id$=list]\") || grid.querySelector(\"form.ew-form[id^=f][id$=grid]\"),\r\n      $form = $$1(form),\r\n      suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n      $keycnt = $form.find(\"#\" + ew.FORM_KEY_COUNT_NAME + suffix),\r\n      keycnt = parseInt($keycnt.val(), 10) + 1,\r\n      name = ew.FORM_ROW_ACTION_NAME.replace(/^k_/, \"k\" + keycnt + \"_\") + suffix,\r\n      // name=\"k<n>_action\"\r\n      $els = $tpl.find(\"script:contains('$rowindex$')\").add(\"tr.ew-template + script[data-rowindex='$rowindex$']\"); // Get scripts with rowindex\r\n    $row.attr({\r\n      \"id\": \"r\" + keycnt + $row.attr(\"id\").substring(2),\r\n      \"data-rowindex\": keycnt\r\n    });\r\n    $row.children(\"td\").each(function () {\r\n      $$1(this).find(\"*\").each(function () {\r\n        $$1.each(this.attributes, function (i, attr) {\r\n          attr.value = attr.value.replace(/\\$rowindex\\$/g, keycnt); // Replace row index\r\n        });\r\n      });\r\n    });\r\n    let $btn = $row.find(\".ew-icon\").closest(\"a, button\");\r\n    (_bootstrap$Tooltip$ge2 = bootstrap.Tooltip.getInstance($btn[0])) == null || _bootstrap$Tooltip$ge2.dispose();\r\n    $btn.tooltip({\r\n      ...ew.tooltipOptions,\r\n      container: \"body\",\r\n      trigger: \"hover\"\r\n    });\r\n    $keycnt.val(keycnt).after($$1(\"<input>\").attr({\r\n      type: \"hidden\",\r\n      id: name,\r\n      name: name,\r\n      value: \"insert\"\r\n    }));\r\n    $lastrow.after($row);\r\n    $els.get().forEach(el => addScript(el.text.replace(/\\$rowindex\\$/g, keycnt, el.nonce)));\r\n    let frm = $form.data(\"form\");\r\n    frm == null || frm.initEditors();\r\n    frm == null || frm.initUpload();\r\n    setupTable($tbl[0], true);\r\n    $p.scrollTop($p[0].scrollHeight);\r\n    $tbl.trigger(\"rowadded\", [keycnt]);\r\n    return false;\r\n  }\r\n\r\n  // Delete a row from grid\r\n  function deleteGridRow(el, infix) {\r\n    var _bootstrap$Tooltip$ge3;\r\n    (_bootstrap$Tooltip$ge3 = bootstrap.Tooltip.getInstance(el)) == null || _bootstrap$Tooltip$ge3.dispose();\r\n    let grid = el.closest(\".ew-grid, .ew-multi-column-grid\"),\r\n      row = el.closest(\"tr, div[data-rowindex]\"),\r\n      tbl = row == null ? void 0 : row.closest(\".ew-table\"),\r\n      rowidx = parseInt(row == null ? void 0 : row.dataset.rowindex, 10),\r\n      form = (grid == null ? void 0 : grid.querySelector(\"div.ew-form[id^=f][id$=grid]\")) || (grid == null ? void 0 : grid.querySelector(\"form.ew-form[id^=f][id$=list], form.ew-form[id^=f][id$=grid]\")),\r\n      $form = $$1(form),\r\n      frm = $form.data(\"form\");\r\n    if (!el || !grid || !row || !form || !frm)\r\n      // tbl can be null if multi-column\r\n      return false;\r\n    let suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n      keycnt = \"#\" + ew.FORM_KEY_COUNT_NAME + suffix;\r\n    let _delete = function () {\r\n      row.remove();\r\n      if (grid.classList.contains(\".ew-grid\")) setupTable(tbl, true);\r\n      if (rowidx > 0) {\r\n        let $keyact = $form.find(\"#k\" + rowidx + \"_action\" + suffix);\r\n        if ($keyact[0]) {\r\n          $keyact.val($keyact.val() == \"insert\" ? \"insertdelete\" : \"delete\");\r\n        } else {\r\n          $form.find(keycnt).after($$1(\"<input>\").attr({\r\n            type: \"hidden\",\r\n            id: \"k\" + rowidx + \"_action\" + suffix,\r\n            name: \"k\" + rowidx + \"_action\" + suffix,\r\n            value: \"delete\"\r\n          }));\r\n        }\r\n      }\r\n      $$1(tbl).trigger(\"rowdeleted\", [rowidx]);\r\n    };\r\n    if (isFunction$2(frm.emptyRow) && frm.emptyRow(infix)) {\r\n      // Empty row\r\n      _delete();\r\n    } else {\r\n      // Confirm\r\n      _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n        if (result) _delete();\r\n      });\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // HTML encode text\r\n  function htmlEncode(text) {\r\n    return String(text).replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n  }\r\n\r\n  // HTML decode text\r\n  function htmlDecode(text) {\r\n    return String(text).replace(/&amp;/g, '&').replace(/&quot;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>');\r\n  }\r\n\r\n  // Get form element(s) as single element or array of radio/checkbox\r\n  function getElements(el, root) {\r\n    root = !$$1.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    let $root = root ? $$1(root) : $document$1,\r\n      selectors = [],\r\n      getFieldSelector = field => \"[data-field='\" + field + \"']:not(.ew-custom-option):not([name^=y_]):not([data-old])\";\r\n    if (el instanceof HTMLElement && el.dataset.table && el.dataset.field) {\r\n      // HTML element (e.g. radio/checkbox)\r\n      if (isBooleanCheckbox(el)) return el;\r\n      selectors = [\"[data-table='\" + el.dataset.table + \"']\" + getFieldSelector(el.dataset.field)];\r\n    } else if ($$1.isString(el)) {\r\n      let [s1, s2] = el.split(\" \"); // Check if \"<table> <name>\"\r\n      selectors = s2 ? [\"[data-table='\" + s1 + \"']\" + getFieldSelector(getId(s2))] // \"<table> <name>\", remove []\r\n      : [\"[name='\" + el + \"']:not(.ew-custom-option):not([data-old])\", getFieldSelector(getId(el))]; // \"<name>\" only\r\n    }\r\n    let selector = [\"input\", \"select\", \"textarea\", \"button\", \"selection-list\"].flatMap(tag => selectors.map(sel => tag + sel)).join(),\r\n      $els = $root.find(selector);\r\n    if ($root.is(\"form.ew-form\") && $root.find(\"div.ew-form\")[0])\r\n      // Master/Detail form\r\n      $els = $els.not(\"div.ew-form *\"); // Remove elements of detail tables\r\n    if ($els.length == 1 && ($els.is(\":not([type=checkbox]):not([type=radio])\") || isBooleanCheckbox($els[0])) || $els.length == 2 && $els.eq(0).is(\"selection-list\") && $els.eq(1).is(\"input[type=hidden]\"))\r\n      // Polyfill for the ElementInternals\r\n      return $els[0];\r\n    return $els[0] ? $els.get() : null;\r\n  }\r\n\r\n  // Get first element by id/name (not necessarily form element)\r\n  function getElement(name, root) {\r\n    root = !$$1.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    let selector = \"#\" + name.replace(/([\\$\\[\\]])/g, \"\\\\$1\") + \",[name='\" + name + \"']\";\r\n    return root ? $$1(root).find(selector)[0] : $$1(selector).first()[0];\r\n  }\r\n\r\n  // Get ancestor by function\r\n  function getAncestorBy(node, fn) {\r\n    while (node = node.parentNode) {\r\n      var _node;\r\n      if (((_node = node) == null ? void 0 : _node.nodeType) == 1 && (!fn || fn(node))) return node;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // Check if an element is hidden\r\n  function isHidden(el) {\r\n    var $el = $$1(el);\r\n    return $el.css(\"display\") == \"none\" && !$el.is(\"selection-list\") && !$el.closest(\".dropdown-menu\")[0] && !isModalLookup(el) && !isAutoSuggest(el) && !isHiddenTextArea(el) || getAncestorBy(el, node => node.style.display == \"none\" && !node.classList.contains(\"tab-pane\") && !node.classList.contains(\"collapse\")) != null;\r\n  }\r\n\r\n  // Check if same text\r\n  function sameText(o1, o2) {\r\n    return String(o1).toLowerCase() == String(o2).toLowerCase();\r\n  }\r\n\r\n  // Check if same string\r\n  function sameString(o1, o2) {\r\n    return String(o1) == String(o2);\r\n  }\r\n\r\n  // Convert to header case\r\n  function headerCase(str) {\r\n    return !str ? \"\" : String(str).replace(/^[^A-Za-z0-9]*|[^A-Za-z0-9]*$/g, \"\").replace(/([a-z])([A-Z])/g, (m, a, b) => a + \"_\" + b.toLowerCase()).replace(/[^A-Za-z0-9]+|_+/g, \"-\").toLowerCase().replace(/(-?)(\\w+)(-?)/g, (m, a, b, c) => a + b.charAt(0).toUpperCase() + b.slice(1) + c);\r\n  }\r\n\r\n  // Check if same path\r\n  function samePath(p1, p2) {\r\n    p1 = p1 instanceof URL ? p1.pathname : parseUrl(p1).pathname;\r\n    p2 = p2 instanceof URL ? p2.pathname : parseUrl(p2).pathname;\r\n    if (p1 != p2 && p1.startsWith(ew.PATH_BASE) && p2.startsWith(ew.PATH_BASE)) {\r\n      p1 = p1.substring(ew.PATH_BASE.length);\r\n      p2 = p2.substring(ew.PATH_BASE.length);\r\n      let ar1 = p1.split(\"/\"),\r\n        ar2 = p2.split(\"/\");\r\n      if (ar1[0] == ar2[0] && ar1[0].match(/(list|view|edit)$/i) ||\r\n      // *list == *list\r\n      ar1[0] == ar2[0] && ar1[1] == ar2[1] && [ew.LIST_ACTION, ew.VIEW_ACTION, ew.EDIT_ACTION].includes(ar1[1]))\r\n        // xxx/list == xxx/list\r\n        return true;\r\n    }\r\n    return p1 == p2;\r\n  }\r\n\r\n  // Get element value as array for select-multiple field or else as string\r\n  function getValue(el, form) {\r\n    let obj = el;\r\n    if ($$1.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type))\r\n      // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n    if (!obj) return undefined;\r\n    if (obj.options) {\r\n      // Selection list\r\n      return obj.list ? obj.type == \"select-multiple\" ? obj.values : obj.value : $$1(obj).val();\r\n    } else if (Array.isArray(obj)) {\r\n      // Radio/Checkbox list or element not found\r\n      return obj.length ? $$1(obj).filter(\":checked\").map((i, el) => el.value).get() : undefined;\r\n    } else if (isBooleanCheckbox(obj)) {\r\n      // Single checkbox\r\n      return obj.checked ? obj.value : undefined;\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $$1(obj).data(\"editor\").save();\r\n      return obj.value;\r\n    } else {\r\n      // text/hidden\r\n      return obj.value;\r\n    }\r\n  }\r\n\r\n  // Get existing selected values as an array\r\n  function getOptionValues(el, form) {\r\n    let obj = el;\r\n    if ($$1.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type))\r\n      // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n    if (!obj) return [];\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        return obj.values;\r\n      } else if (isSelect2(obj)) {\r\n        let val = $$1(obj).val();\r\n        return Array.isArray(val) ? val : $$1.isValue(val) ? [val] : [];\r\n      } else {\r\n        return Array.from(obj.options).filter(option => option.selected && option.value !== \"\").map(option => option.value);\r\n      }\r\n    } else if (Array.isArray(obj) || isBooleanCheckbox(obj)) {\r\n      // Radio/Checkbox list, or single checkbox, or element not found ([])\r\n      return $$1(obj).filter(\":checked\").map(function () {\r\n        return this.value;\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $$1(obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      // text/hidden\r\n      return [obj.value];\r\n    }\r\n  }\r\n\r\n  // Get existing selected values as string\r\n  function getOptionValue(el, form) {\r\n    return getOptionValues(el, form).join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n  }\r\n\r\n  // Get existing text of selected values as an array\r\n  function getOptionTexts(el, form) {\r\n    let obj = el;\r\n    if ($$1.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type))\r\n      // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n    if (!obj) return [];\r\n    if (isAutoSuggest(obj)) {\r\n      // AutoSuggest (before obj.options)\r\n      return [obj.input.value];\r\n    } else if (obj.options) {\r\n      // Selection list\r\n      return isSelect2(obj) ? $$1(obj).find(\":selected\").map((i, el) => el.innerHTML).get() : Array.from(obj.options).filter(option => option.selected && option.value !== \"\").map(option => option.text);\r\n    } else if (Array.isArray(obj) || isBooleanCheckbox(obj)) {\r\n      // Radio/Checkbox list, or single checkbox, or element not found ([])\r\n      return $$1(obj).filter(\":checked\").map(function () {\r\n        return $$1(this).parent().text();\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $$1(obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      return [obj.value];\r\n    }\r\n  }\r\n\r\n  // Clear existing options\r\n  function clearOptions(obj) {\r\n    if (obj.options) {\r\n      // Selection list\r\n      var lo = obj.type == \"select-multiple\" ||\r\n      // multiple\r\n      obj.hasAttribute(\"data-dropdown\") ||\r\n      // dropdown\r\n      obj.length > 0 && obj.options[0].value != \"\" // non-empty first element\r\n      ? 0 : 1;\r\n      if (obj.list) {\r\n        obj.removeAll();\r\n        obj.render();\r\n      } else {\r\n        for (var i = obj.length - 1; i >= lo; i--) obj.remove(i);\r\n      }\r\n      if (isAutoSuggest(obj)) {\r\n        obj.input.value = \"\";\r\n        obj.value = \"\";\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the name or id of an element\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @param {boolean} [remove=true] - Remove square brackets\r\n   * @returns\r\n   */\r\n  function getId(el, remove) {\r\n    var id = $$1.isString(el) ? el : $$1(el).attr(\"name\") || $$1(el).attr(\"id\"); // Use name first (id may have suffix)\r\n    return remove !== false ? id.replace(/\\[\\]$/, \"\") : id;\r\n  }\r\n\r\n  // Get display value separator\r\n  function valueSeparator(index, obj) {\r\n    var sep = $$1(obj).data(\"value-separator\");\r\n    return Array.isArray(sep) ? sep[index - 1] : sep || \", \";\r\n  }\r\n\r\n  /**\r\n   * Get display value\r\n   *\r\n   * @param {Object} opt - Option being displayed\r\n   * @param {HTMLElment} obj - HTML element\r\n   * @returns {string} Display value\r\n   */\r\n  function displayValue(opt, obj) {\r\n    return [opt.df, opt.df2, opt.df3, opt.df4].reduce((text, value, i) => {\r\n      let sep = i > 0 ? valueSeparator(i, obj) : \"\";\r\n      return !$$1.isUndefined(sep) && $$1.isValue(value) && value != \"\" ? text + sep + value : text;\r\n    }, \"\");\r\n  }\r\n\r\n  /**\r\n   * Create new option\r\n   *\r\n   * @param {(HTMLElement|array)} obj - Selection list\r\n   * @param {Object} data - Object for the new option\r\n   * @param {form} f - form object of obj\r\n   * @param {bool} selected - New option is selected\r\n   * @returns\r\n   */\r\n  function newOption(obj, data, f, selected) {\r\n    let frm = forms.get(f.id),\r\n      id = getId(obj),\r\n      list = frm.getList(obj),\r\n      group = data.gf,\r\n      value = data.lf,\r\n      template = frm.getOptionTemplate(list),\r\n      text = template != null && template.render && !isAutoSuggest(obj) ? template.render(data) : displayValue(data, obj) || value;\r\n    if (obj.options) {\r\n      // Selection list\r\n      let option;\r\n      if (obj.list) {\r\n        option = new ew.SelectionListOption(text, value, !!selected);\r\n      } else {\r\n        option = document.createElement(\"option\");\r\n        option.value = value;\r\n        option.innerHTML = text;\r\n        option.selected = !!selected;\r\n      }\r\n      let args = {\r\n        \"name\": id,\r\n        \"form\": f.$element,\r\n        data,\r\n        group,\r\n        option\r\n      };\r\n      $document$1.trigger(\"newoption\", [args]); // Fire \"newoption\" event for selection list\r\n      if (obj.list) {\r\n        obj.addOption(args.option);\r\n      } else {\r\n        if (args.group && !isSelect2(obj)) {\r\n          var _obj$querySelector;\r\n          let optGroup = Array.from((_obj$querySelector = obj.querySelector(\":scope > optgroup\")) != null ? _obj$querySelector : []).find(g => g.label == args.group);\r\n          if (!optGroup) {\r\n            optGroup = document.createElement(\"optgroup\");\r\n            optGroup.label = args.group;\r\n            obj.add(optGroup);\r\n          }\r\n          optGroup.appendChild(args.option);\r\n        } else {\r\n          obj.add(args.option);\r\n        }\r\n      }\r\n      return args.option.text;\r\n    }\r\n    return text;\r\n  }\r\n\r\n  // Select combobox option\r\n  function selectOption(obj, values, change) {\r\n    var _obj$dataset, _forms$get$getList;\r\n    if (change === void 0) {\r\n      change = true;\r\n    }\r\n    if (!obj || !values) return;\r\n    let $obj = $$1(obj);\r\n    values = Array.isArray(values) ? values : [values];\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        obj.value = values;\r\n      } else {\r\n        var _obj$options$;\r\n        $obj.val(values);\r\n        if (change && isSelect2(obj)) $obj.triggerHandler(\"change\");\r\n        if (obj.type == \"select-one\" && obj.selectedIndex == -1 && !((_obj$options$ = obj.options[0]) != null && _obj$options$.value)) obj.selectedIndex = 0; // Make sure an option is selected\r\n      }\r\n      if (isAutoSuggest(obj) && values.length == 1) {\r\n        let opts = obj.options || [];\r\n        for (let opt of opts) {\r\n          if (opt.value == values[0]) {\r\n            obj.value = opt.value;\r\n            obj.input.value = opt.text;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    } else if (isBooleanCheckbox(obj)) {\r\n      obj.checked = convertToBool(values.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n    } else if (obj.type && obj.type != \"file\") {\r\n      $obj.val(values.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n      if (isHiddenTextArea($obj)) $obj.data(\"editor\").set();\r\n    }\r\n    // Auto-select if only one option\r\n    if (((_obj$dataset = obj.dataset) == null ? void 0 : _obj$dataset.autoselect) === \"false\")\r\n      // data-autoselect=\"false\"\r\n      return;\r\n    let form = getForm(obj),\r\n      autoSelect = form && !(form.id.endsWith(\"search\") || form.id.endsWith(\"srch\") || ((_forms$get$getList = forms.get(form.id).getList(obj)) == null || (_forms$get$getList = _forms$get$getList.parentFields) == null ? void 0 : _forms$get$getList.length) === 0); // Not search forms and has parent fields\r\n    if (autoSelect && obj.options) {\r\n      // Selection List\r\n      if (!obj.list && obj.type == \"select-one\" && obj.options.length == 2 && !obj.options[1].selected) {\r\n        obj.options[1].selected = true;\r\n        !change || $obj.trigger(\"change\");\r\n      } else if (obj.options.length == 1 && !obj.options[0].selected) {\r\n        obj.options[0].selected = true;\r\n        !change || $obj.trigger(\"change\");\r\n      }\r\n      if (isAutoSuggest(obj)) {\r\n        let opts = obj.options || [];\r\n        if (opts.length == 1) {\r\n          obj.value = opts[0].value;\r\n          obj.input.value = opts[0].text;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Fetch API\r\n  function _fetch(url, init) {\r\n    var _init;\r\n    (_init = init) != null ? _init : init = {};\r\n    init.headers = new Headers(init.headers || {});\r\n    let isApi = url.startsWith(getApiUrl()); // Is API request\r\n    if (isApi) {\r\n      if (ew.API_JWT_TOKEN) init.headers.set(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n    } else if (!init.method || sameText(init.method, \"GET\")) {\r\n      // GET\r\n      url = setSearchParams(url, init.body);\r\n      delete init.body;\r\n    } else {\r\n      // POST\r\n      if (ew.TOKEN_NAME && ew.ANTIFORGERY_TOKEN) {\r\n        if (init.body instanceof FormData) {\r\n          init.body.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n          init.body.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n        } else {\r\n          init.body = mergeSearchParams(init.body, {\r\n            [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n            [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN\r\n          }); // Add token name and antiforgery token // PHP\r\n        }\r\n      }\r\n    }\r\n    let args = {\r\n      url,\r\n      init\r\n    };\r\n    $document$1.trigger(\"fetch\", [args]);\r\n    return fetch(args.url, args.init);\r\n  }\r\n\r\n  // Ajax send\r\n  $document$1.on(\"ajaxSend\", function (event, jqxhr, settings) {\r\n    let url = settings.url,\r\n      isApi = url.startsWith(getApiUrl()),\r\n      // Is API request\r\n      allowed = isApi || url.startsWith(ew.PATH_BASE) || url.startsWith(currentPage());\r\n    if (!allowed && url.match(/^http/i)) {\r\n      let objUrl = new URL(url);\r\n      allowed = objUrl.hostname == currentUrl.hostname; // Same host name\r\n    }\r\n    if (allowed) {\r\n      if (isApi) {\r\n        if (ew.API_JWT_TOKEN) jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN); // Note: settings.headers won't work\r\n      } else if (sameText(settings.type, \"POST\")) {\r\n        // POST\r\n        if (ew.TOKEN_NAME && ew.ANTIFORGERY_TOKEN) {\r\n          if (settings.data instanceof FormData) {\r\n            settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n            settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n          } else {\r\n            let params = mergeSearchParams(new URLSearchParams(settings.data), {\r\n              [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n              [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN\r\n            }); // Add token name and antiforgery token // PHP\r\n            settings.data = params.toString();\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  // Ajax start\r\n  $document$1.on(\"ajaxStart\", function () {\r\n    $document$1.data(\"_ajax\", true);\r\n    $$1(\"form.ew-form\").addClass(\"ew-wait\").each(function () {\r\n      let frm = forms.get(this.id);\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) frm.disableForm();\r\n      }\r\n    });\r\n  });\r\n\r\n  // Ajax stop/error\r\n  $document$1.on(\"ajaxStop ajaxError\", function () {\r\n    $$1(\"form.ew-form.ew-wait\").removeClass(\"ew-wait\").each(function () {\r\n      let frm = forms.get(this.id);\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) frm.enableForm();\r\n      }\r\n    });\r\n    $document$1.data(\"_ajax\", false);\r\n  });\r\n\r\n  // Execute JavaScript in HTML loaded by Ajax\r\n  function executeScript(html, id, modal) {\r\n    let pattern = modal ? /<(head)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig : /<(head|template)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig,\r\n      // If modal, scripts in template tags not executed by browser, execute manually\r\n      matches = html.replaceAll(pattern, \"\").matchAll(/<script[^>]*>[\\s\\S]*?<\\/script\\s*>/ig); // Do not execute scripts in template tags, use non-greedy [\\s\\S]*?\r\n    Array.from(document.createRange().createContextualFragment(Array.from(matches).map(m => m[0]).filter(s => !s.includes(\"$rowindex$\")).join(\"\")).querySelectorAll(\"script:not([type]), script[type='text/javascript']\")).sort((s1, s2) => s2.classList.contains(\"ew-apply-template\") ? 1 : s1.classList.contains(\"ew-apply-template\") ? -1 : 0) // Execute custom template first\r\n    .forEach((s, i) => addScript(s, \"scr_\" + id + \"_\" + i, s.nonce));\r\n  }\r\n\r\n  // Strip JavaScript in HTML loaded by Ajax\r\n  function stripScript(html) {\r\n    let matches = html.replaceAll(/<(head|template)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig, \"\").matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig); // Do not strip scripts in template tags, use non-greedy [\\s\\S]*?\r\n    return Array.from(matches).filter(m => document.createRange().createContextualFragment(m[0]).querySelector(\"script:not([type]), script[type='text/javascript']\")).reduce((html, m) => html.replace(m[0], \"\"), html);\r\n  }\r\n\r\n  // Add SCRIPT tag\r\n  function addScript(source, id, nonce) {\r\n    let scr = document.createElement(\"SCRIPT\");\r\n    if ($$1.isString(source)) scr.text = source;else if (source instanceof HTMLScriptElement) scr.text = source.text;\r\n    if (id) scr.id = id;\r\n    if (nonce) scr.nonce = nonce;\r\n    return document.body.appendChild(scr); // Do not use jQuery so it can be removed\r\n  }\r\n\r\n  // Remove JavaScript added by Ajax\r\n  function removeScript(id) {\r\n    if (id) $$1(\"script[id^='scr_\" + id + \"_']\").remove();\r\n  }\r\n\r\n  /**\r\n   * Clean HTML loaded by Ajax for modal dialog\r\n   *\r\n   * @param {string} html - HTML string\r\n   * @param {bool} keepScripts - Keep script tags or not\r\n   * @returns HTML string\r\n   */\r\n  function getContent(html, keepScripts) {\r\n    var _m$;\r\n    html = html.trim().replace(/<head>[\\s\\S]*<\\/head>/, \"\");\r\n    let body = keepScripts ? html : stripScript(html),\r\n      m = body.match(/<body[\\s\\S]*>[\\s\\S]*<\\/body>/i);\r\n    body = (_m$ = m == null ? void 0 : m[0]) != null ? _m$ : body;\r\n    let $content = $$1(body).find(\"section.content\");\r\n    return $content[0] ? $content.html() : body;\r\n  }\r\n\r\n  // Get all options of Selection list or Radio/Checkbox list as array\r\n  function getOptions(obj) {\r\n    return obj != null && obj.options ? Array.prototype.map.call(obj.options, opt => [opt.value, opt.text]) : [];\r\n  }\r\n\r\n  /**\r\n   * Show dialog for enabling two factor authentication\r\n   */\r\n  function enable2FA(authType) {\r\n    document.body.style.cursor = \"wait\";\r\n    if (sameText(authType, \"google\")) {\r\n      // Show QR Code and Verify\r\n      let url = getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SHOW, ew.CURRENT_USER_IDENTIFIER, authType]);\r\n      $$1.get(url, result => {\r\n        var _result$error4;\r\n        if (result != null && result.url) {\r\n          _prompt({\r\n            imageUrl: result.url,\r\n            html: ew.language.phrase(\"Scan2FAQrCode\"),\r\n            input: \"text\",\r\n            confirmButtonText: ew.language.phrase(\"Verify\"),\r\n            showLoaderOnConfirm: true,\r\n            allowEscapeKey: false,\r\n            allowOutsideClick: () => !Swal.isLoading(),\r\n            willOpen: () => {\r\n              Swal.showLoading(Swal.getConfirmButton());\r\n              Swal.disableInput();\r\n              Swal.getImage().onload = () => {\r\n                Swal.enableInput();\r\n                Swal.hideLoading();\r\n                Swal.getInput().focus();\r\n              };\r\n            },\r\n            preConfirm: value => {\r\n              return $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_VERIFY, ew.CURRENT_USER_IDENTIFIER, authType, value])).then(result => {\r\n                if ((result == null ? void 0 : result.success) !== true) throw new Error(ew.language.phrase(\"2FAVerificationFailed\"));\r\n                return result;\r\n              }).catch(error => Swal.showValidationMessage(error));\r\n            }\r\n          }, result => {\r\n            var _result$error3;\r\n            if (result != null && (_result$error3 = result.error) != null && _result$error3.description) {\r\n              showToast(result.error.description);\r\n            } else if (result != null && result.success) {\r\n              if ($$1.isObject(result.config)) {\r\n                // Update 2fa templates\r\n                ew.vars.twofa = result.config;\r\n                for (let name of [\"config2fa\", \"select2fa\", \"verify2fa\"]) ew.refreshTemplate(name, result.config);\r\n              }\r\n            }\r\n          }).catch(err => showToast(err == null ? void 0 : err.message));\r\n        } else if (result != null && (_result$error4 = result.error) != null && _result$error4.description) {\r\n          _alert(result.error.description);\r\n        }\r\n      }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n    } else {\r\n      // Send OTP and Verify\r\n      let url = getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SHOW, ew.CURRENT_USER_IDENTIFIER, authType]),\r\n        html = sameText(authType, \"email\") ? ew.language.phrase(\"EnterOTPEmailAddress\") : ew.language.phrase(\"EnterOTPPhoneNumber\");\r\n      $$1.get(url, result => {\r\n        var _result$error7;\r\n        if (result.success) {\r\n          _prompt({\r\n            html: html,\r\n            input: \"text\",\r\n            inputValue: result.account,\r\n            confirmButtonText: ew.language.phrase(\"SendOtp\"),\r\n            showLoaderOnConfirm: true,\r\n            allowEscapeKey: false,\r\n            allowOutsideClick: () => !Swal.isLoading(),\r\n            preConfirm: value => {\r\n              return $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP, ew.CURRENT_USER_IDENTIFIER, authType, value])).then(result => {\r\n                if ((result == null ? void 0 : result.success) !== true) throw new Error(sprintf(ew.language.phrase(\"SendOtpFailed\"), getError(result)));\r\n                return result;\r\n              }).catch(error => Swal.showValidationMessage(error));\r\n            }\r\n          }, result => {\r\n            var _result$error5;\r\n            if (result != null && (_result$error5 = result.error) != null && _result$error5.description) {\r\n              showToast(result.error.description);\r\n            } else if (result != null && result.success) {\r\n              // Verify OTP\r\n              _prompt({\r\n                html: ew.language.phrase(\"EnterSecurityCode\"),\r\n                input: \"text\",\r\n                confirmButtonText: ew.language.phrase(\"Verify\"),\r\n                showLoaderOnConfirm: true,\r\n                allowEscapeKey: false,\r\n                allowOutsideClick: () => !Swal.isLoading(),\r\n                preConfirm: value => {\r\n                  return $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_VERIFY, ew.CURRENT_USER_IDENTIFIER, authType, value])).then(result => {\r\n                    if ((result == null ? void 0 : result.success) !== true) throw new Error(ew.language.phrase(\"2FAVerificationFailed\"));\r\n                    return result;\r\n                  }).catch(error => Swal.showValidationMessage(error));\r\n                }\r\n              }, result => {\r\n                var _result$error6;\r\n                if (result != null && (_result$error6 = result.error) != null && _result$error6.description) {\r\n                  showToast(result.error.description);\r\n                } else if (result != null && result.success) {\r\n                  if ($$1.isObject(result.config)) {\r\n                    // Update 2fa templates\r\n                    ew.vars.twofa = result.config;\r\n                    for (let name of [\"config2fa\", \"select2fa\", \"verify2fa\"]) ew.refreshTemplate(name, result.config);\r\n                  }\r\n                }\r\n              }).catch(err => showToast(err == null ? void 0 : err.message));\r\n            }\r\n          }).catch(err => showToast(err == null ? void 0 : err.message));\r\n        } else if (result != null && (_result$error7 = result.error) != null && _result$error7.description) {\r\n          _alert(result.error.description);\r\n        }\r\n      }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Disable a two factor authentication type\r\n   */\r\n  function disable2FA(authType) {\r\n    _prompt({\r\n      html: sprintf(ew.language.phrase(\"2FARemoveConfirm\"), ew.language.phrase(\"2FAType\" + authType)),\r\n      preConfirm: value => {\r\n        if (value) return $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_RESET, ew.CURRENT_USER_IDENTIFIER, authType])).then(result => {\r\n          var _result$error8;\r\n          if (result != null && (_result$error8 = result.error) != null && _result$error8.description) {\r\n            showToast(result.error.description);\r\n          } else if (result != null && result.success) {\r\n            if ($$1.isObject(result.config)) {\r\n              // Update 2fa templates\r\n              ew.vars.twofa = result.config;\r\n              for (let name of [\"config2fa\", \"select2fa\", \"verify2fa\"]) ew.refreshTemplate(name, result.config);\r\n            }\r\n          } else if ((result == null ? void 0 : result.success) !== true) {\r\n            showToast(sprintf(ew.language.phrase(\"2FARemoveFailed\"), ew.language.phrase(\"2FAType\" + authType)));\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown));\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Opt for two factor authentication\r\n   */\r\n  function opt2FA(el) {\r\n    return $$1.get(getApiUrl([ew.API_2FA_ACTION, el.checked ? ew.API_2FA_ENABLE : ew.API_2FA_DISABLE, ew.CURRENT_USER_IDENTIFIER])).then(result => {\r\n      var _result$error9;\r\n      if (result != null && (_result$error9 = result.error) != null && _result$error9.description) {\r\n        showToast(result.error.description);\r\n        el.indeterminate = true;\r\n      } else if (result != null && result.success && result.enabled) {\r\n        showToast(ew.language.phrase(\"2FAEnabled\"), \"success\");\r\n      } else if (result != null && result.success && result.disabled) {\r\n        showToast(ew.language.phrase(\"2FADisabled\"), \"success\");\r\n      } else if ((result == null ? void 0 : result.success) !== true) {\r\n        showToast(ew.language.phrase(\"2FAOptFailed\"));\r\n        el.indeterminate = true;\r\n      }\r\n    }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown));\r\n  }\r\n\r\n  /**\r\n   * Reset two factor authentication\r\n   */\r\n  function reset2FA() {\r\n    _prompt({\r\n      html: ew.language.phrase(\"2FAResetConfirm\"),\r\n      preConfirm: value => {\r\n        if (value) return $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_RESET, ew.CURRENT_USER_IDENTIFIER])).then(result => {\r\n          var _result$error10;\r\n          if (result != null && (_result$error10 = result.error) != null && _result$error10.description) {\r\n            showToast(result.error.description);\r\n          } else if (result != null && result.success) {\r\n            if ($$1.isObject(result.config)) {\r\n              // Update 2fa templates\r\n              ew.vars.twofa = result.config;\r\n              for (let name of [\"config2fa\", \"select2fa\", \"verify2fa\"]) ew.refreshTemplate(name, result.config);\r\n            }\r\n          } else if ((result == null ? void 0 : result.success) !== true) {\r\n            showToast(ew.language.phrase(\"2FAResetFailed\"));\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown));\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Toggle chat\r\n   */\r\n  function toggleChat(value) {\r\n    document.body.style.cursor = \"wait\";\r\n    $$1.get(getApiUrl([ew.API_CHAT_ACTION, value]), result => {\r\n      var _result$error11;\r\n      // value should be 1 or 0\r\n      if (result != null && (_result$error11 = result.error) != null && _result$error11.description) {\r\n        _alert(result.error.description);\r\n      } else if (result != null && result.success) {\r\n        $$1(\"#disable-chat\").toggleClass(\"d-none\", !value);\r\n        $$1(\"#enable-chat\").toggleClass(\"d-none\", !!value);\r\n        $$1(\".chat-wrapper\")[value ? \"fadeIn\" : \"fadeOut\"]();\r\n      }\r\n    }).fail((jqXHR, textStatus, errorThrown) => _alert(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n  }\r\n\r\n  /**\r\n   * Send one time password\r\n   */\r\n  function sendOtp(data) {\r\n    const {\r\n      authType,\r\n      user,\r\n      account\r\n    } = data;\r\n    if (![\"google\", \"email\", \"sms\"].includes(authType)) return _alert(\"Invalid authentication type\");else if (!user) return _alert(\"Missing user identifier\");else if (!account) return _alert(\"Missing verified account\");\r\n    document.body.style.cursor = \"wait\";\r\n    return _fetch(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP, user, authType, account])).then(async response => {\r\n      var _result$error12;\r\n      document.body.style.cursor = \"default\";\r\n      let result = await response.json();\r\n      if (result != null && (_result$error12 = result.error) != null && _result$error12.description) showToast(result.error.description);else if (!(result != null && result.success)) showToast(ew.language.phrase(\"SendOtpFailed\"));else if (result != null && result.success) showToast(ew.language.phrase(\"SendOtpSuccess\"), \"success\");\r\n      return result;\r\n    }).catch(error => {\r\n      document.body.style.cursor = \"default\";\r\n      showToast(error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Re-send one time password\r\n   */\r\n  function resendOtp(el) {\r\n    let data = el.dataset,\r\n      name = \"timer.\" + data.authType,\r\n      container = el.closest(\"#verify2fa\"),\r\n      $container = $$1(container);\r\n    if (!$container.data(name)) {\r\n      // No timer running\r\n      el.classList.add(\"disabled\");\r\n      return ew.sendOtp(data).finally(() => {\r\n        var _$container$data;\r\n        container.querySelector(\"#securitycode\").focus();\r\n        let elapsed = 0;\r\n        (_$container$data = $container.data(name)) == null || _$container$data.cancel();\r\n        $container.removeData(name).data(name, $$1.later(1000, null, () => {\r\n          elapsed++;\r\n          let remaining = ew.resendOtpInterval - elapsed,\r\n            btn = container.querySelector(\"#btn-send-otp[data-auth-type=\" + data.authType + \"]\");\r\n          if (remaining > 0) {\r\n            btn.innerHTML = ew.language.phrase(\"SendOtpAgain\") + (\" (\" + remaining + \"s)\");\r\n            btn.classList.add(\"disabled\");\r\n          } else {\r\n            var _$container$data2;\r\n            (_$container$data2 = $container.data(name)) == null || _$container$data2.cancel();\r\n            $container.removeData(name);\r\n            btn.innerHTML = ew.language.phrase(\"SendOtpAgain\");\r\n            btn.classList.remove(\"disabled\");\r\n          }\r\n        }, null, true));\r\n      });\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Show backup codes for two factor authentication\r\n   */\r\n  function showBackupCodes() {\r\n    let html = \"<p>\" + ew.language.phrase(\"BackupCodesMsg\") + \"</p>\";\r\n    return _alert({\r\n      title: ew.language.phrase(\"BackupCodes\"),\r\n      html: html,\r\n      showDenyButton: true,\r\n      showLoaderOnDeny: true,\r\n      showCancelButton: true,\r\n      confirmButtonText: ew.language.phrase(\"CopyToClipboard\"),\r\n      denyButtonText: ew.language.phrase(\"GetNewCodes\"),\r\n      customClass: {\r\n        denyButton: \"btn btn-primary ew-swal2-deny-button\"\r\n      },\r\n      willOpen: () => {\r\n        Swal.showLoading();\r\n        Swal.disableButtons();\r\n        $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_BACKUP_CODES, ew.CURRENT_USER_IDENTIFIER])).then(result => {\r\n          if (result.success && Array.isArray(result.codes)) {\r\n            Swal.update({\r\n              html: html + \"<textarea class=\\\"form-control ew-backup-codes\\\" readonly>\" + result.codes.join(\"\\n\") + \"</textarea>\"\r\n            });\r\n            Swal.enableButtons();\r\n            Swal.getConfirmButton().focus();\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => Swal.hideLoading());\r\n      },\r\n      preConfirm: () => {\r\n        // Confirm button => Copy to clipboard\r\n        let codes = copyToClipboard(Swal.getHtmlContainer().querySelector(\"textarea\"));\r\n        if (codes) showToast(ew.language.phrase(\"CopiedToClipboard\"), \"success\");\r\n        return false; // Keep the alert open\r\n      },\r\n      preDeny: async () => {\r\n        // Deny button => Get new codes\r\n        Swal.showLoading(Swal.getDenyButton());\r\n        await $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_NEW_BACKUP_CODES, ew.CURRENT_USER_IDENTIFIER])).then(result => {\r\n          if (result.success && Array.isArray(result.codes)) {\r\n            Swal.update({\r\n              html: html + \"<textarea class=\\\"form-control ew-backup-codes\\\" readonly>\" + result.codes.join(\"\\n\") + \"</textarea>\"\r\n            });\r\n            Swal.getConfirmButton().focus();\r\n            if ($$1.isObject(result.config))\r\n              // Update template\r\n              ew.renderJsTemplates({\r\n                target: $$1(\".ew-2fa-form\")[0]\r\n              });\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => Swal.hideLoading());\r\n        return false; // Keep the alert open\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Show Add Option dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLElement} args.lnk - Add option anchor element\r\n   * @param {string} args.el - Form element name\r\n   * @param {string} args.url - URL of the Add form\r\n   * @returns\r\n   */\r\n  function addOptionDialogShow(args) {\r\n    var _args$evt2;\r\n    args.lnk = args.lnk || ((_args$evt2 = args.evt) == null ? void 0 : _args$evt2.currentTarget);\r\n\r\n    // Hide dialog\r\n    var _hide = function () {\r\n      removeScript($dlg.data(\"args\").el);\r\n      var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n      if (frm) frm.destroyEditor();\r\n      $dlg.find(\".modal-body\").html(\"\");\r\n      $dlg.find(\".modal-footer .btn-primary\").off();\r\n      $dlg.data(\"showing\", false);\r\n    };\r\n    var $dlg = ew.addOptionDialog || $$1(\"#ew-add-opt-dialog\").on(\"hidden.bs.modal\", _hide);\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-add-opt-dialog not found.\");\r\n      return;\r\n    }\r\n    if ($dlg.data(\"showing\")) return;\r\n    $dlg.data(\"showing\", true);\r\n\r\n    // Submission success\r\n    var _submitSuccess = function (data) {\r\n      var _results;\r\n      var results = data,\r\n        args = $dlg.data(\"args\"),\r\n        frm = forms.get(args.lnk),\r\n        // form object\r\n        objName = $dlg.find(\".modal-body form input[name='\" + ew.API_OBJECT_NAME + \"']\").val(),\r\n        // Get object name from form\r\n        el = args.el,\r\n        // HTML element name\r\n        re = /^x(\\d+)_/,\r\n        m = el.match(re),\r\n        // Check row index\r\n        prefix = m ? m[0] : \"x_\",\r\n        index = m ? m[1] : -1,\r\n        name = el.replace(re, \"x_\"),\r\n        list = frm.getList(el);\r\n      if ($$1.isString(data)) results = parseJson(data);\r\n      if ((_results = results) != null && _results.success && results[objName]) {\r\n        // Success\r\n        $dlg.modal(\"hide\");\r\n        var result = results[objName],\r\n          form = frm.$element[0],\r\n          // HTML form or DIV\r\n          obj = getElements(el, form);\r\n        if (obj) {\r\n          var lf = list.linkField,\r\n            dfs = list.displayFields.slice(),\r\n            // Clone\r\n            ffs = list.filterFields.slice(),\r\n            // Clone\r\n            pfs = list.parentFields.slice(); // Clone\r\n          pfs.forEach((pf, i) => {\r\n            if (pf.split(\" \").length == 1)\r\n              // Parent field in the same table, add row index\r\n              pfs[i] = pfs[i].replace(/^x_/, prefix);\r\n          });\r\n          var lfv = lf != \"\" ? result[lf] : \"\",\r\n            row = {\r\n              lf: lfv\r\n            };\r\n          dfs.forEach((df, i) => {\r\n            if (df in result) row[\"df\" + (i > 0 ? i + 1 : \"\")] = result[df];\r\n          });\r\n          ffs.forEach((ff, i) => {\r\n            if (ff in result) row[\"ff\" + (i > 0 ? i + 1 : \"\")] = result[ff];\r\n          });\r\n          if (lfv && dfs.length > 0 && row[\"df\"]) {\r\n            if (list.ajax === null)\r\n              // Non-Ajax\r\n              list.lookupOptions.push(row);\r\n            var arp = pfs.map(pf => getOptionValues(pf, form)),\r\n              // Get the parent field values\r\n              args = {\r\n                \"data\": row,\r\n                \"parents\": arp,\r\n                \"valid\": true,\r\n                \"name\": getId(obj),\r\n                \"form\": form\r\n              };\r\n            $document$1.trigger(\"addoption\", [args]);\r\n            if (args.valid) {\r\n              // Add the new option\r\n              var ar = getOptions(obj),\r\n                txt = newOption(obj, row, form);\r\n              if (obj.options) {\r\n                obj.options[obj.options.length - 1].selected = true;\r\n                if (obj.list) {\r\n                  // Radio/Checkbox list\r\n                  $$1(obj.target).find(\"input\").last().trigger(\"focus\");\r\n                }\r\n                if (isAutoSuggest(obj)) {\r\n                  $$1(obj).val(lfv).trigger(\"change\");\r\n                  $$1(obj.input).val(txt).trigger(\"focus\");\r\n                } else {\r\n                  $$1(obj).trigger(\"change\").trigger(\"focus\");\r\n                }\r\n              }\r\n              var $form = $$1(form),\r\n                suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n                cnt = $form.find(\"#\" + ew.FORM_KEY_COUNT_NAME + suffix).val();\r\n              if (cnt > 0) {\r\n                // Grid-Add/Edit, update other rows\r\n                for (var i = 1; i <= cnt; i++) {\r\n                  if (i == index) continue;\r\n                  var obj2 = getElements(name.replace(/^x/, \"x\" + i), form),\r\n                    ar2 = getOptions(obj2);\r\n                  if (JSON.stringify(ar) != JSON.stringify(ar2))\r\n                    // Not same options\r\n                    continue;\r\n                  newOption(obj2, row, form);\r\n                  obj2.render == null || obj2.render(); // Selection list\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        var _results2;\r\n        // Failure\r\n        if ((_results2 = results) != null && _results2.error) {\r\n          let error = getError(results);\r\n          if (error) _alert(error);\r\n        } else {\r\n          var msg,\r\n            $div = $$1(\"<div></div>\").html(data).find(\"div.ew-message-dialog\");\r\n          if ($div[0]) {\r\n            msg = $div.html();\r\n          } else {\r\n            var _results3;\r\n            msg = ((_results3 = results) == null ? void 0 : _results3.failureMessage) || data;\r\n            if (!msg || String(msg).trim() == \"\") msg = ew.language.phrase(\"InsertFailed\");\r\n          }\r\n          _alert(msg);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Fail\r\n    var _fail = function (o) {\r\n      $dlg.modal(\"hide\");\r\n      _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    };\r\n\r\n    // Submit\r\n    var _submit = async function (e) {\r\n      let $dlg = ew.addOptionDialog,\r\n        form = $dlg.find(\".modal-body form\")[0],\r\n        frm = forms.get(form.id),\r\n        btn = e == null ? void 0 : e.target,\r\n        $btn = $$1(btn);\r\n      if (await frm.canSubmit(e)) {\r\n        $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n        document.body.style.cursor = \"wait\";\r\n        $$1.post(getApiUrl([ew.API_ADD_ACTION, form.elements[ew.API_OBJECT_NAME].value]), $$1(form).serialize(), _submitSuccess).fail(_fail).always(function () {\r\n          frm.enableForm();\r\n          $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n          document.body.style.cursor = \"default\";\r\n        });\r\n      }\r\n      return false;\r\n    };\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n\r\n    // Get form HTML\r\n    var success = function (data) {\r\n      var frm = forms.get(args.lnk),\r\n        prefix = \"x_\",\r\n        m = args.el.match(/^(x\\d+_)/);\r\n      if (m)\r\n        // Contains row index\r\n        prefix = m[1];\r\n      var list = frm.getList(args.el),\r\n        pfs = list.parentFields.slice() // Clone\r\n        .map(pf => pf.split(\" \").length == 1 ? pf.replace(/^x_/, prefix) : pf),\r\n        // Parent field in the same table, add row index\r\n        form = frm.htmlForm,\r\n        ar = pfs.map(pf => getOptionValues(pf, form)),\r\n        ar2 = pfs.map(pf => getOptionTexts(pf, form)),\r\n        ffs = list.filterFieldVars.slice(); // Clone\r\n      $dlg.find(\".modal-title\").html($$1(args.lnk).closest(\".ew-add-opt-btn\").data(\"title\"));\r\n      $dlg.find(\".modal-body\").html(stripScript(data));\r\n      var form = $dlg.find(\".modal-body form\")[0];\r\n      if (form) {\r\n        // Set the filter field value\r\n        $$1(form).on(\"keydown\", function (e) {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") return _submit();\r\n        });\r\n        // $document.one(\"updatedone\", () => {\r\n        //     ar.forEach((v, i) => {\r\n        //         let obj = getElements(ffs[i], form);\r\n        //         if (obj) {\r\n        //             if (obj.options || obj.length) { // Selection list\r\n        //                 $(obj).first().one(\"updated\", () => selectOption(obj, v));\r\n        //             } else {\r\n        //                 selectOption(obj, v);\r\n        //             }\r\n        //         }\r\n        //     });\r\n        // });\r\n      }\r\n      ew.addOptionDialog = $dlg.modal(\"show\");\r\n      $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\r\n      if (form) {\r\n        // Set the filter field value\r\n        ar.forEach((v, i) => {\r\n          var obj = getElements(ffs[i], form);\r\n          if (obj && v[0]) {\r\n            if (isAutoSuggest(obj)) {\r\n              // AutoSuggest\r\n              obj.value = v[0];\r\n              obj.input.value = ar2[i][0];\r\n              obj.add(v[0], ar2[i][0], true);\r\n            } else if (obj.options || obj.length) {\r\n              // Selection list\r\n              newOption(obj, {\r\n                lf: v[0]\r\n              }, frm, true);\r\n              // $(obj).first().one(\"updated\", () => selectOption(obj, v));\r\n            } else {\r\n              // Text\r\n              obj.value = v[0];\r\n            }\r\n          }\r\n        });\r\n      }\r\n      executeScript(data, args.el, true);\r\n      $dlg.trigger(\"load.ew\"); // Trigger load event\r\n    };\r\n    $$1.get(args.url, success).fail(_fail);\r\n    return false;\r\n  }\r\n\r\n  // Hide Modal dialog\r\n  function modalDialogHide() {\r\n    let $dlg = $$1(this),\r\n      args = $dlg.data(\"args\"),\r\n      frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n    removeScript(\"modal_dialog\");\r\n    frm == null || frm.destroyEditor();\r\n    $dlg.find(\".modal-footer .btn-primary\").off();\r\n    $dlg.find(\".modal-dialog\").removeClass((i, className) => {\r\n      let m = className.match(/table\\-\\w+/);\r\n      return m ? m[0] : \"\";\r\n    });\r\n    $dlg.data({\r\n      showing: false,\r\n      url: null\r\n    });\r\n    if (args != null && args.reload) window.location.reload();\r\n  }\r\n\r\n  /**\r\n   * Show modal dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @param {string} args.url - URL of content\r\n   * @param {string} args.html - HTML content\r\n   * @param {string|null} args.btn - Button phrase ID\r\n   * @param {boolean} args.footer - Show footer (default true)\r\n   * @param {string} args.caption - Caption in dialog header\r\n   * @param {boolean} args.reload - Reload page after hiding dialog or not\r\n   * @param {string} args.size - Class name of modal dialog 'modal-sm'|'modal-md'|modal-lg'|'modal-xl' (default)\r\n   * @param {Function} args.callback - Callback function (success function after submitting the form)\r\n   * @returns false\r\n   */\r\n  function modalDialogShow(args) {\r\n    var _args$evt3, _bootstrap$Tooltip$ge4, _args$evt4, _args$evt5, _$dlg$data, _$dlg$data2;\r\n    args.lnk || (args.lnk = (_args$evt3 = args.evt) == null ? void 0 : _args$evt3.currentTarget);\r\n    (_bootstrap$Tooltip$ge4 = bootstrap.Tooltip.getInstance(args.lnk)) == null || _bootstrap$Tooltip$ge4.hide();\r\n    let {\r\n        ewAction,\r\n        action\r\n      } = args,\r\n      f = args.f || ((_args$evt4 = args.evt) == null || (_args$evt4 = _args$evt4.currentTarget) == null ? void 0 : _args$evt4.form);\r\n    if ((ewAction == \"grid\" && action == \"edit\" || ewAction == \"modal\" && [\"multiedit\", \"update\"].includes(action)) && !keySelected(f)) {\r\n      // Grid-Edit and Multi-Edit/Update\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let url = args.url || ((_args$evt5 = args.evt) == null || (_args$evt5 = _args$evt5.currentTarget) == null ? void 0 : _args$evt5.dataset.url),\r\n      $dlg = ew.modalDialog || $$1(\"#ew-modal-dialog\").on(\"hidden.bs.modal\", modalDialogHide); // div#ew-modal-dialog always exists\r\n\r\n    $dlg.on(\"hidden.bs.modal\", () => $dlg.data(\"showing\", false));\r\n    if ($dlg.data(\"showing\") && url && $dlg.data(\"url\") == url) return false;\r\n    $dlg.data({\r\n      showing: true,\r\n      url: url\r\n    });\r\n    args.reload = false;\r\n\r\n    // Size\r\n    $dlg.find(\".modal-dialog\").removeClass(\"modal-sm modal-md modal-lg modal-xl\").addClass(args.size || \"modal-xl\");\r\n\r\n    // Caption\r\n    let _caption = function () {\r\n      let args = $dlg.data(\"args\"),\r\n        $lnk = $$1(args.lnk);\r\n      return args.caption || $lnk.data(\"caption\") || $lnk.data(\"original-title\") || \"\";\r\n    };\r\n\r\n    // Button text\r\n    let _button = function () {\r\n      let args = $dlg.data(\"args\");\r\n      if (args.btn === null) return \"\";else if (args.btn && args.btn != \"\") return ew.language.phrase(args.btn);\r\n      return _caption();\r\n    };\r\n\r\n    // Fail\r\n    let _fail = function (o) {\r\n      $dlg.modal(\"hide\");\r\n      if (o.status) _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    };\r\n\r\n    // Always\r\n    let _always = function () {\r\n      document.body.style.cursor = \"default\";\r\n    };\r\n\r\n    // Check if current page\r\n    let _current = function (url) {\r\n      let a = document.createElement(\"a\");\r\n      a.href = url;\r\n      return window.location.pathname.endsWith(a.pathname);\r\n    };\r\n\r\n    // Close hidden dialog\r\n    let _hide = function () {\r\n      if ($dlg.data(\"showing\") && !$dlg.hasClass(\"show\")) $dlg.data(\"showing\", false).trigger(\"hidden.bs.modal\"); // Call modalDialogHide()\r\n    };\r\n\r\n    /**\r\n     * Handle result\r\n     *\r\n     * @param {Object} result - Result object\r\n     * @param {string|Object} result.error - Error message or object\r\n     * @param {string} result.error.message - Error message\r\n     * @param {string} result.error.description - Error message\r\n     * @param {string} result.failureMessage - Failure message\r\n     * @param {string} result.successMessage - Success message\r\n     * @param {string} result.warningMessage - Warning message\r\n     * @param {string} result.message - Message\r\n     * @param {string} result.url - Redirection URL\r\n     * @param {string} result.modal - Redirect to result.url in current modal dialog\r\n     * @param {boolean} result.view - result.url is View page => No primary button\r\n     * @param {string} result.caption - Caption of modal dialog for result.url\r\n     * @param {boolean} result.reload - Reload current page\r\n     * @param {boolean} result.success - Result => Call callback if function\r\n     */\r\n    let handleResult = function (result) {\r\n      let error = getError(result);\r\n      if (error) {\r\n        _alert(error);\r\n        _hide();\r\n      } else if ($$1.isString(result.warningMessage)) {\r\n        _alert(result.warningMessage, \"warning\");\r\n        _hide();\r\n      } else if ($$1.isString(result.message)) {\r\n        _alert(result.message, \"body\");\r\n        _hide();\r\n      } else if (result.success && !isFunction$2(args == null ? void 0 : args.callback) || $$1.isString(result.successMessage)) {\r\n        var _lnk$closest, _lnk$closest2, _tabPane$parentNode;\r\n        let args = $dlg.data(\"args\"); // Get data before hiding\r\n        $dlg.modal(\"hide\");\r\n        if (result.successMessage) showToast(result.successMessage, \"success\");\r\n        let lnk = args == null ? void 0 : args.lnk,\r\n          btnId = lnk == null || (_lnk$closest = lnk.closest(\".dropdown-menu[aria-labelledby]\")) == null ? void 0 : _lnk$closest.getAttribute(\"aria-labelledby\"),\r\n          btn = btnId ? document.getElementById(btnId) : null,\r\n          tabPane = (_lnk$closest2 = lnk == null ? void 0 : lnk.closest(\".tab-pane\")) != null ? _lnk$closest2 : btn == null ? void 0 : btn.closest(\".tab-pane\"),\r\n          navItem = tabPane == null || (_tabPane$parentNode = tabPane.parentNode) == null || (_tabPane$parentNode = _tabPane$parentNode.parentNode) == null ? void 0 : _tabPane$parentNode.querySelector(\"[data-bs-toggle='tab'][data-bs-target='#\" + tabPane.id + \"']:not([tabindex])\"); // The active button does not have tabindex=\"-1\r\n        $dlg.trigger(\"success.ew.modal\", [{\r\n          result,\r\n          tabPane,\r\n          navItem\r\n        }]); // Reload tab content\r\n      } else if (result.reload) {\r\n        $dlg.modal(\"hide\");\r\n        window.location.reload();\r\n      } else if ($$1.isBoolean(result.success) && isFunction$2(args == null ? void 0 : args.callback)) {\r\n        // If success or failure and callback is function, call the callback\r\n        $dlg.modal(\"hide\");\r\n        args.callback(result);\r\n      } else if (result.url) {\r\n        let url = result.url;\r\n        if (result.modal) {\r\n          if (_current(url)) {\r\n            // Return to current page\r\n            if (!result.error) {\r\n              $dlg.modal(\"hide\");\r\n              refresh(fetch(url));\r\n            }\r\n          } else {\r\n            // Return to other page\r\n            args.reload = true;\r\n            args.url = url;\r\n            if (result.caption) args.caption = result.caption;\r\n            args.btn = result.view ? null : \"\";\r\n            $dlg.data({\r\n              args,\r\n              url\r\n            });\r\n            url = setSearchParams(url, {\r\n              modal: \"1\",\r\n              rnd: random()\r\n            });\r\n            document.body.style.cursor = \"wait\";\r\n            $$1.get(url).done(success).fail(_fail).always(_always);\r\n          }\r\n        } else {\r\n          $dlg.modal(\"hide\");\r\n          window.location = sanitizeUrl(url);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Create buttons\r\n    let _createButtons = function () {\r\n      let $footer = $dlg.find(\".modal-footer\").last().empty(),\r\n        // Empty the footer (Find the last footer in case users add their own in the dialog)\r\n        $btn = $dlg.find(\".card-body button[type=submit]\").first().addClass(\"ew-submit\").on(\"click\", _submit); // Find submit button found in card body\r\n      if (!$btn[0]) {\r\n        // No submit button found in card body\r\n        $dlg.find(\".modal-body .ew-modal-buttons\").contents().clone().find(\"button\").each(function () {\r\n          // Find buttons in <template>\r\n          if (this.type == \"submit\") {\r\n            this.type = \"button\"; // Convert to normal button\r\n            this.classList.add(\"ew-submit\");\r\n            if (this.id == \"btn-cancel\") this.classList.add(\"ew-cancel\"); // Cancel button with type=\"submit\"\r\n            let $this = $$1(this);\r\n            $this.on(\"click\", function (e) {\r\n              if (this.dataset.ewAction == \"set-action\")\r\n                // Set value first\r\n                this.form.elements[\"action\"].value = this.dataset.value;\r\n              $this.data(\"ajax\") === false ? $$1(this.form).trigger(\"submit\") : _submit(e);\r\n            });\r\n          } else if (this.id == \"btn-cancel\") {\r\n            if (this.dataset.href) {\r\n              $$1(this).on(\"click\", function (e) {\r\n                let form = $dlg.find(\".modal-body form\")[0],\r\n                  frm = forms.get(form.id);\r\n                frm == null || frm.updateTextArea();\r\n                if (frm != null && frm.modified && ew.hasFormData(this.form)) {\r\n                  ew.prompt(ew.language.phrase(\"ConfirmCancel\"), result => {\r\n                    if (result) {\r\n                      if (samePath(this.dataset.href, currentUrl.pathname)) $dlg.modal(\"hide\");else redirect(this.dataset.href);\r\n                    }\r\n                  });\r\n                } else {\r\n                  if (samePath(this.dataset.href, currentUrl.pathname)) $dlg.modal(\"hide\");else redirect(this.dataset.href);\r\n                }\r\n              });\r\n            } else {\r\n              $$1(this).on(\"click\", () => $dlg.modal(\"hide\"));\r\n            }\r\n          }\r\n          $footer[0].appendChild(this);\r\n        }); // Clone buttons and append to footer\r\n        if (!$dlg.find(\".card-body button[type=submit], .modal-footer .btn\")[0]) {\r\n          // No buttons found\r\n          let btn = _button();\r\n          if (btn) {\r\n            $$1('<button type=\"button\" class=\"btn btn-primary ew-btn\">' + btn + '</button>').on(\"click\", _submit).appendTo($footer);\r\n            $footer.append('<button type=\"button\" class=\"btn btn-default ew-btn\" data-bs-dismiss=\"modal\">' + ew.language.phrase(\"CancelBtn\") + '</button>');\r\n          } else {\r\n            $footer.append('<button type=\"button\" class=\"btn btn-default ew-btn\" data-bs-dismiss=\"modal\">' + ew.language.phrase(\"CloseBtn\") + '</button>');\r\n          }\r\n        }\r\n        $footer.find(\"button\").on(\"mousedown\", e => e.preventDefault()); // Do not focus button by mouse down\r\n        $footer.find(\".btn-primary\").focus();\r\n      }\r\n    };\r\n\r\n    // Check return URL\r\n    let _return = response => {\r\n      let returnUrl = response.headers.get(\"Return-Url\"); // Check if return URL exists\r\n      if (returnUrl && args.table && [\"inline\", \"modal\"].includes(args.ewAction) && !samePath(parseUrl(returnUrl).pathname, currentUrl.pathname)) $$1(\".ew-grid.\" + args.table).find(\"[data-ew-action=modal][data-url='\" + returnUrl + \"'], [data-ew-action=inline][data-url='\" + returnUrl + \"']\").trigger(\"click\");\r\n    };\r\n\r\n    // Submit success\r\n    let _submitSuccess = async function (response) {\r\n      let args = $dlg.data(\"args\"); // Get arguments first or it will be removed by modalDialogHide()\r\n      if (!(response instanceof Response)) return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json();\r\n        if (isFunction$2(args == null ? void 0 : args.callback)) {\r\n          // If callback is function, call the callback function then return\r\n          let error = getError(result);\r\n          if (error) showToast(error);else $dlg.modal(\"hide\");\r\n          args.callback(result);\r\n          return;\r\n        }\r\n        handleResult(result);\r\n      } else {\r\n        let data = await response.clone().text(),\r\n          body = getContent(data).trim(); // Make sure no leading/trailing space\r\n        if (body.startsWith(\"<\") && body.endsWith(\">\")) {\r\n          // HTML\r\n          if (args.ajax && args.action == \"add\" && document.querySelector(\"main.ew-no-record\") && $$1(body).find(\"main:not(.ew-no-record)\")[0]) {\r\n            // No existing record, new record added\r\n            $dlg.modal(\"hide\");\r\n            await refresh(Promise.resolve(response));\r\n            _return(response);\r\n            return;\r\n          }\r\n          $dlg.find(\".modal-body\").html(body);\r\n          $dlg.find(\".modal-body .ew-infinite-scroll-grid .ew-grid-middle-panel\").css(\"height\", \"auto\"); // Do not use infinite scrolling height for Grid-Add/Edit\r\n          // If callback is function and no modal buttons, call the callback function then return\r\n          if (!$dlg.find(\".modal-body .ew-modal-buttons\").length && isFunction$2(args == null ? void 0 : args.callback)) {\r\n            $dlg.modal(\"hide\");\r\n            args.callback(response);\r\n            return;\r\n          }\r\n          _createButtons();\r\n          executeScript(data, \"modal_dialog\", true);\r\n          $dlg.trigger(\"load.ew\"); // Trigger load event\r\n        } else if (data) {\r\n          $dlg.modal(\"hide\");\r\n          _alert(data);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Submit\r\n    let _submit = async function (e) {\r\n      let form = $dlg.find(\".modal-body form\")[0],\r\n        $form = $$1(form),\r\n        frm = forms.get(form.id),\r\n        btn = e == null ? void 0 : e.target;\r\n      if (btn.classList.contains(\"disabled\")) return false;\r\n      if (btn.classList.contains(\"ew-cancel\")) {\r\n        // Cancel button with type=\"submit\"\r\n        $$1.post($form.attr(\"action\"), $form.serialize(), success).fail(_fail).always(_always);\r\n      } else if (await frm.canSubmit(e)) {\r\n        document.body.style.cursor = \"wait\";\r\n        let p = _fetch($form.attr(\"action\"), {\r\n          method: \"POST\",\r\n          body: $form.serialize()\r\n        }).catch(_fail).finally(() => {\r\n          frm.enableForm();\r\n          _always();\r\n        });\r\n        if (frm.submitWithFetch) {\r\n          p.then(async response => {\r\n            var _resp$headers$get;\r\n            // Check error before refresh\r\n            let resp = response.clone(),\r\n              isJson = (_resp$headers$get = resp.headers.get(\"Content-Type\")) == null ? void 0 : _resp$headers$get.includes(\"json\"),\r\n              result = isJson ? await resp.json() : null,\r\n              hasErrors = (result == null ? void 0 : result.validation) || getError(result);\r\n            if (!isJson || !hasErrors)\r\n              // HTML or JSON without error => close dialog\r\n              $dlg.modal(\"hide\");\r\n            let args = {\r\n                form,\r\n                result: Promise.resolve(response),\r\n                context: hasErrors ? \"#ew-modal-dialog.show .modal-body\" : null\r\n              },\r\n              evt = $$1.Event(\"aftersubmit\", {\r\n                originalEvent: e\r\n              });\r\n            frm.trigger(evt, [args]);\r\n          });\r\n        } else {\r\n          p.then(_submitSuccess);\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    let success = function (data) {\r\n      let result = parseJson(data);\r\n      if ($$1.isObject(result)) {\r\n        handleResult(result);\r\n      } else {\r\n        let args = $dlg.data(\"args\"),\r\n          $lnk = $$1(args.lnk),\r\n          body = getContent(data);\r\n        $dlg.find(\".modal-title\").html(_caption());\r\n        $dlg.find(\".modal-body\").html(body);\r\n        $dlg.find(\".modal-body .ew-infinite-scroll-grid .ew-grid-middle-panel\").css(\"height\", \"auto\"); // Do not use infinite scrolling height for Grid-Add/Edit\r\n        _createButtons();\r\n        $dlg.find(\".modal-footer\").toggle(args.footer !== false);\r\n        let lnkData = $lnk.data() || {};\r\n        if (lnkData.table) $dlg.find(\".modal-dialog\").addClass(\"table-\" + lnkData.table);\r\n        $dlg.find(\".modal-body form\").on(\"keydown\", e => {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") {\r\n            $dlg.find(\".modal-footer .btn.btn-primary\").trigger(\"click\");\r\n            return false;\r\n          }\r\n        });\r\n        // Set up AntiForgery Token from form\r\n        let $tokenName = $dlg.find(\".modal-body form\").find(\"#\" + ew.TOKEN_NAME_KEY),\r\n          $antiForgeryToken = $dlg.find(\".modal-body form\").find(\"#\" + ew.ANTIFORGERY_TOKEN_KEY);\r\n        if ($tokenName.length && $antiForgeryToken.length) {\r\n          ew.TOKEN_NAME = $tokenName.val();\r\n          ew.ANTIFORGERY_TOKEN = $antiForgeryToken.val();\r\n        }\r\n        if (lnkData.ajax && lnkData.table && lnkData.action == \"view\") {\r\n          // Modal View page and use Ajax actions\r\n          [\".ew-add\", \".ew-copy\", \".ew-edit\", \".ew-delete\"].forEach(className => {\r\n            let $dlglnk = $dlg.find(\".modal-body \" + className + \"[data-ew-action=modal]\"),\r\n              // Link inside modal dialog\r\n              $lnk = $$1(\"[data-ew-action=modal][data-table='\" + lnkData.table + \"'][data-url='\" + $dlglnk.data(\"url\") + \"']\").not(\".modal-body *\").first(); // Link outside modal dialog\r\n            $lnk[0] ? $dlglnk.on(\"click\", e => {\r\n              e.preventDefault();\r\n              e.stopImmediatePropagation();\r\n              $lnk.trigger(\"click\"); // Click the link outside\r\n            }) : $dlglnk.addClass(\"d-none\"); // Hide the link\r\n          });\r\n        }\r\n        ew.modalDialog = $dlg.modal(\"show\");\r\n        executeScript(data, \"modal_dialog\", true);\r\n        // Fix for CKEditor\r\n        let modal = bootstrap.Modal.getInstance($dlg[0]);\r\n        if (!modal._focustrap.__handleFocusin) {\r\n          modal._focustrap.__handleFocusin = modal._focustrap._handleFocusin;\r\n          modal._focustrap._handleFocusin = function (e) {\r\n            var _e$target10;\r\n            // Use function for \"this\"\r\n            if ((_e$target10 = e.target) != null && _e$target10.matches(\"[class^=cke_dialog_]\"))\r\n              // Element from CKEditor dialog\r\n              return; // Do not focus the modal\r\n            this.__handleFocusin(e);\r\n          };\r\n        }\r\n        $dlg.trigger(\"load.ew\"); // Trigger load event\r\n      }\r\n    };\r\n    let show = function (html) {\r\n      let args = $dlg.data(\"args\");\r\n      $dlg.find(\".modal-title\").html(_caption());\r\n      $dlg.find(\".modal-body\").html(html);\r\n      _createButtons();\r\n      $dlg.find(\".modal-footer\").toggle(args.footer !== false);\r\n      ew.modalDialog = $dlg.modal(\"show\");\r\n    };\r\n\r\n    // Restore previous callback\r\n    if (args.callback === true && (_$dlg$data = $dlg.data(\"args\")) != null && _$dlg$data.callback) args.callback = $dlg.data(\"args\").callback;\r\n    if (url && (_$dlg$data2 = $dlg.data(\"args\")) != null && _$dlg$data2.reload) {\r\n      // About to load URL but previous result required reload\r\n      args.reload = true; // Carry the reload state to current args\r\n      $dlg.data(\"args\").reload = false; // Remove reload so \"hidden\" event will not reload\r\n    }\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n    if (url) {\r\n      document.body.style.cursor = \"wait\";\r\n      let params = ew.getSearchParams(url);\r\n      params.set(\"rnd\", random());\r\n      if (params.get(\"action\") != \"delete\") params.set(\"modal\", \"1\");\r\n      $$1.ajax({\r\n        url: setSearchParams(url, params),\r\n        method: f ? \"POST\" : \"GET\",\r\n        data: f ? $$1(f).serialize() : \"\",\r\n        headers: args.json ? {\r\n          Accept: \"application/json, */*; q=0.01\"\r\n        } : {} // JSON response\r\n      }).done(success).fail(_fail).always(_always);\r\n    } else if (args.html) {\r\n      show(args.html);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Show dialog for import\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @returns\r\n   */\r\n  function importDialogShow(args) {\r\n    var _args$evt6, _bootstrap$Tooltip$ge5;\r\n    args.lnk = args.lnk || ((_args$evt6 = args.evt) == null ? void 0 : _args$evt6.currentTarget);\r\n    (_bootstrap$Tooltip$ge5 = bootstrap.Tooltip.getInstance(args.lnk)) == null || _bootstrap$Tooltip$ge5.hide();\r\n    let $dlg = ew.importDialog || $$1(\"#ew-import-dialog\");\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-import-dialog not found.\");\r\n      return false;\r\n    }\r\n    let $input = $dlg.find(\"#importfiles\"),\r\n      $dropzone = $input.closest(\".ew-file-drop-zone\"),\r\n      $bd = $dlg.find(\".modal-body\"),\r\n      $data = $bd.find(\":input[id!=importfiles]\"),\r\n      $message = $bd.find(\".message\"),\r\n      $progress = $bd.find(\".progress\"),\r\n      table,\r\n      sse;\r\n\r\n    // Add row to table\r\n    let addRow = function (result) {\r\n      let {\r\n          row,\r\n          success,\r\n          error,\r\n          count\r\n        } = result,\r\n        callback = () => {\r\n          table.addRow(row).then(r => r.getElement().classList.toggle(\"text-danger\", error));\r\n          if (error) console.log(sprintf(ew.language.phrase(\"ImportRowError\"), count + \" \" + JSON.stringify(row), error));\r\n        };\r\n      row = {\r\n        \"_index\": count,\r\n        \"_success\": success,\r\n        \"_error\": error,\r\n        ...row\r\n      };\r\n      if (!table) {\r\n        table = new Tabulator(\"#ew-import-dialog .result\", $$1.extend({\r\n          data: [row],\r\n          index: \"_index\",\r\n          autoColumns: true,\r\n          autoColumnsDefinitions: definitions => {\r\n            definitions.forEach(column => {\r\n              column.headerSort = false;\r\n              column.resizable = false;\r\n              if ([\"_index\", \"_error\"].includes(column.field)) {\r\n                column.visible = false;\r\n              } else if (column.field == \"_success\") {\r\n                column.title = \"#\";\r\n                column.headerSort = true;\r\n                column.headerSortTristate = true;\r\n                column.formatter = cell => {\r\n                  cell.getElement().style.textOverflow = \"clip\";\r\n                  let row = cell.getRow(),\r\n                    data = row.getData();\r\n                  if (data._error) new bootstrap.Tooltip(row.getElement(), {\r\n                    placement: \"bottom\",\r\n                    title: data._error,\r\n                    container: \"#ew-import-dialog .result\"\r\n                  });\r\n                  return (data._success ? '<i class=\"fa-solid fa-check text-success\"></i>' : '<i class=\"fa-solid fa-xmark text-danger\"></i>') + \" #\" + data._index;\r\n                };\r\n              }\r\n            });\r\n            return definitions;\r\n          }\r\n        }, ew.importTabulatorOptions));\r\n        table.on(\"tableBuilt\", () => table.element.querySelector(\".tabulator-row\").classList.toggle(\"text-danger\", error));\r\n      } else {\r\n        table.initialized ? callback() : table.on(\"tableBuilt\", callback);\r\n      }\r\n    };\r\n\r\n    // Enable buttons\r\n    let enableButtons = enabled => $dlg.find(\".modal-footer .btn\").prop(\"disabled\", !enabled);\r\n\r\n    // Show message\r\n    let showMessage = function (msg, classname) {\r\n      let $msg = $$1(\"<div>\" + msg + \"</div>\");\r\n      if (classname) $msg.addClass(classname);\r\n      $message.removeClass(\"d-none\").html($msg);\r\n      if (classname == \"text-danger\") enableButtons(true);\r\n    };\r\n\r\n    // Hide message\r\n    let hideMessage = () => $message.addClass(\"d-none\").html(\"\");\r\n\r\n    // Show progress\r\n    let showProgress = (pc, classname) => $progress.removeClass(\"d-none\").find(\".progress-bar\").removeClass(\"text-bg-success text-bg-info\").addClass(classname || \"text-bg-success\").attr(\"aria-valuenow\", pc).css(\"width\", pc + \"%\").html(pc + \"%\");\r\n\r\n    // Hide progress\r\n    let hideProgress = () => $progress.addClass(\"d-none\").find(\".progress-bar\").attr(\"aria-valuenow\", 0).css(\"width\", \"0%\").html(\"0%\");\r\n\r\n    // Upload progress\r\n    let uploadProgress = function (data) {\r\n      const pc = parseInt(100 * data.loaded / data.total, 10);\r\n      showProgress(pc, \"text-bg-primary\");\r\n      if (pc === 100) showMessage(ew.language.phrase(\"ImportUploadComplete\"), \"text-primary\");else showMessage(sprintf(ew.language.phrase(\"ImportUploadProgress\"), pc), \"text-primary\");\r\n    };\r\n\r\n    // Update import progress\r\n    let updateProgress = function (e) {\r\n      const result = parseJson(e.data) || {};\r\n      try {\r\n        let tcnt = result.totalCount || 0,\r\n          cnt = result.count || 0,\r\n          scnt = result.successCount || 0,\r\n          fcnt = result.failCount || 0,\r\n          filename = result.file;\r\n        if (tcnt > 0 && $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\")) {\r\n          // Show progress\r\n          if (result.row) addRow(result);\r\n          let pc = parseInt(100 * cnt / tcnt, 10);\r\n          showProgress(pc);\r\n          showMessage(sprintf(ew.language.phrase(\"ImportResult\"), cnt, tcnt, filename, scnt, fcnt), fcnt > 0 ? \"text-danger\" : \"text-primary\");\r\n        }\r\n      } catch (e) {}\r\n    };\r\n\r\n    // Import complete\r\n    let importComplete = function (e) {\r\n      var _sse;\r\n      let msg = [],\r\n        result = parseJson(e.data) || {},\r\n        fileResults = result.files;\r\n      showProgress(100);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n      if (Array.isArray(fileResults)) {\r\n        fileResults.forEach(fileResult => {\r\n          let tcnt = fileResult.totalCount || 0,\r\n            cnt = fileResult.count || 0,\r\n            scnt = fileResult.successCount || 0,\r\n            fcnt = fileResult.failCount || 0;\r\n          msg.push(sprintf(ew.language.phrase(\"ImportResult\"), cnt, tcnt, fileResult.file, scnt, fcnt));\r\n        });\r\n      }\r\n      if (result.success) {\r\n        if (result.rollbacked) msg.push(ew.language.phrase(\"ImportSave\"));\r\n        showMessage(msg.join(\"<br>\"), \"text-success\");\r\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"imported\", true);\r\n      } else {\r\n        if (ew.IMPORT_MAX_FAILURES > 0 && result.failCount >= ew.IMPORT_MAX_FAILURES) msg.push(sprintf(ew.language.phrase(\"ImportMaxFailuresExceeded\"), ew.IMPORT_MAX_FAILURES));\r\n        showMessage(msg.join(\"<br>\"), \"text-danger\"); // Show error message\r\n      }\r\n      // hideProgress();\r\n      document.body.style.cursor = \"default\";\r\n      $dlg.find(\".modal-footer .ew-close-btn\").prop(\"disabled\", false); // Enable the close button\r\n      let $btn = $dlg.find(\".modal-footer .ew-import-btn\").toggleClass(\"d-none\", !result.rollbacked || !result.success); // Show/Hide the import button\r\n      if (result.rollbacked) $btn.off(\"click\").one(\"click\", saveImport);\r\n      console.log(\"Closing EventSource...\");\r\n      (_sse = sse) == null || _sse.close();\r\n    };\r\n\r\n    // Import fail\r\n    let importFail = function (e) {\r\n      var _sse2;\r\n      document.body.style.cursor = \"default\";\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n      let result = parseJson(e.data) || {};\r\n      if (result.error) showMessage(result.error, \"text-danger\");\r\n      console.log(\"Closing EventSource...\");\r\n      (_sse2 = sse) == null || _sse2.close();\r\n    };\r\n\r\n    // Import file\r\n    let importFiles = function (filetoken) {\r\n      var _table;\r\n      document.body.style.cursor = \"wait\";\r\n      showProgress(0);\r\n      (_table = table) == null || _table.clearData();\r\n      $input.data(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n      let params = new URLSearchParams($data.serialize());\r\n      params.set(ew.API_ACTION_NAME, ew.API_IMPORT_ACTION);\r\n      params.set(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      params.set(\"rollback\", \"1\");\r\n      sse = new EventSource(currentPage() + \"?\" + params.toString());\r\n      sse.addEventListener(\"message\", updateProgress);\r\n      sse.addEventListener(\"error\", importFail);\r\n      sse.addEventListener(\"complete\", importComplete);\r\n    };\r\n\r\n    // Save import\r\n    let saveImport = function (e) {\r\n      var _table2;\r\n      document.body.style.cursor = \"wait\";\r\n      showProgress(0);\r\n      (_table2 = table) == null || _table2.clearData();\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n      let params = new URLSearchParams($data.serialize());\r\n      params.set(ew.API_ACTION_NAME, ew.API_IMPORT_ACTION);\r\n      params.set(ew.API_FILE_TOKEN_NAME, $input.data(ew.API_FILE_TOKEN_NAME));\r\n      params.set(\"rollback\", \"0\");\r\n      sse = new EventSource(currentPage() + \"?\" + params.toString());\r\n      sse.addEventListener(\"message\", updateProgress);\r\n      sse.addEventListener(\"error\", importFail);\r\n      sse.addEventListener(\"complete\", importComplete);\r\n    };\r\n    let options = ew.importUploadOptions;\r\n    if (!options.acceptFileTypes) options.acceptFileTypes = new RegExp('\\\\.(' + ew.IMPORT_FILE_ALLOWED_EXTENSIONS.replace(/,/g, '|') + ')$', 'i');\r\n    if (!$input.data(\"blueimpFileupload\")) {\r\n      $input.fileupload(Object.assign({\r\n        url: getApiUrl(ew.API_UPLOAD_ACTION),\r\n        dataType: \"json\",\r\n        autoUpload: true,\r\n        singleFileUploads: false,\r\n        dropZone: $dropzone,\r\n        messages: {\r\n          acceptFileTypes: ew.language.phrase(\"UploadErrorAcceptFileTypes\"),\r\n          maxFileSize: ew.language.phrase(\"UploadErrorMaxFileSize\"),\r\n          maxNumberOfFiles: ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"),\r\n          minFileSize: ew.language.phrase(\"UploadErrorMinFileSize\")\r\n        },\r\n        beforeSend: function (jqxhr, settings) {\r\n          settings.data.set(\"session\", ew.SESSION_ID);\r\n          settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n          settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n          if (ew.API_JWT_TOKEN) jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n        },\r\n        done: function (e, data) {\r\n          var _data$result;\r\n          if (Array.isArray(data == null || (_data$result = data.result) == null || (_data$result = _data$result.files) == null ? void 0 : _data$result.importfiles)) {\r\n            let errors = [];\r\n            data.result.files.importfiles.forEach(function (file, index) {\r\n              if (file.error) errors.push(sprintf(ew.language.phrase(\"ImportUploadError\"), file.name, file.error));\r\n            });\r\n            if (errors.length) {\r\n              showMessage(errors.join(\"\\n\"), \"text-danger\"); // Show upload errors for each file\r\n            } else {\r\n              table = null; // Reset\r\n              importFiles(data.result[ew.API_FILE_TOKEN_NAME]); // Import uploaded files\r\n            }\r\n          }\r\n        },\r\n        change: function (e, data) {\r\n          hideMessage();\r\n        },\r\n        processfail: function (e, data) {\r\n          data.files.forEach(function (file, index) {\r\n            if (file.error) showMessage(ew.language.phrase(\"ImportUploadError\", file.name, file.error), \"text-danger\");\r\n          }); // Show process errors for each file\r\n        },\r\n        fail: function (e, data) {\r\n          showMessage(sprintf(ew.language.phrase(\"ImportServerError\"), data.textStatus, data.errorThrown), \"text-danger\");\r\n        },\r\n        progressall: function (e, data) {\r\n          uploadProgress(data);\r\n        }\r\n      }, options));\r\n    }\r\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\r\n    $dlg.find(\".modal-footer .ew-close-btn\").off(\"click.ew\").on(\"click.ew\", function () {\r\n      let $this = $$1(this);\r\n      if ($this.data(\"imported\")) {\r\n        $this.data(\"imported\", false);\r\n        window.location.reload();\r\n      }\r\n    });\r\n    hideMessage();\r\n    ew.importDialog = $dlg.on(\"show.bs.modal\", function () {\r\n      var _this$querySelector, _table3, _table4;\r\n      hideProgress();\r\n      (_this$querySelector = this.querySelector(\".modal-footer .ew-import-btn\")) == null || _this$querySelector.classList.add(\"d-none\");\r\n      (_table3 = table) == null || _table3.element.removeAttribute(\"style\");\r\n      (_table4 = table) == null || _table4.destroy();\r\n      table = null;\r\n    }).modal(\"show\");\r\n    return false;\r\n  }\r\n\r\n  // Auto-fill\r\n  function autoFill(el) {\r\n    let f = forms.get(el).$element[0];\r\n    if (!f) return;\r\n    let ar = getOptionValues(el),\r\n      id = getId(el),\r\n      m = id.match(/^([xy])(\\d*)_/),\r\n      rowindex = m ? m[2] : \"\",\r\n      list = forms.get(el).getList(id),\r\n      dest_array = list.autoFillTargetFields;\r\n    let success = function (data) {\r\n      let results = data == null ? void 0 : data.records,\r\n        result = Array.isArray(results) && results.length > 0 ? results[0] : [];\r\n      for (let j = 0; j < dest_array.length; j++) {\r\n        let destEl = getElements(dest_array[j].replace(/^x_/, \"x\" + rowindex + \"_\"), f);\r\n        if (destEl) {\r\n          let val = $$1.isValue(result[\"af\" + j]) ? String(result[\"af\" + j]) : \"\",\r\n            args = {\r\n              results,\r\n              result,\r\n              data: val,\r\n              form: f,\r\n              name: id,\r\n              target: dest_array[j],\r\n              cancel: false,\r\n              trigger: true\r\n            };\r\n          $$1(el).trigger(\"autofill\", [args]); // Fire event\r\n          if (args.cancel) continue;\r\n          val = args.data; // Process the value\r\n          if (destEl.options) {\r\n            // Selection list\r\n            selectOption(destEl, val.split(\",\"));\r\n            if (isAutoSuggest(destEl)) {\r\n              // Auto-Suggest\r\n              destEl.input.value = val;\r\n              updateOptions.call(forms.get(f.id), destEl);\r\n            }\r\n          } else if (isHiddenTextArea(destEl)) {\r\n            // HTML editor\r\n            destEl.value = val;\r\n            $$1(destEl).data(\"editor\").set();\r\n          } else if (destEl.type == \"checkbox\") {\r\n            // Boolean checkbox\r\n            destEl.checked = convertToBool(val);\r\n          } else {\r\n            destEl.value = val;\r\n          }\r\n          if (args.trigger) $$1(destEl).trigger(\"change\");\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n    if (ar.length > 0 && ar[0] != \"\") {\r\n      let data = Object.assign({\r\n        page: list.page,\r\n        field: list.field,\r\n        ajax: \"autofill\",\r\n        v0: ar[0],\r\n        language: ew.LANGUAGE_ID\r\n      }, getUserParams('#p_' + id, f));\r\n      // Add parent field values\r\n      let parentId = list.parentFields.slice(); // Clone\r\n      if (rowindex != \"\") {\r\n        for (let i = 0, len = parentId.length; i < len; i++) {\r\n          let ar = parentId[i].split(\" \");\r\n          if (ar.length == 1)\r\n            // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n      let arp = parentId.map(pid => getOptionValue(pid, f)); // Get parent field values\r\n      arp.forEach((p, i) => data[\"v\" + (i + 1)] = p); // Filter by parent fields\r\n      return $$1.post(getApiUrl(ew.API_LOOKUP_ACTION), data, success, \"json\");\r\n    }\r\n    return success();\r\n  }\r\n\r\n  // Set up tooltip links as popovers\r\n  function tooltip(i, el) {\r\n    var $this = $$1(el),\r\n      $tt = $$1(\"#\" + $this.data(\"tooltip-id\")),\r\n      trig = $this.data(\"trigger\") || \"hover\",\r\n      dir = $this.data(\"placement\") || \"auto\";\r\n    if (!$tt[0] || $tt.text().trim() == \"\" && !$tt.find(\"img[src!='']\")[0]) return;\r\n    if (!bootstrap.Popover.getInstance(el)) {\r\n      $this.popover({\r\n        ...ew.popoverOptions,\r\n        placement: dir,\r\n        trigger: trig,\r\n        delay: 100,\r\n        container: document.getElementById(\"ew-tooltip\"),\r\n        content: $tt.html()\r\n      }).on(\"show.bs.popover\", function () {\r\n        var wd = $this.data(\"tooltip-width\");\r\n        if (wd)\r\n          // Set width before show\r\n          $$1(bootstrap.Popover.getInstance(this)._getTipElement()).css(\"max-width\", parseInt(wd, 10) + \"px\");\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init search filters\r\n   */\r\n  function initSearchFilters(e) {\r\n    var _e$target11;\r\n    let el = (_e$target11 = e == null ? void 0 : e.target) != null ? _e$target11 : document,\r\n      btn = el == null ? void 0 : el.querySelector(\".ew-filter-option\");\r\n    if (ew.CLIENT_SEARCH_FILTER || ew.SERVER_SEARCH_FILTER && ew.IS_LOGGED_IN && !ew.IS_SYS_ADMIN && ew.CURRENT_USER_NAME != \"\") {\r\n      $$1(btn).removeClass(\"d-none\").find(\".ew-btn-dropdown\").on(\"show.bs.dropdown\", function (e) {\r\n        var _frm$filterList$filte, _frm$filterList;\r\n        let formId = $$1(this).find(\".ew-save-filter[data-form], .ew-delete-filter[data-form]\").data(\"form\"),\r\n          frm = ew.forms.get(formId),\r\n          filters = ew.CLIENT_SEARCH_FILTER ? ew.parseJson(localStorage.getItem(ew.PROJECT_NAME + \"_\" + frm.id + \"_filters\") || \"[]\") || [] : (_frm$filterList$filte = frm == null || (_frm$filterList = frm.filterList) == null ? void 0 : _frm$filterList.filters) != null ? _frm$filterList$filte : [];\r\n        frm.setupFilters(e, filters.filter(val => Array.isArray(val) && val.length == 2));\r\n      });\r\n    } else {\r\n      btn == null || btn.classList.add(\"d-none\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show dialog for email sending\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {Object} args.key - Key as object\r\n   * @param {boolean} args.exportSelected - Exported selected only\r\n   * @param {string} args.url - URL of content (for Custom Template)\r\n   * @param {string} args.exportId - Export ID (for Custom Template)\r\n   * @returns false\r\n   */\r\n  function emailDialogShow(args) {\r\n    let $dlg = ew.emailDialog || $$1(\"#ew-email-dialog\").on(\"shown.bs.modal\", e => setTimeout(() => {\r\n      var _e$target$querySelect;\r\n      return (_e$target$querySelect = e.target.querySelector(\".modal-body .form-control\")) == null ? void 0 : _e$target$querySelect.focus();\r\n    }, 200)).on(\"click\", \".modal-footer .btn-primary\", function (e) {\r\n      var _$$closest$find$data;\r\n      e.preventDefault();\r\n      if ((_$$closest$find$data = $$1(this).closest(\".modal\").find(\".modal-body form\").data(\"form\")) != null && _$$closest$find$data.submit()) $dlg.modal(\"hide\");\r\n    });\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-email-dialog not found.\");\r\n      return false;\r\n    }\r\n    let form = args.evt.currentTarget.form;\r\n    if (args.exportSelected && !keySelected(form)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let $f = $dlg.find(\".modal-body form\"),\r\n      frm = $f.data(\"form\");\r\n    if (!frm) {\r\n      frm = new FormBuilder().setId($f.attr(\"id\")).addFields([[\"sender\", [ew.Validators.required(ew.language.phrase(\"Sender\")), ew.Validators.email]], [\"recipient\", [ew.Validators.required(ew.language.phrase(\"Recipient\")), ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperRecipientEmail\"))]], [\"cc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperCcEmail\"))], [\"bcc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperBccEmail\"))], [\"subject\", ew.Validators.required(ew.language.phrase(\"Subject\"))]]).setValidate(function () {\r\n        return this.validateFields();\r\n      }).setSubmit(function () {\r\n        if (!this.validate()) return false;\r\n        let data = mergeSearchParams($f.serialize(), args.key, getchartParams(), form && args.exportSelected ? $$1(form).find(\"input[type=checkbox][name='key_m[]']:checked\").serialize() : null); // Export selected\r\n        $dlg.modal(\"hide\");\r\n        args.custom // Custom Template\r\n        ? _export({\r\n          ...args,\r\n          ...{\r\n            export: \"email\",\r\n            custom: true,\r\n            emailForm: $f[0]\r\n          }\r\n        }) : exportEmail($f.find(\"#tblvar\").val(), data);\r\n        return false;\r\n      }).build();\r\n      $f.data(\"form\", frm);\r\n    }\r\n    ew.emailDialog = $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr).end().modal(\"show\");\r\n    return false;\r\n  }\r\n\r\n  // Export to email\r\n  function exportEmail(tblVar, data) {\r\n    let swal = window.parent.Swal; // Use window.parent.Swal in case in iframe\r\n    data = mergeSearchParams(data, [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]]);\r\n    return swal.fire({\r\n      ...ew.sweetAlertSettings,\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: () => {\r\n        swal.showLoading();\r\n        _fetch(getApiUrl([ew.API_EXPORT_ACTION, \"email\", tblVar]) + \"?rnd=\" + random(), {\r\n          // Post to Export API\r\n          method: \"POST\",\r\n          body: data\r\n        }).then(async response => {\r\n          swal.hideLoading();\r\n          let result = await response.json();\r\n          if (result != null && result.success) {\r\n            swal.update({\r\n              html: \"<div class='text-success'>\" + result.message + \"</div>\"\r\n            });\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"done\",\r\n              tblVar,\r\n              data,\r\n              result\r\n            }]);\r\n          } else {\r\n            var _ref3;\r\n            swal.update({\r\n              html: (_ref3 = \"<div class='text-danger'>\" + getError(result)) != null ? _ref3 : ew.language.phrase(\"FailedToExport\") + \"</div>\"\r\n            });\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"fail\",\r\n              tblVar,\r\n              data,\r\n              result\r\n            }]);\r\n          }\r\n        }).catch(error => {\r\n          var _ref4;\r\n          swal.hideLoading();\r\n          swal.update({\r\n            html: (_ref4 = \"<div class='text-danger'>\" + error) != null ? _ref4 : ew.language.phrase(\"FailedToExport\") + \"</div>\"\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"fail\",\r\n            tblVar,\r\n            data,\r\n            error\r\n          }]);\r\n        }).finally(() => {\r\n          swal.update({\r\n            showConfirmButton: true\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"always\",\r\n            tblVar,\r\n            data\r\n          }]);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  // Show drill down\r\n  function showDrillDown(e, obj, url, id, hdr) {\r\n    if (e != null && e.ctrlKey) {\r\n      let newUrl = setSearchParams(url, {\r\n        d: \"2\"\r\n      }); // Change \"d\" parameter to 2\r\n      return redirect(newUrl);\r\n    }\r\n    let $obj = $$1(obj),\r\n      config = $obj.data(\"config\") || {},\r\n      args = {\r\n        obj: $obj[0],\r\n        config: {\r\n          title: hdr,\r\n          placement: \"bottom\",\r\n          ...config\r\n        },\r\n        id,\r\n        url\r\n      };\r\n    $document$1.trigger(\"drilldown\", [args]);\r\n    let ar = args.url.split(\"?\");\r\n    args.file = ar[0] || \"\";\r\n    args.data = ar[1] || \"\";\r\n    config = args.config;\r\n    if (!bootstrap.Popover.getInstance(obj)) {\r\n      $obj.popover({\r\n        ...ew.popoverOptions,\r\n        ...config,\r\n        trigger: \"manual\",\r\n        template: '<div class=\"popover\" role=\"tooltip\"><h3 class=\"popover-header d-none\" style=\"cursor: move;\"></h3><div class=\"popover-body\"></div></div>',\r\n        // No .popover-arrow\r\n        content: ew.spinnerTemplate(),\r\n        container: $$1(\"#ew-drilldown-panel\").draggable(ew.draggableOptions),\r\n        boundary: \"viewport\"\r\n      }).on(\"show.bs.popover\", function (e) {\r\n        $obj.attr(\"data-bs-original-title\", \"\");\r\n      }).on(\"shown.bs.popover\", function (e) {\r\n        if (!$obj.data(\"args\")) return;\r\n        let data = $obj.data(\"args\").data;\r\n        $$1.ajax({\r\n          cache: false,\r\n          dataType: \"html\",\r\n          type: \"POST\",\r\n          data: data,\r\n          url: $obj.data(\"args\").file,\r\n          success: function (data) {\r\n            let $tip = $$1(bootstrap.Popover.getInstance(obj)._getTipElement());\r\n            if (config.title) $tip.find(\".popover-header\").empty().removeClass(\"d-none\").append('<button type=\"button\" class=\"btn-close\" aria-label=\"' + ew.language.phrase(\"CloseBtn\") + '\"></button>' + config.title).find(\".btn-close\").on(\"click\", function () {\r\n              $obj.popover(\"hide\");\r\n            });\r\n            let m = data.match(/<body[^>]*>([\\s\\S]*?)<\\/body\\s*>/i); // Use HTML in document body only\r\n            data = m ? m[0] : data;\r\n            let html = ew.stripScript(data);\r\n            $tip.find(\".popover-body\").html($$1(\"<div></div>\").html(html).find(\"#ew-report\")) // Insert the container table only\r\n            .find(\".ew-table\").each(ew.setupTable);\r\n            ew.executeScript(data, id, true);\r\n            $obj.popover(\"update\");\r\n          },\r\n          error: function (o) {\r\n            if (o.responseText) {\r\n              let popover = bootstrap.Popover.getInstance(obj);\r\n              if ($$1.isString(o.responseText) && o.responseText.startsWith(\"{\") && o.responseText.endsWith(\"}\")) {\r\n                var _result$error13, _result$error14;\r\n                let result = parseJson(o.responseText);\r\n                if (result != null && (_result$error13 = result.error) != null && _result$error13.type && result != null && (_result$error14 = result.error) != null && _result$error14.description) {\r\n                  popover == null || popover.hide();\r\n                  return _alert({\r\n                    title: result.error.type,\r\n                    html: result.error.description,\r\n                    customClass: {\r\n                      title: \"ew-swal2-title text-danger\",\r\n                      htmlContainer: \"ew-swal2-html-container text-danger\"\r\n                    }\r\n                  });\r\n                }\r\n              }\r\n              popover == null || popover.setContent({\r\n                \".popover-body\": '<p class=\"text-danger\">' + o.responseText + '</p>'\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }).on(\"hidden.bs.popover\", function (e) {\r\n        ew.removeScript(id);\r\n      });\r\n    }\r\n    $obj.data(\"args\", args).popover(\"show\");\r\n  }\r\n\r\n  /**\r\n   * Ajax query\r\n   * @param {Object} data - Object to passed to API\r\n   * @param {callback} callback - Callback function for async request (see http://api.jquery.com/jQuery.post/), empty for sync request\r\n   * @returns {string|string[]}\r\n   */\r\n  function ajax(data, callback) {\r\n    if (!$$1.isObject(data) || !data.url && !data.action) return undefined;\r\n    var action;\r\n    if (data.url) {\r\n      if (data.url.startsWith(getApiUrl())) action = data.url.replace(getApiUrl(), \"\").split(\"/\")[0];else if (data.url.startsWith(ew.API_URL)) action = data.url.replace(ew.API_URL, \"\").split(\"/\")[0];\r\n    } else {\r\n      action = data.action;\r\n      delete data.action;\r\n    }\r\n    var obj = Object.assign({}, data);\r\n    var _convert = response => {\r\n      if ($$1.isObject(response) && response.result == \"OK\") {\r\n        var results = response.records;\r\n        if (Array.isArray(results) && results.length == 1) {\r\n          // Single row\r\n          results = results[0];\r\n          if (Array.isArray(results) && results.length == 1)\r\n            // Single column\r\n            return results[0]; // Return a value\r\n          else return results; // Return a row\r\n        }\r\n        return results;\r\n      }\r\n      return response;\r\n    };\r\n    var url = obj.url || getApiUrl(action),\r\n      // URL\r\n      type = obj.type || ([ew.API_LIST_ACTION, ew.API_VIEW_ACTION, ew.API_DELETE_ACTION].includes(action) ? \"GET\" : \"POST\");\r\n    delete obj.url;\r\n    delete obj.type;\r\n    obj.dataType = \"json\";\r\n    if (isFunction$2(callback)) {\r\n      // Async\r\n      $$1.ajax({\r\n        url: url,\r\n        type: type,\r\n        data: obj,\r\n        success: function (response) {\r\n          callback(_convert(response));\r\n        }\r\n      });\r\n    } else {\r\n      // Sync\r\n      var response = $$1.ajax({\r\n        url: url,\r\n        async: false,\r\n        type: type,\r\n        data: obj\r\n      });\r\n      return _convert(response.responseJSON);\r\n    }\r\n  }\r\n\r\n  // Get URL of current page\r\n  function currentPage() {\r\n    return location.href.split(\"#\")[0].split(\"?\")[0];\r\n  }\r\n\r\n  // Toggle search operator\r\n  function toggleSearchOperator(e, id, value) {\r\n    var el = e.currentTarget.form.elements[id];\r\n    if (!el) return;\r\n    el.value = el.value != value ? value : \"=\";\r\n  }\r\n\r\n  // Toggle multi-column layout\r\n  function toggleLayout(el) {\r\n    var _bootstrap$Tooltip$ge6;\r\n    (_bootstrap$Tooltip$ge6 = bootstrap.Tooltip.getInstance(el)) == null || _bootstrap$Tooltip$ge6.hide();\r\n    document.body.style.cursor = \"wait\";\r\n    fetch(sanitizeUrl(setLayout(el.dataset.url, el.dataset.layout))).then(response => response.text()).then(html => {\r\n      let $grid = $$1(\".ew-multi-column-grid\").html($$1(\"<div>\" + html + \"</div>\").find(\".ew-multi-column-grid\").html());\r\n      ew.initPage({\r\n        target: $grid[0]\r\n      });\r\n      $grid.trigger(\"load.ew\");\r\n    }).catch(error => _alert(error)).finally(() => document.body.style.cursor = \"default\");\r\n  }\r\n\r\n  // Copy inner text to clipboard\r\n  function copyToClipboard(source) {\r\n    var _source, _source2;\r\n    source = $$1.isString(source) ? document.querySelector(source) : source;\r\n    const str = ((_source = source) == null ? void 0 : _source.value) || ((_source2 = source) == null ? void 0 : _source2.innerText);\r\n    if (str) {\r\n      const el = document.createElement(\"textarea\");\r\n      el.value = str;\r\n      el.setAttribute(\"readonly\", \"\");\r\n      el.style.position = \"absolute\";\r\n      el.style.left = \"-9999px\";\r\n      document.body.appendChild(el);\r\n      el.select();\r\n      document.execCommand(\"copy\");\r\n      document.body.removeChild(el);\r\n    }\r\n    return str;\r\n  }\r\n\r\n  /**\r\n   * Validators\r\n   */\r\n\r\n  // Check integer\r\n  function checkInteger(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    if (object_value.includes(ew.DECIMAL_SEPARATOR)) return false;\r\n    return checkNumber(object_value);\r\n  }\r\n\r\n  // Check number\r\n  function checkNumber(object_value) {\r\n    object_value = String(object_value);\r\n    if (!object_value || object_value.length == 0) return true;\r\n    object_value = object_value.trim();\r\n    // let re = new RegExp(\"^[+\\-\\d\\s%\" + escapeRegExChars(ew.DECIMAL_SEPARATOR) + escapeRegExChars(ew.GROUPING_SEPARATOR) + ew.CURRENCY_SYMBOL + \"]+$\");\r\n    // return re.test(object_value) && ew.parseNumber(object_value) !== null;\r\n    return ew.parseNumber(object_value) !== null;\r\n  }\r\n\r\n  // Escape regular expression chars\r\n  function escapeRegExChars(str) {\r\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n  }\r\n\r\n  // Check range\r\n  function checkRange(object_value, min_value, max_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    if ($$1.isNumber(min_value) || $$1.isNumber(max_value)) {\r\n      // Number\r\n      if (checkNumber(object_value)) object_value = ew.parseNumber(object_value);\r\n    }\r\n    if (min_value !== null && object_value < min_value) return false;\r\n    if (max_value !== null && object_value > max_value) return false;\r\n    return true;\r\n  }\r\n\r\n  // Check phone\r\n  function checkPhone(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\(\\d{3}\\) ?\\d{3}( |-)?\\d{4}|^\\d{3}( |-)?\\d{3}( |-)?\\d{4}$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check zip\r\n  function checkZip(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\d{5}$|^\\d{5}-\\d{4}$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check credit card\r\n  function checkCreditCard(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var creditcard_string = object_value.replace(/\\D/g, \"\");\r\n    if (creditcard_string.length == 0) return false;\r\n    var doubledigit = creditcard_string.length % 2 == 1 ? false : true;\r\n    var tempdigit,\r\n      checkdigit = 0;\r\n    for (var i = 0, len = creditcard_string.length; i < len; i++) {\r\n      tempdigit = parseInt(creditcard_string.charAt(i), 10);\r\n      if (doubledigit) {\r\n        tempdigit *= 2;\r\n        checkdigit += tempdigit % 10;\r\n        if (tempdigit / 10 >= 1.0) checkdigit++;\r\n        doubledigit = false;\r\n      } else {\r\n        checkdigit += tempdigit;\r\n        doubledigit = true;\r\n      }\r\n    }\r\n    return checkdigit % 10 == 0;\r\n  }\r\n\r\n  // Check social security number\r\n  function checkSsn(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check emails\r\n  function checkEmails(object_value, email_cnt) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var arEmails = object_value.replace(/,/g, \";\").split(\";\");\r\n    for (var i = 0, len = arEmails.length; i < len; i++) {\r\n      if (email_cnt > 0 && len > email_cnt) return false;\r\n      if (!checkEmail(arEmails[i])) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Check email\r\n  function checkEmail(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^[\\w.%+-]+@[\\w.-]+\\.[A-Z]{2,18}$/i.test(object_value.trim());\r\n  }\r\n\r\n  // Check GUID {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}\r\n  function checkGuid(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(\\{\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}\\}|\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12})$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check URL\r\n  function checkUrl(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    try {\r\n      new URL(object_value);\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Check by regular expression\r\n  function checkByRegEx(object_value, pattern) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return !!object_value.match(pattern);\r\n  }\r\n\r\n  /**\r\n   * Show message dialog\r\n   *\r\n   * @param {Event|string} arg - Event or message\r\n   * @returns\r\n   */\r\n  function showMessage(arg) {\r\n    var _arg$target;\r\n    let doc, swal;\r\n    try {\r\n      // Note: If a window does not have a parent, its parent property is a reference to itself.\r\n      [doc, swal] = [window.parent.document, window.parent.Swal];\r\n    } catch (e) {\r\n      // In case window.parent.document cannot be accessed\r\n      [doc, swal] = [window.document, window.Swal];\r\n    }\r\n    let p = (_arg$target = arg == null ? void 0 : arg.target) != null ? _arg$target : doc,\r\n      $div = $$1(p).find(\"div.ew-message-dialog.d-none\").first(),\r\n      msg = $div.length ? $div.text() : \"\"; // Text only\r\n    if ($$1.isString(arg)) msg = $$1(\"<div>\" + arg.trim() + \"</div>\").text();\r\n    if (msg.trim() == \"\") return;\r\n    if ($div.length) {\r\n      [\"success\", \"info\", \"warning\", \"danger\"].forEach(function (type) {\r\n        let $alert = $div.find(\".alert-\" + type).toggleClass(\"alert-\" + type),\r\n          $heading = $alert.find(\".alert-heading\").detach(),\r\n          $content = $alert.children(\":not(.icon)\");\r\n        $alert.find(\".icon\").remove();\r\n        if ($alert[0]) {\r\n          let w = parseInt($content.css(\"width\"), 10); // Width specified\r\n          if (w > 0) $content.first().css(\"width\", \"auto\");\r\n          let $toast = showToast($alert.html(), type, $heading.html());\r\n          if (w > 0) $toast.css(\"max-width\", w); // Override bootstrap .toast max-width\r\n          return;\r\n        }\r\n      });\r\n    }\r\n    if ($$1.isString(arg)) {\r\n      return swal.fire({\r\n        ...ew.sweetAlertSettings,\r\n        html: arg\r\n      });\r\n    }\r\n  }\r\n\r\n  // Random number\r\n  function random() {\r\n    return Math.floor(Math.random() * 100001) + 100000;\r\n  }\r\n\r\n  // File upload\r\n  function upload(input) {\r\n    let $input = $$1(input);\r\n    if ($input.data(\"blueimpFileupload\")) return;\r\n    let id = $input.attr(\"name\"),\r\n      nid = id.replace(/\\$/g, \"\\\\$\"),\r\n      tbl = $input.data(\"table\"),\r\n      multiple = $input.is(\"[multiple]\"),\r\n      $dropzone = $input.closest(\".ew-file-drop-zone\"),\r\n      $p = $input.closest(fieldContainerSelector),\r\n      $ft = $p.find(\"#ft_\" + nid),\r\n      $fn = $p.find(\"#fn_\" + nid),\r\n      $fa = $p.find(\"#fa_\" + nid),\r\n      $label = $p.find(\".ew-file-label\"),\r\n      label = $label.html();\r\n    let _done = function (e, data) {\r\n      if (data.result.files[0].error) return;\r\n      let name = data.result.files[0].name,\r\n        ar = multiple ? $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [] : [];\r\n      ar.push(name);\r\n      $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n      $fa.val(\"0\");\r\n      if (!multiple)\r\n        // Remove other entries if not multiple upload\r\n        $ft.find(\"tbody > tr:not(:last-child)\").remove();\r\n    };\r\n    let _deleted = function (e, data) {\r\n      let url = e.originalEvent.target.dataset.url,\r\n        params = getSearchParams(url),\r\n        fid = params.get(\"id\"),\r\n        name = params.get(fid);\r\n      if (name) {\r\n        let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [],\r\n          index = ar.indexOf(name);\r\n        if (index > -1) ar.splice(index, 1);\r\n        $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n        $fa.val(\"0\");\r\n      }\r\n    };\r\n    let _change = function (e, data) {\r\n      var _data$files;\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files = data.files) == null ? void 0 : _data$files.length) > 0);\r\n      let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      data.files.forEach(file => ar.push(file.name));\r\n      let cnt = $input.data(\"maxNumberOfFiles\");\r\n      if ($$1.isNumber(cnt) && cnt > 0 && ar.length > cnt) {\r\n        _alert(ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"));\r\n        return false;\r\n      }\r\n      let l = $input.data(\"size\");\r\n      if ($$1.isNumber(l) && l > 0 && ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR).length > l) {\r\n        _alert(ew.language.phrase(\"UploadErrorMaxFileLength\"));\r\n        return false;\r\n      }\r\n    };\r\n    let _confirmDelete = function (e) {\r\n      if (!multiple && $fn.val()) {\r\n        if (!confirm(ew.language.phrase(\"UploadOverwrite\"))) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }\r\n      }\r\n    };\r\n    let _changed = function (e, data) {\r\n      var _data$files2, _data$result2;\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files2 = data.files) == null ? void 0 : _data$files2.length) > 0 || ((_data$result2 = data.result) == null || (_data$result2 = _data$result2.files) == null ? void 0 : _data$result2.length) > 0);\r\n      let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      $label.html(ar.join(\", \") || label);\r\n    };\r\n    let _completed = function (e, data) {\r\n      // After download template rendered\r\n      let evt = {\r\n        target: data.context\r\n      };\r\n      initLightboxes(evt);\r\n      initPdfObjects(evt);\r\n      ew.updateDropdownPosition();\r\n      data.context.find(\"img\").on(\"load\", ew.updateDropdownPosition);\r\n    };\r\n    let _added = function (e, data) {\r\n      var _data$files3;\r\n      // After upload template rendered\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files3 = data.files) == null ? void 0 : _data$files3.length) > 0);\r\n      data.context.find(\".start\").click(_confirmDelete);\r\n    };\r\n    // let _send = function(e, data) { // Before each file upload request\r\n    //     console.log(data);\r\n    // };\r\n    let uploadUrl = getApiUrl(ew.API_JQUERY_UPLOAD_ACTION),\r\n      _downloadTemplate = $$1.templates(\"#template-download\"),\r\n      _uploadTemplate = $$1.templates(\"#template-upload\"),\r\n      form = getForm(input),\r\n      $form = $$1(form),\r\n      readonly = $form.find(\"#confirm\").val() == \"confirm\" || $input.attr(\"readonly\") || $input.prop(\"disabled\");\r\n    if (readonly && !$input.prop(\"disabled\")) $input.prop(\"disabled\", true); // Disable input button if readonly\r\n    const {\r\n      acceptFileTypes,\r\n      maxFileSize,\r\n      maxNumberOfFiles\r\n    } = $input.data();\r\n    const formData = {\r\n      id: id,\r\n      table: tbl,\r\n      session: ew.SESSION_ID,\r\n      replace: multiple ? \"0\" : \"1\",\r\n      acceptFileTypes,\r\n      maxFileSize,\r\n      maxNumberOfFiles\r\n    };\r\n    $input.fileupload(ew.deepAssign({\r\n      url: uploadUrl,\r\n      type: \"POST\",\r\n      multipart: true,\r\n      autoUpload: true,\r\n      loadImageFileTypes: /^image\\/(gif|jpe?g|png)$/i,\r\n      loadVideoFileTypes: /^video\\/mp4$/i,\r\n      loadAudioFileTypes: /^audio\\/(mpeg|mp3)$/i,\r\n      filesContainer: $ft,\r\n      uploadTemplateId: null,\r\n      downloadTemplateId: null,\r\n      uploadTemplate: _uploadTemplate.render.bind(_uploadTemplate),\r\n      downloadTemplate: _downloadTemplate.render.bind(_downloadTemplate),\r\n      previewMaxWidth: ew.UPLOAD_THUMBNAIL_WIDTH,\r\n      previewMaxHeight: ew.UPLOAD_THUMBNAIL_HEIGHT,\r\n      dropZone: $dropzone,\r\n      messages: {\r\n        acceptFileTypes: ew.language.phrase(\"UploadErrorAcceptFileTypes\"),\r\n        maxNumberOfFiles: ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"),\r\n        maxFileSize: ew.language.phrase(\"UploadErrorMaxFileSize\"),\r\n        minFileSize: ew.language.phrase(\"UploadErrorMinFileSize\")\r\n      },\r\n      formData,\r\n      readonly // Custom\r\n    }, ew.uploadOptions))\r\n    // .on(\"fileuploadsend\", _send)\r\n    .on(\"fileuploaddone\", _done).on(\"fileuploaddestroy\", _deleted).on(\"fileuploadchange\", _change).on(\"fileuploadadded fileuploadfinished fileuploaddestroyed\", _changed).on('fileuploadadded', _added).on('fileuploadcompleted', _completed);\r\n    if ($fn.val()) {\r\n      $$1.ajax({\r\n        url: uploadUrl,\r\n        data: {\r\n          id: id,\r\n          table: tbl,\r\n          session: ew.SESSION_ID\r\n        },\r\n        dataType: \"json\",\r\n        context: this,\r\n        success: function (result) {\r\n          if (result != null && result[id]) {\r\n            let done = $input.fileupload(\"option\", \"done\");\r\n            if (done) done.call(input, $$1.Event(), {\r\n              result: {\r\n                files: result[id]\r\n              }\r\n            }); // Use \"files\"\r\n          }\r\n          if (readonly)\r\n            // Hide delete button if readonly\r\n            $ft.find(\"td.delete\").hide();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert data to number\r\n   *\r\n   * @param {*} data - Data being converted\r\n   * @returns {number}\r\n   */\r\n  function parseNumber(data) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.parse(data, {\r\n      locale\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get numbering system\r\n   */\r\n  function getNumberingSystem() {\r\n    return ew.NUMBERING_SYSTEM || new Intl.NumberFormat(ew.LANGUAGE_ID).resolvedOptions().numberingSystem;\r\n  }\r\n  let DateTime = luxon.DateTime,\r\n    Interval = luxon.Interval;\r\n\r\n  /**\r\n   * Format data by DateTime (see https://moment.github.io/luxon/docs/class/src/datetime.js~DateTime.html)\r\n   *\r\n   * @param {string|Number|Date} data - Date\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/docs/manual/formatting.html#toformat)\r\n   * @returns {string}\r\n   */\r\n  function formatDateTime(data, format) {\r\n    let dt;\r\n    if ($$1.isString(data))\r\n      // SQL dates, times, and datetimes\r\n      dt = DateTime.fromSQL(data, {\r\n        zone: \"utc\"\r\n      }); // Do not change the time zone\r\n    else if ($$1.isNumber(data))\r\n      // Unix timestamps\r\n      dt = DateTime.fromSeconds(data, {\r\n        zone: \"utc\"\r\n      });else if (data instanceof Date)\r\n      // JS Date Object\r\n      dt = DateTime.fromJSDate(data, {\r\n        zone: \"utc\"\r\n      });else if (data instanceof DateTime)\r\n      // DateTime Object\r\n      dt = data;\r\n    return dt.toFormat(format, {\r\n      locale: ew.LANGUAGE_ID,\r\n      numberingSystem: ew.getNumberingSystem()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Format time span\r\n   *\r\n   * @param {Date} start - JS start date/time\r\n   * @param {Date} end - JS end date/time\r\n   * @param {bool} allDay - Whether event is all day\r\n   * @returns {string}\r\n   */\r\n  function formatTimeSpan(start, end, allDay) {\r\n    let from = DateTime.fromJSDate(start, {\r\n        zone: \"utc\"\r\n      }),\r\n      to = DateTime.fromJSDate(end, {\r\n        zone: \"utc\"\r\n      });\r\n    if (to.isValid && to.equals(to.startOf(\"day\")))\r\n      // 12:00AM\r\n      to = to.minus(1); // Minus one millisecond => back to previous day\r\n    let interval = new Interval({\r\n      start: from,\r\n      end: to\r\n    });\r\n    if (interval.isValid) {\r\n      // Check if all day\r\n      let days = interval.count() / (24 * 60 * 60 * 1000);\r\n      allDay || (allDay = Number.isInteger(days) && days >= 1);\r\n    }\r\n    if (allDay) {\r\n      // All day => Show date only\r\n      if (interval.isValid && interval.count(\"days\") > 1 || from.isValid && to.isValid && from.startOf(\"day\") < to.startOf(\"day\")) return formatDateTime(from, ew.DATE_FORMAT) + \" - \" + formatDateTime(to, ew.DATE_FORMAT);else if (from.isValid && !end)\r\n        // No end date\r\n        return formatDateTime(from, ew.DATE_FORMAT);\r\n      return \"\";\r\n    } else {\r\n      // Not all day => Show date/time\r\n      if (from.isValid && to.isValid) return from.startOf(\"day\") < to.startOf(\"day\") ? formatDateTime(from, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT) + \" - \" + formatDateTime(to, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT) : formatDateTime(from, ew.TIME_FORMAT) + \" - \" + formatDateTime(to, ew.TIME_FORMAT);else if (from.isValid) return formatDateTime(from, ew.TIME_FORMAT);\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  /**\r\n   * Parse data to DateTime (see https://moment.github.io/luxon/api-docs/index.html#datetime)\r\n   *\r\n   * @param {string} data - Date/Time string supported by DateTime\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/#/formatting?id=table-of-tokens)\r\n   * @returns {DateTime}\r\n   */\r\n  function parseDateTime(data, format) {\r\n    return DateTime.fromFormat(data, format, {\r\n      locale: ew.LANGUAGE_ID,\r\n      numberingSystem: ew.getNumberingSystem()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Check if data can be parsed to DateTime (see https://moment.github.io/luxon/api-docs/index.html#datetime)\r\n   *\r\n   * @param {string} data - Date string supported by DateTime\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/#/formatting?id=table-of-tokens)\r\n   * @returns {boolean}\r\n   */\r\n  function checkDate(data, format) {\r\n    if (!data || data.length == 0) return true;\r\n    return parseDateTime(data, format).isValid;\r\n  }\r\n\r\n  // Check time (alias of checkDate)\r\n  function checkTime(data, format) {\r\n    if (!data || data.length == 0) return true;\r\n    return parseDateTime(data, format).isValid;\r\n  }\r\n\r\n  /**\r\n   * Format currency\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n  function formatCurrency(value, format) {\r\n    format || (format = ew.CURRENCY_FORMAT);\r\n    if (format.includes(\";\")) {\r\n      let formats = format.split(\";\");\r\n      format = value >= 0 ? formats[0] : formats[1];\r\n    }\r\n    format = format.replace(\"\", \"$\");\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format, {\r\n      locale,\r\n      currency: (ew.IS_RTL ? \"\\u200E\" : \"\") + ew.CURRENCY_SYMBOL\r\n    }); // Make sure the currency symbol position is not moved.\r\n  }\r\n\r\n  /**\r\n   * Format number\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n  function formatNumber(value, format) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format || ew.NUMBER_FORMAT, {\r\n      locale\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Format percent\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n  function formatPercent(value, format) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format || ew.PERCENT_FORMAT, {\r\n      locale\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Init page\r\n   *\r\n   * @param {Event|undefined} e - Event\r\n   */\r\n  function initPage(e) {\r\n    var _e$target12;\r\n    var el = (_e$target12 = e == null ? void 0 : e.target) != null ? _e$target12 : document,\r\n      $el = $$1(el),\r\n      $tables = $el.find(\"table.ew-table:not(.ew-export-table)\");\r\n    ew.initPanels(el); // Init grid panels\r\n    ew.renderJsTemplates(e);\r\n    lazyLoad(e);\r\n    initForms(e);\r\n    initTooltips(e);\r\n    initPasswordOptions(e);\r\n    initIcons(e);\r\n    initSearchFilters(e);\r\n    initLightboxes(e);\r\n    initPdfObjects(e);\r\n    $tables.each(setupTable); // Init tables\r\n    $el.find(\".ew-column-dropdown\").each(function () {\r\n      var _localStorage$getItem;\r\n      let table = this.dataset.table;\r\n      (_localStorage$getItem = localStorage.getItem(ew.PROJECT_NAME + \"_\" + table + \"_invisible_fields\")) == null || _localStorage$getItem.split(\",\").forEach(field => $$1(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"'],td[data-name='\" + field + \"']\").toggleClass(\"d-none\", true));\r\n      $$1(this).find(\".ew-dropdown-checkbox\").on(\"click\", function (e) {\r\n        let input = this.querySelector(\".ew-dropdown-check-input[data-field]\"),\r\n          field = input == null ? void 0 : input.dataset.field;\r\n        if (table && field) {\r\n          input.classList.toggle(\"ew-checked\");\r\n          $$1(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"'],td[data-name='\" + field + \"']\").toggleClass(\"d-none\", !input.classList.contains(\"ew-checked\"));\r\n        }\r\n        localStorage.setItem(ew.PROJECT_NAME + \"_\" + table + \"_invisible_fields\", Array.from(e.currentTarget.closest(\".dropdown-menu\").querySelectorAll(\".ew-dropdown-check-input[data-field]:not(.ew-checked)\"), el => el.dataset.field));\r\n      });\r\n    }).on(\"show.bs.dropdown\", function (e) {\r\n      let table = e.currentTarget.dataset.table,\r\n        inputs = e.currentTarget.querySelectorAll(\".ew-dropdown-check-input[data-field]\");\r\n      for (let input of inputs) {\r\n        let field = input.dataset.field;\r\n        input.classList.toggle(\"ew-checked\", !!$$1(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"']:not(.d-none)\")[0]);\r\n      }\r\n    });\r\n    initExportLinks(e);\r\n    initMultiSelectCheckboxes(e);\r\n\r\n    // Report\r\n    var $rpt = $el.find(\".ew-report\");\r\n    if ($rpt[0]) {\r\n      $rpt.find(\".card\").on(\"collapsed.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is collapsed\r\n        var $card = $$1(this),\r\n          $div = $card.closest(\"[class^='col-']\"),\r\n          mh = $div.css(\"min-height\");\r\n        if (mh) $div.data(\"min-height\", mh);\r\n        $div.css(\"min-height\", 0);\r\n      }).on(\"expanded.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is expanded\r\n        var $card = $$1(this),\r\n          $div = $card.closest(\"[class^='col-']\"),\r\n          mh = $div.css(\"min-height\");\r\n        if (mh) $div.css(\"min-height\", mh); // Restore min-height\r\n      });\r\n      // Group expand/collapse button\r\n      $rpt.find(\".ew-group-toggle\").on(\"click\", function () {\r\n        ew.toggleGroup(this);\r\n      });\r\n    }\r\n\r\n    // Show message\r\n    if (typeof ew.USE_JAVASCRIPT_MESSAGE != \"undefined\" && ew.USE_JAVASCRIPT_MESSAGE) showMessage(e);\r\n  }\r\n\r\n  // Redirect by HTTP GET or POST\r\n  function redirect(url, f, method, data) {\r\n    var _ew$vars;\r\n    let urls = (_ew$vars = ew.vars) != null && _ew$vars.login ? Array.from(Object.entries(ew.vars.login)).filter(entry => {\r\n      var _entry$;\r\n      return ((_entry$ = entry[1]) == null ? void 0 : _entry$.url) || entry[0].endsWith(\"Url\");\r\n    }).map(entry => {\r\n      var _entry$2;\r\n      return ((_entry$2 = entry[1]) == null ? void 0 : _entry$2.url) || entry[1];\r\n    }) : [];\r\n    if (urls.includes(url)) {\r\n      // Known URLs\r\n      window.location = url;\r\n      return false;\r\n    }\r\n    let newUrl;\r\n    if (url.startsWith(\"http\")) {\r\n      newUrl = new URL(url);\r\n    } else if (url.startsWith(\"/\")) {\r\n      newUrl = new URL(url, location.protocol + \"//\" + location.host);\r\n    } else {\r\n      _alert(ew.language.phrase(\"IncorrectUrl\"));\r\n      return false;\r\n    }\r\n    let params = newUrl.searchParams;\r\n    if (data) params = mergeSearchParams(params, data);\r\n    if (sameText(method, \"post\")) {\r\n      // POST\r\n      const form = f || document.createElement(\"form\");\r\n      form.method = \"post\";\r\n      form.action = url.split(\"?\")[0];\r\n      document.body.appendChild(form);\r\n      params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n      params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n      params.forEach((value, key) => {\r\n        const el = document.createElement(\"input\");\r\n        el.type = \"hidden\";\r\n        el.name = key;\r\n        el.value = ew.sanitize(value);\r\n        form.appendChild(el);\r\n      });\r\n      form.submit();\r\n    } else {\r\n      // GET\r\n      if (f) params = mergeSearchParams(params, $$1(f).serialize());\r\n      window.location = sanitizeUrl(newUrl.toString() + (params.size ? \"?\" + params.toString() : \"\"));\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Show/Hide password\r\n  function togglePassword(e) {\r\n    let $btn = $$1(e.currentTarget),\r\n      $input = $btn.closest(\".input-group\").find(\"input\"),\r\n      $i = $btn.find(\"i\");\r\n    if ($input.attr(\"type\") == \"text\") {\r\n      $input.attr(\"type\", \"password\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    } else if ($input.attr(\"type\") == \"password\") {\r\n      $input.attr(\"type\", \"text\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    }\r\n  }\r\n\r\n  // Re-order chart\r\n  function updateChart(el) {\r\n    let url = new URL(el.form.action),\r\n      $container = $$1(el).closest(\".ew-chart-top, .ew-chart-bottom\"),\r\n      $overlay = $$1(ew.overlayTemplate());\r\n    url.search = $$1(el.form).serialize();\r\n    $container.addClass(\"ew-loading\").append($overlay);\r\n    fetch(url.toString()).then(async response => {\r\n      let $html = $$1(\"<div>\" + (await response.text()) + \"</div>\"),\r\n        $new = $html.find(\".ew-chart-top, .ew-chart-bottom\").filter(\"[data-chart='\" + $container.data(\"chart\") + \"']\"),\r\n        $debug = $html.find(\".ew-debug\");\r\n      if ($new[0]) $container.replaceWith($new);\r\n      if ($debug[0]) $new.next(\".ew-debug\").replaceWith($debug);\r\n    }).finally(() => $container.removeClass(\"ew-loading\").find($overlay).remove());\r\n  }\r\n\r\n  // Check if larger than mediumn screen width (not mobile)\r\n  function isMediumScreen() {\r\n    return window.matchMedia(ew.screenMediaQuery).matches;\r\n  }\r\n\r\n  // Check if mobile\r\n  function isMobile() {\r\n    return ew.IS_MOBILE || !isMediumScreen();\r\n  }\r\n\r\n  /**\r\n   * Refresh page\r\n   *\r\n   * @param {Promise} promise - Promise returned by fetch()\r\n   * @param {string} context - CSS class name of context\r\n   * @returns {Promise}\r\n   */\r\n  function refresh(promise, context) {\r\n    var _context;\r\n    (_context = context) != null ? _context : context = \".ew-card.ew-grid\";\r\n    context = context.startsWith(\".\") || context.startsWith(\"#\") ? context : \".\" + context;\r\n    let target = document.querySelector(context + \", .ew-multi-column-grid, .ew-view-form, .ew-edit-form, .ew-calendar, .ew-dashboard, main.ew-no-record\"),\r\n      dashboard = document.querySelector(\".ew-dashboard\");\r\n    if (!target) return;\r\n    let $overlay = $$1(ew.overlayTemplate()),\r\n      $target = $$1(target).addClass(\"ew-loading\").toggleClass(\"overlay-wrapper\", !target.classList.contains(\"card\")).append($overlay);\r\n    return promise.then(async response => {\r\n      if (!(response instanceof Response)) return response;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      // Handle JSON\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json(),\r\n          validation = result.validation,\r\n          error = getError(result),\r\n          form = target.querySelector(\".ew-form\"),\r\n          f = ew.forms.get(form);\r\n        if (dashboard) {\r\n          // Refresh dashboard items\r\n          for (let key in result) {\r\n            $$1(\"#\" + key).find(\".card-body\").html(''); // Clear content first\r\n            $$1(\"#\" + key).find(\"[data-card-widget='card-refresh']\").CardRefresh('load');\r\n          }\r\n        } else if (f && validation) {\r\n          // Validation errors\r\n          for (let [key, value] of Object.entries(validation)) {\r\n            key = parseInt(key, 10);\r\n            if ($$1.isNumber(key) && $$1.isObject(value)) {\r\n              form.dataset.rowindex = key;\r\n              for (let [fldvar, msg] of Object.entries(value)) f.addCustomError(fldvar, msg, key);\r\n            } else if ($$1.isString(value)) {\r\n              f.addCustomError(key, value);\r\n            }\r\n          }\r\n          f.focus();\r\n        }\r\n        if (error) showToast(error);else if ($$1.isString(result.warningMessage)) showToast(result.warningMessage, \"warning\");else if ($$1.isString(result.message)) showToast(result.message, \"body\");else if ($$1.isString(result.successMessage)) showToast(result.successMessage, \"success\");\r\n        return false; // Return false\r\n      }\r\n      // Handle HTML\r\n      let html = await response.text(),\r\n        url = new URL(response.url),\r\n        selectors = [\".ew-message-dialog\", \".ew-chart-top\", \".ew-chart-bottom\", \".ew-debug .card-body\", \".ew-timer\", \".ew-dashboard\"];\r\n      if (url.searchParams.get(\"layout\") == \"false\") {\r\n        html = \"<div>\" + html + \"</div>\";\r\n        url.searchParams.delete(\"layout\");\r\n      }\r\n      url.searchParams.delete(\"rnd\");\r\n      url.searchParams.delete(\"action\");\r\n      html = getContent(html, true); // Keep scripts\r\n      let $html = $$1(\"<div>\" + html + \"</div>\"); // New HTML\r\n      if (!target.closest(\".ew-dashboard\")) {\r\n        // Not dashboard\r\n        selectors.unshift(\".ew-toolbar\"); // Update toolbar also\r\n        if (samePath(url, currentUrl) && currentUrl.toString() != url.toString())\r\n          // Only update browser URL if same page or view/edit page\r\n          window.history.pushState(null, \"\", url.toString()); // Update browser URL\r\n      }\r\n      if ($html.find(\"main.ew-no-record\")[0] || $target.is(\"main.ew-no-record\")) {\r\n        // New or old HTML contains no records => update <main> element\r\n        selectors = [\".ew-ext-search-form\", \"main\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-view-form\")) {\r\n        // View page\r\n        selectors = [\".ew-view-form\", \".ew-pager\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-edit-form\")) {\r\n        // Edit page\r\n        selectors = [\".ew-edit-form\", \".ew-pager\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-multi-column-grid\")) {\r\n        // Multi-column page\r\n        selectors = [\".ew-ext-search-form\", \".ew-multi-column-grid\", ...selectors];\r\n      } else {\r\n        // List/Report page\r\n        selectors = [\"#ew-filter-list\", \".ew-ext-search-form\", context + \" .card-header\", context + \" .card-body\", context + \" .card-footer\", ...selectors];\r\n      }\r\n      selectors.forEach(selector => $$1(selector).each((i, el) => {\r\n        let $old = $$1(el),\r\n          $new = $html.find(selector).eq(i);\r\n        if ($old[0] && $new[0]) {\r\n          delete el.dataset.isset; // Reset\r\n          $old.html($new.html()); // Replace inner HTML\r\n          $old.attr(\"class\", $new.attr(\"class\")); // Update class name\r\n        }\r\n        if (selector == \".ew-toolbar\") {\r\n          let e = {\r\n            target: el\r\n          };\r\n          initIcons(e);\r\n          initSearchFilters(e);\r\n        } else if (selector == \".ew-ext-search-form\") {\r\n          ew.initForms({\r\n            target: $new[0]\r\n          });\r\n          let $tmpl = $new.find(\"#navbar-basic-search\");\r\n          if ($tmpl[0]) {\r\n            let html = $tmpl.render(null),\r\n              $html = $$1(html),\r\n              $search = $html.find(\"#\" + ew.TABLE_BASIC_SEARCH),\r\n              $searchType = $html.find(\"#\" + ew.TABLE_BASIC_SEARCH_TYPE);\r\n            if ($search.val() != $$1(\"#\" + ew.TABLE_BASIC_SEARCH).val() || $searchType.val() != $$1(\"#\" + ew.TABLE_BASIC_SEARCH_TYPE).val()) $$1(\".nav-item.navbar-basic-search\").replaceWith($html);\r\n          }\r\n          $old.find(\".ew-search-operator .form-select.ew-operator-select\").each((i, el) => searchOperatorChange(el));\r\n        } else if (selector == \".ew-message-dialog\") {\r\n          if (!$new.hasClass(\"d-none\")) $old.html($new.html()); // Replace inline html\r\n        }\r\n      }));\r\n      selectors.filter(selector => selector != \".ew-message-dialog\").forEach(selector => $html.find(selector).remove()); // Remove HTML used (except message)\r\n      removeScript(\"refresh\"); // Remove old scripts\r\n      executeScript($html.html(), \"refresh\"); // Execute scripts, e.g. custom template\r\n      let e = $$1.Event({\r\n        type: \"load.ew\",\r\n        target\r\n      });\r\n      ew.initPage(e);\r\n      target.querySelectorAll(\".btn-group\").forEach(el => {\r\n        var _bootstrap$Tooltip$ge7;\r\n        return (_bootstrap$Tooltip$ge7 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge7.update();\r\n      }); // Update tooltip position or it may obscure other buttons\r\n      $$1(\".toast.show\").toast(\"dispose\"); // Hide toasts\r\n      showMessage({\r\n        target: $html\r\n      }); // Show message, if any\r\n      $document$1.trigger(e);\r\n      $document$1.trigger($$1.Event({\r\n        type: \"refresh.ew\",\r\n        target\r\n      }));\r\n    }).finally(() => $target.removeClass(\"ew-loading\").find($overlay).remove());\r\n  }\r\n\r\n  // Layout\r\n  var _fixLayoutHeightTimer;\r\n\r\n  // Fix layout height\r\n  function fixLayoutHeight() {\r\n    if (_fixLayoutHeightTimer) _fixLayoutHeightTimer.cancel(); // Clear timer\r\n    _fixLayoutHeightTimer = $$1.later(50, null, function () {\r\n      var layout = $body.data(\"lte.layout\");\r\n      if (layout) layout.fixLayoutHeight();\r\n    });\r\n  }\r\n\r\n  // Add user event handlers\r\n  function addEventHandlers(tblVar) {\r\n    let fields = ew.events[tblVar];\r\n    if (fields) {\r\n      for (const [fldVar, events] of Object.entries(fields)) $$1('[data-table=' + tblVar + '][data-field=' + fldVar + ']').on(events);\r\n    }\r\n  }\n\n  var functions = {\n    __proto__: null,\n    AjaxLookup,\n    AutoSuggest,\n    Field,\n    Form,\n    Select2Defaults: Defaults,\n    Select2Utils: Utils,\n    _export,\n    addEventHandlers,\n    addGridRow,\n    addOptionDialogShow,\n    addScript,\n    ajax,\n    alert: _alert,\n    applyTemplate,\n    autoFill,\n    buildUrl,\n    checkByRegEx,\n    checkCreditCard,\n    checkDate,\n    checkEmail,\n    checkEmails,\n    checkGuid,\n    checkInteger,\n    checkNumber,\n    checkPhone,\n    checkRange,\n    checkSsn,\n    checkTime,\n    checkUrl,\n    checkZip,\n    clearDelete,\n    clearError,\n    clearOptions,\n    clearSelected,\n    clickDelete,\n    confirmDelete,\n    convertToBool,\n    copyToClipboard,\n    createFilter,\n    createModalLookup,\n    createSearchParams,\n    createSelect,\n    currentPage,\n    currentUrl,\n    deleteGridRow,\n    deleteSearchParam,\n    disable2FA,\n    displayValue,\n    emailDialogShow,\n    enable2FA,\n    escapeRegExChars,\n    executeScript,\n    export: _export,\n    exportCustom,\n    exportEmail,\n    fetch: _fetch,\n    fieldContainerSelector,\n    fileDownload,\n    filter,\n    fixLayoutHeight,\n    formatCurrency,\n    formatDateTime,\n    formatNumber,\n    formatPercent,\n    formatTimeSpan,\n    forms,\n    getAncestorBy,\n    getApiUrl,\n    getContent,\n    getElement,\n    getElements,\n    getError,\n    getForm,\n    getId,\n    getNumberingSystem,\n    getOptionTexts,\n    getOptionValue,\n    getOptionValues,\n    getOptions,\n    getQueryBuilderFilterInput,\n    getQueryBuilderFilterValidation,\n    getQueryBuilderValueSetter,\n    getSearchParam,\n    getSearchParams,\n    getUserParams,\n    getValue,\n    getchartParams,\n    hasFormData,\n    hasValue,\n    headerCase,\n    htmlDecode,\n    htmlEncode,\n    importDialogShow,\n    initExportLinks,\n    initForms,\n    initIcons,\n    initLightboxes,\n    initMultiSelectCheckboxes,\n    initPage,\n    initPasswordOptions,\n    initPdfObjects,\n    initSearchFilters,\n    initTooltips,\n    inlineAction,\n    isAutoSuggest,\n    isBooleanCheckbox,\n    isFilter,\n    isFunction: isFunction$2,\n    isHidden,\n    isHiddenTextArea,\n    isMaskedPassword,\n    isMediumScreen,\n    isMobile,\n    isModalLookup,\n    isNativeSelectOne,\n    isSelect2,\n    isTextbox,\n    keySelected,\n    lazyLoad,\n    mergeSearchParams,\n    modalDialogHide,\n    modalDialogShow,\n    newOption,\n    onError,\n    opt2FA,\n    parseDate: parseDateTime,\n    parseDateTime,\n    parseJson,\n    parseNumber,\n    parseTime: parseDateTime,\n    parseUrl,\n    prompt: _prompt,\n    random,\n    redirect,\n    refresh,\n    removeScript,\n    removeSpaces,\n    resendOtp,\n    reset2FA,\n    samePath,\n    sameString,\n    sameText,\n    sanitizeUrl,\n    scrollIntoView,\n    searchOperatorChange,\n    selectAll,\n    selectAllKeys,\n    selectKey,\n    selectOption,\n    sendOtp,\n    setActiveUser,\n    setFocus,\n    setInvalid,\n    setLanguage,\n    setLayout,\n    setSearchParam,\n    setSearchParams,\n    setSearchType,\n    setSessionTimer,\n    setValid,\n    setupGrid,\n    setupTable,\n    showBackupCodes,\n    showDrillDown,\n    showMessage,\n    showToast,\n    sort,\n    stripScript,\n    submitAction,\n    toast,\n    toggleChat,\n    toggleGroup,\n    toggleLayout,\n    togglePassword,\n    toggleSearchOperator,\n    tooltip,\n    updateChart,\n    updateDropdownPosition,\n    updateOptions,\n    updateSelected,\n    upload,\n    valueChanged,\n    valueSeparator\n  };\n\n  /**\r\n   * Create FullCalendar object\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @param {Object} options - Calendar options\r\n   * @param {Object} options.fullCalendarOptions - FullCalendar options\r\n   * @param {Object} options.eventPopoverOptions - Event popover options\r\n   * @param {HTMLElement} dropdown - HTML element\r\n   * @returns calendar object\r\n   */\r\n  function fullCalendar(el, options, dropdown) {\r\n    let {\r\n        ajax,\r\n        updateTable,\r\n        eventFields,\r\n        addUrl,\r\n        viewUrl,\r\n        editUrl,\r\n        deleteUrl,\r\n        copyUrl,\r\n        fullCalendarOptions,\r\n        eventPopoverOptions\r\n      } = options,\r\n      calendar;\r\n\r\n    // Remove addUrl in options\r\n    delete options.addUrl;\r\n\r\n    // Update event from server side JSON response\r\n    let processJson = data => {\r\n      //console.log(result);\r\n      let convertValue = (key, value) => {\r\n        let match;\r\n        if (typeof value == \"string\" && (match = value.match(/^(\\d{4}-\\d{2}-\\d{2}) (\\d{2}:\\d{2}:\\d{2})/)))\r\n          // Make sure ISO date\r\n          return match[1] + \"T\" + match[2];\r\n        if (key == \"allDay\")\r\n          // Make sure Boolean\r\n          return ew.convertToBool(value);else if (key == \"url\" && !value) return \"\"; // Make sure not null\r\n        else if (key == \"display\" && !value) return \"auto\"; // Make sure not null\r\n        else if (key == \"classNames\" && value && $$1.isString(value))\r\n          // Make sure return as array\r\n          return value.replace(/\\s+/g, \" \").split(\" \");else if (key == \"classNames\" && !value)\r\n          // Make sure return as array\r\n          return [\"\"];else if (key == \"groupId\" && !value)\r\n          // Make sure return as stringy\r\n          return \"\";else if (key == \"description\" && !value) return \"\"; // Make sure not null\r\n        else return value;\r\n      };\r\n      if (data.success) {\r\n        let action = data.action,\r\n          events = data[updateTable];\r\n        if (!Array.isArray(events)) events = [events];\r\n        for (let event of events) {\r\n          for (let [key, name] of Object.entries(eventFields)) {\r\n            // Normalize keys in event\r\n            if (key != name && name !== null && name in event) {\r\n              event[key] = event[name];\r\n              delete event[name];\r\n            }\r\n          }\r\n          if (action == ew.API_DELETE_ACTION) {\r\n            var _calendar$getEventByI;\r\n            // Remove deleted event\r\n            (_calendar$getEventByI = calendar.getEventById(event.id)) == null || _calendar$getEventByI.remove();\r\n          } else if (action == ew.API_ADD_ACTION) {\r\n            // Add/Copy event\r\n            for (let name in event) {\r\n              // Check new properties\r\n              let key = Object.keys(eventFields).find(key => key === name),\r\n                value = event[name];\r\n              if (key && value !== undefined)\r\n                // Value can be null\r\n                event[key] = convertValue(key, value); // Convert value\r\n            }\r\n            calendar.addEvent(event);\r\n          } else {\r\n            // Update event\r\n            let curEvent = calendar.getEventById(event.id);\r\n            let groupId = event.groupId;\r\n            for (let name in event) {\r\n              // Update properties\r\n              let key = Object.keys(eventFields).find(key => key === name),\r\n                value = convertValue(key, event[name]);\r\n              if (key && value !== undefined) {\r\n                // Value can be null\r\n                value = convertValue(key, value); // Convert value\r\n                if (key == \"start\") curEvent.setStart(value);else if (key == \"end\") curEvent.setEnd(value);else if (key == \"allDay\") curEvent.setAllDay(value);else if (key == \"description\") curEvent.setExtendedProp(key, value);else if (key != \"id\" && !groupId)\r\n                  // setProp will change all related events, https://fullcalendar.io/docs/Event-setProp\r\n                  curEvent.setProp(key, value);\r\n              } else if (value) {\r\n                curEvent.setExtendedProp(name, value);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    // Process event\r\n    let processEvent = info => {\r\n      let event = info.event,\r\n        events = [event, ...info.relatedEvents],\r\n        apiAction = event.id ? ew.API_EDIT_ACTION : ew.API_ADD_ACTION;\r\n      events.forEach(event => processRequest(event, apiAction).then(data => {\r\n        if (!data.success) {\r\n          // Revert and show error message if not success\r\n          if (data.failureMessage) ew.alert(data.failureMessage);\r\n          info.revert();\r\n        } else {\r\n          // Update event\r\n          processJson(data);\r\n        }\r\n      }).catch(err => {\r\n        // Revert if error\r\n        console.log(err);\r\n        info.revert();\r\n      }));\r\n    };\r\n\r\n    // Process request\r\n    let processRequest = (event, apiAction) => new Promise((resolve, reject) => {\r\n      // Set up post data\r\n      let obj = event.toPlainObject({\r\n          collapseExtendedProps: true\r\n        }),\r\n        data = {};\r\n      // Event fields\r\n      for (let [key, name] of Object.entries(eventFields)) {\r\n        if (key in obj) {\r\n          let val = obj[key];\r\n          name || (name = key);\r\n          if (val instanceof Date)\r\n            // Handle date field, need to convert to ISO string\r\n            val = val.toISOString().slice(0, -5).replace(/T/, \" \"); // Assume UTC\r\n          else if (typeof val == \"string\" && val.match(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/)) val = val.substring(0, 19).replace(/T/, \" \");else if (typeof val === \"boolean\")\r\n            // Handle boolean field\r\n            val = val ? \"1\" : \"0\";else if (key == \"classNames\") val = Array.isArray(val) ? val.join(\" \") : val; // Convert array to string\r\n          data[name] = val;\r\n          delete obj[key];\r\n        }\r\n      }\r\n      data = {\r\n        ...data,\r\n        ...obj\r\n      };\r\n      // Post to Event Table add/edit/delete API\r\n      let apiUrl = apiAction == ew.API_ADD_ACTION ? ew.getApiUrl([apiAction, updateTable]) : ew.getApiUrl([apiAction, updateTable, event.id]);\r\n      $$1.post(apiUrl, data, data => resolve(data)).fail(err => reject(err));\r\n    });\r\n\r\n    // Get field parameter\r\n    let getFldParm = name => Object.keys(currentTable.fields).find(key => currentTable.fields[key].name == name);\r\n\r\n    // Add menu ID to URL\r\n    let urlAddId = (url, id) => {\r\n      let ar = url.split(\"?\");\r\n      ar[0] += id ? (!ar[0].endsWith(\"/\") ? \"/\" : \"\") + id : \"\";\r\n      return ar.join(\"?\");\r\n    };\r\n\r\n    // Add/Copy event\r\n    let addEventDialogShow = data => {\r\n      var _data$view;\r\n      let url = addUrl,\r\n        params = new URLSearchParams(),\r\n        viewType = (_data$view = data.view) == null ? void 0 : _data$view.type;\r\n      if ($$1.isObject(data) && (data.startStr || data.endStr)) {\r\n        let startFld = getFldParm(eventFields[\"start\"]),\r\n          endFld = getFldParm(eventFields[\"end\"]),\r\n          allDayFld = getFldParm(eventFields[\"allDay\"]);\r\n        if (startFld && data.startStr) params.set(startFld, data.startStr);\r\n        if (endFld && data.endStr) params.set(endFld, data.endStr);\r\n        if (allDayFld && [\"timeGridWeek\", \"timeGridDay\"].includes(viewType))\r\n          // Set allDay for week/day view\r\n          params.set(allDayFld, data.allDay ? \"1\" : \"0\");\r\n      }\r\n      if ($$1.isString(data) && data.match(/^\\d+$/))\r\n        // Copy\r\n        url = urlAddId(url, data);\r\n      let qs = params.toString();\r\n      url += qs ? \"?\" + qs : \"\";\r\n      ew.modalDialogShow({\r\n        url: url,\r\n        callback: ajax ? processJson : null,\r\n        json: ajax,\r\n        btn: ew.language.phrase(\"AddBtn\"),\r\n        caption: ew.language.phrase(\"AddLink\")\r\n      });\r\n    };\r\n\r\n    // View event\r\n    let viewEventDialogShow = id => ew.modalDialogShow({\r\n      url: urlAddId(viewUrl, id),\r\n      callback: ajax ? processJson : null,\r\n      json: ajax,\r\n      btn: null,\r\n      caption: ew.language.phrase(\"ViewLink\")\r\n    });\r\n\r\n    // Edit event\r\n    let editEventDialogShow = id => ew.modalDialogShow({\r\n      url: urlAddId(editUrl, id),\r\n      callback: ajax ? processJson : null,\r\n      json: ajax,\r\n      btn: null,\r\n      caption: ew.language.phrase(\"EditLink\")\r\n    });\r\n\r\n    // Delete event\r\n    let deleteEvent = id => ew.prompt(ew.language.phrase(\"DeleteEventConfirm\"), result => {\r\n      if (result) ew.modalDialogShow({\r\n        url: ew.setSearchParams(urlAddId(deleteUrl, id), {\r\n          action: \"delete\"\r\n        }),\r\n        callback: ajax ? processJson : null,\r\n        json: ajax\r\n      });\r\n    });\r\n\r\n    // Add custom add button\r\n    if (addUrl) {\r\n      fullCalendarOptions.customButtons = Object.assign(fullCalendarOptions.customButtons || {}, {\r\n        add: {\r\n          text: ew.language.phrase(\"AddEvent\"),\r\n          click: addEventDialogShow\r\n        }\r\n      });\r\n      fullCalendarOptions.headerToolbar.start += \" add\";\r\n    }\r\n\r\n    // Get or create popover\r\n    let getOrCreatePopover = info => {\r\n      let config = {\r\n        ...bootstrap.Popover.Default,\r\n        ...eventPopoverOptions,\r\n        trigger: \"manual\" // Set trigger to \"manual\"\r\n      };\r\n      let popover = bootstrap.Popover.getOrCreateInstance(info.el, config),\r\n        template = Array.from(document.querySelectorAll(\"script[data-name='event-popover']\")).sort((a, b) => {\r\n          a = parseInt(a.dataset.seq, 10) || 0;\r\n          b = parseInt(b.dataset.seq, 10) || 0;\r\n          return a - b;\r\n        }).shift(),\r\n        tmpl = $$1.templates(template.text);\r\n      info.event.setExtendedProp(\"timeSpan\", ew.formatTimeSpan(info.event.start, info.event.end, info.event.allDay)); // Add extended property \"timeSpan\"\r\n      let content = tmpl.render(info.event).trim();\r\n      if (content) {\r\n        var _Array$from$find$repl, _Array$from$find;\r\n        let popoverClass = (_Array$from$find$repl = (_Array$from$find = Array.from(info.el.classList.values()).find(name => name.match(/^event-([\\w+]+)\\b/))) == null ? void 0 : _Array$from$find.replace(/^event-/, \"popover-\")) != null ? _Array$from$find$repl : \"popover-default\";\r\n        popover._templateFactory = null; // Make sure popover create tip again from _config\r\n        popover._config.title = info.event.title;\r\n        popover._config.content = content;\r\n        popover._config.customClass += (popover._config.customClass ? \" \" : \"\") + \"ew-event-popover \" + popoverClass;\r\n        return popover;\r\n      }\r\n      return null;\r\n    };\r\n\r\n    // Context menu\r\n    let generateGetBoundingClientRect = info => {\r\n        let x = 0,\r\n          y = 0;\r\n        if (info) {\r\n          let rect = info.el.getBoundingClientRect(),\r\n            evt = info.jsEvent;\r\n          x = rect.left + evt.offsetX, y = rect.top + evt.offsetY;\r\n        }\r\n        return () => ({\r\n          width: 0,\r\n          height: 0,\r\n          top: y,\r\n          right: x,\r\n          bottom: y,\r\n          left: x\r\n        });\r\n      },\r\n      virtualElement = {\r\n        getBoundingClientRect: generateGetBoundingClientRect()\r\n      },\r\n      bsDropdown;\r\n    if (dropdown && options.useContextMenu && (viewUrl || editUrl || addUrl && copyUrl || deleteUrl)) {\r\n      dropdown.dataset.bsToggle = \"dropdown\"; // For clearing dropdown menu\r\n      document.addEventListener(\"keydown\", event => !event.button || event.key !== \"Escape\" || bootstrap.Dropdown.clearMenus());\r\n      bsDropdown = bootstrap.Dropdown.getOrCreateInstance(dropdown, {\r\n        reference: virtualElement\r\n      });\r\n      bsDropdown._menu.querySelectorAll(\".dropdown-item\").forEach(item => item.addEventListener(\"click\", e => {\r\n        let dataset = e.currentTarget.dataset,\r\n          action = dataset.action,\r\n          id = dataset.eventId;\r\n        if (action && id) {\r\n          if (action == \"view\" && viewUrl) viewEventDialogShow(id);else if (action == \"edit\" && editUrl) editEventDialogShow(id);else if (action == \"copy\" && addUrl && copyUrl)\r\n            // Copy\r\n            addEventDialogShow(id);else if (action == \"delete\" && deleteUrl) deleteEvent(id);\r\n        }\r\n      }));\r\n    }\r\n\r\n    // Options\r\n    let opts = ew.deepAssign(fullCalendarOptions, {\r\n      // events\r\n      //eventDragStart: info => console.log(info),\r\n      //eventDragStop: info => console.log(info),\r\n      drop: function (info) {\r\n        // Remove element\r\n        let checkbox = document.getElementById(\"remove-event\");\r\n        if (checkbox.checked) info.draggedEl.parentNode.removeChild(info.draggedEl);\r\n      },\r\n      select: event => addUrl && addEventDialogShow(event),\r\n      eventReceive: processEvent,\r\n      // Event created\r\n      eventDragStart: info => {\r\n        var _bootstrap$Popover$ge;\r\n        return (_bootstrap$Popover$ge = bootstrap.Popover.getInstance(info.el)) == null ? void 0 : _bootstrap$Popover$ge.hide();\r\n      },\r\n      eventDrop: processEvent,\r\n      // Event changed (Drag / Drop)\r\n      eventResize: processEvent,\r\n      // Event changed (Resize)\r\n      eventClick: info => {\r\n        // Event click\r\n        info.jsEvent.preventDefault();\r\n        if (info.jsEvent.button == 2) {\r\n          // Right click\r\n          let allowed = info.event.extendedProps[\"_view\"] || info.event.extendedProps[\"_edit\"] || info.event.extendedProps[\"_copy\"] || info.event.extendedProps[\"_delete\"];\r\n          if (bsDropdown && allowed) {\r\n            var _bootstrap$Popover$ge2;\r\n            (_bootstrap$Popover$ge2 = bootstrap.Popover.getInstance(info.el)) == null || _bootstrap$Popover$ge2.hide();\r\n            bsDropdown.hide();\r\n            bsDropdown._menu.querySelectorAll(\".dropdown-item\").forEach(item => {\r\n              item.dataset.eventId = info.event.id;\r\n              item.classList.toggle(\"d-none\", !options[item.dataset.action + \"Url\"] || !info.event.extendedProps[\"_\" + item.dataset.action]); // Check event permission\r\n            });\r\n            if (bsDropdown._menu.querySelectorAll(\".dropdown-item:not(.d-done)\").length) {\r\n              virtualElement.getBoundingClientRect = generateGetBoundingClientRect(info);\r\n              bsDropdown.show();\r\n            }\r\n          }\r\n        } else if (info.event.url) {\r\n          window.open(info.event.url);\r\n        } else if (options.usePopover && eventPopoverOptions.trigger.match(/\\bclick\\b/)) {\r\n          var _getOrCreatePopover;\r\n          (_getOrCreatePopover = getOrCreatePopover(info)) == null || _getOrCreatePopover.toggle();\r\n        } else if (options.showViewPageOnEventClick) {\r\n          viewEventDialogShow(info.event.id);\r\n        }\r\n      },\r\n      eventMouseEnter: info => {\r\n        var _bsDropdown, _getOrCreatePopover2;\r\n        if ((_bsDropdown = bsDropdown) != null && _bsDropdown._isShown(bsDropdown._menu) /* && bsDropdown._element.dataset.eventId == info.event.id*/) return;\r\n        if (options.popoverViews.includes(info.view.type) && options.usePopover && eventPopoverOptions.trigger.match(/\\bhover\\b/)) (_getOrCreatePopover2 = getOrCreatePopover(info)) == null || _getOrCreatePopover2.show();\r\n      },\r\n      eventMouseLeave: info => {\r\n        var _bsDropdown2, _bootstrap$Popover$ge3;\r\n        if ((_bsDropdown2 = bsDropdown) != null && _bsDropdown2._isShown(bsDropdown._menu) /* && bsDropdown._element.dataset.eventId == info.event.id*/) return;\r\n        if (options.popoverViews.includes(info.view.type) && options.usePopover && eventPopoverOptions.trigger.match(/\\bhover\\b/)) (_bootstrap$Popover$ge3 = bootstrap.Popover.getInstance(info.el)) == null || _bootstrap$Popover$ge3.hide();\r\n      }\r\n    });\r\n\r\n    // Trigger \"calendar\" event\r\n    let args = {\r\n      element: el,\r\n      options: opts\r\n    };\r\n    $$1(document).trigger(\"calendar\", [args]);\r\n\r\n    // Create calendar\r\n    calendar = new window.FullCalendar.Calendar(el, args.options);\r\n\r\n    // Return calendar\r\n    return calendar;\r\n  }\n\n  var fullCalendar$1 = {\n    __proto__: null,\n    fullCalendar\n  };\n\n  /**\r\n   * Show dialog for push notification\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {string} args.url - URL of web push API\r\n   * @param {MouseEvent} args.evt - Mouse event\r\n   * @returns false\r\n   */\r\n  async function pushNotificationDialogShow(args) {\r\n    let $dlg = ew$1.pushDialog || $$1(\"#ew-push-notification-dialog\").on(\"shown.bs.modal\", e => setTimeout(() => {\r\n      var _e$target$querySelect;\r\n      return (_e$target$querySelect = e.target.querySelector(\".modal-body .form-control\")) == null ? void 0 : _e$target$querySelect.focus();\r\n    }, 200)).on(\"click\", \".modal-footer .btn-primary\", function (e) {\r\n      var _$$closest$find$data;\r\n      e.preventDefault();\r\n      if ((_$$closest$find$data = $$1(this).closest(\".modal\").find(\".modal-body form\").data(\"form\")) != null && _$$closest$find$data.submit()) $dlg.modal(\"hide\");\r\n    });\r\n    if (!$dlg[0]) {\r\n      console.log(\"DIV #ew-push-notificatoin-dialog not found\");\r\n      return false;\r\n    }\r\n    if (!args.url) {\r\n      // No API URL\r\n      console.log(\"Missing URL of Web Push API\");\r\n      return false;\r\n    }\r\n    let target = args.evt.currentTarget,\r\n      // Button\r\n      $form = $$1(target.form),\r\n      $f = $dlg.find(\".modal-body form\"),\r\n      frm = $f.data(\"form\");\r\n    $f.data(\"all\", false); // Reset\r\n    if (!$form.find(\"input[name='key_m[]']:checked\")[0]) {\r\n      // No keys selected\r\n      let result = await ew$1.prompt(ew$1.language.phrase(\"SendPushNotificationsToAll\"), bool => bool); // Callback returns result as boolean\r\n      $f.data(\"all\", result);\r\n      if (!result)\r\n        // Cancelled\r\n        return;\r\n    }\r\n    if (!frm) {\r\n      frm = new ew$1.FormBuilder().setId($f.attr(\"id\")).addFields([[\"title\", ew$1.Validators.required(ew$1.language.phrase(\"PushNotificationFormTitle\"))], [\"body\", ew$1.Validators.required(ew$1.language.phrase(\"PushNotificationFormBody\"))]]).setValidate(function () {\r\n        return this.validateFields();\r\n      }).setSubmit(function () {\r\n        if (!this.validate()) return false;\r\n        let data = [$f.serialize(), $f.data(\"all\") ? \"\" : $form.find(\"input[name='key_m[]']:checked\").serialize()].join(\"&\");\r\n        $$1.post(args.url, data, result => {\r\n          var _result$error;\r\n          if (Array.isArray(result)) {\r\n            let successes = result.reduce((acc, cur) => acc + (cur.success ? 1 : 0), 0),\r\n              failures = result.length - successes;\r\n            if (successes > 0 && failures == 0) ew$1.alert(sprintf(ew$1.language.phrase(\"PushNotificationSuccess\"), successes), \"success\");else if (successes == 0 && failures > 0) ew$1.alert(sprintf(ew$1.language.phrase(\"PushNotificationFailure\"), failures));else if (successes == 0 && failures == 0) ew$1.alert(ew$1.language.phrase(\"NoSubscriptions\"), \"primary\");else ew$1.alert(sprintf(ew$1.language.phrase(\"PushNotificationSent\"), successes, failures), \"primary\");\r\n          } else if (result != null && (_result$error = result.error) != null && _result$error.description) {\r\n            ew$1.alert(result.error.description);\r\n          }\r\n        });\r\n        return true;\r\n      }).build();\r\n      $f.data(\"form\", frm);\r\n    }\r\n    ew$1.pushDialog = $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr || target.dataset.caption).end().modal(\"show\");\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Check if push notification and service workers are supported by browser\r\n   */\r\n  function isPushNotificationSupported() {\r\n    return \"serviceWorker\" in navigator && \"PushManager\" in window;\r\n  }\r\n\r\n  /**\r\n   * Base 64 to Unit8Array\r\n   */\r\n  function urlBase64ToUint8Array(base64String) {\r\n    const padding = \"=\".repeat((4 - base64String.length % 4) % 4),\r\n      base64 = (base64String + padding).replace(/\\-/g, \"+\").replace(/_/g, \"/\"),\r\n      rawData = window.atob(base64),\r\n      outputArray = new Uint8Array(rawData.length);\r\n    for (let i = 0; i < rawData.length; ++i) outputArray[i] = rawData.charCodeAt(i);\r\n    return outputArray;\r\n  }\r\n\r\n  /**\r\n   * Send subscription to server\r\n   */\r\n  async function sendSubscriptionToServer(subscription, url) {\r\n    const key = subscription.getKey(\"p256dh\"),\r\n      token = subscription.getKey(\"auth\"),\r\n      contentEncoding = (PushManager.supportedContentEncodings || [\"aesgcm\"])[0];\r\n    let formData = new FormData();\r\n    formData.set(\"endpoint\", subscription.endpoint);\r\n    formData.set(\"publicKey\", key ? btoa(String.fromCharCode.apply(null, new Uint8Array(key))) : null);\r\n    formData.set(\"authToken\", token ? btoa(String.fromCharCode.apply(null, new Uint8Array(token))) : null);\r\n    formData.set(\"contentEncoding\", contentEncoding);\r\n    let response = await ew$1.fetch(url, {\r\n      method: \"POST\",\r\n      body: formData\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  /**\r\n   * Create subscription and send to server\r\n   * @returns Promise that resolves to a PushSubscription object\r\n   */\r\n  async function createSubscription() {\r\n    var _result$error2;\r\n    let url = ew$1.getApiUrl([ew$1.API_PUSH_NOTIFICATION_ACTION, ew$1.API_PUSH_NOTIFICATION_SUBSCRIBE]),\r\n      serviceWorkerReg = await navigator.serviceWorker.ready,\r\n      subscription = await serviceWorkerReg.pushManager.subscribe({\r\n        userVisibleOnly: true,\r\n        applicationServerKey: urlBase64ToUint8Array(ew$1.PUSH_SERVER_PUBLIC_KEY)\r\n      }),\r\n      result = await sendSubscriptionToServer(subscription, url);\r\n    if (result != null && (_result$error2 = result.error) != null && _result$error2.description) ew$1.alert(result.error.description);\r\n    return result.success ? subscription : null;\r\n  }\r\n\r\n  /**\r\n   * Get subscription\r\n   */\r\n  async function getSubscription() {\r\n    let serviceWorkerReg = await navigator.serviceWorker.ready;\r\n    return serviceWorkerReg.pushManager.getSubscription();\r\n  }\r\n\r\n  /**\r\n   * Set subscription\r\n   * @param {PushSubscription} subscription\r\n   */\r\n  function setSubscription(subscription) {\r\n    let $btn = $$1(\"#subscribe-notification\").toggleClass(\"ew-enable-notification\", !subscription).removeClass(\"disabled\");\r\n    $btn.find(\"i\").toggleClass(\"fa-bell\", !subscription).toggleClass(\"fa-bell-slash\", !!subscription);\r\n    let inst = bootstrap.Tooltip.getInstance($btn[0]);\r\n    if (inst) inst._config.title = ew$1.language.phrase(subscription ? \"DisableNotifications\" : \"EnableNotifications\");\r\n  }\r\n\r\n  /**\r\n   * Subscribe notifications\r\n   *\r\n   * @returns false\r\n   */\r\n  async function subscribeNotification() {\r\n    if (Notification.permission !== \"denied\" && !ew$1.IS_SYS_ADMIN) {\r\n      // Support non system administrator\r\n      document.body.style.cursor = \"wait\";\r\n      try {\r\n        if (Notification.permission === \"granted\") {\r\n          var _await$getSubscriptio, _document$getElementB;\r\n          setSubscription((_await$getSubscriptio = await getSubscription()) != null ? _await$getSubscriptio : await createSubscription());\r\n          if (!((_document$getElementB = document.getElementById(\"subscribe-notification\")) != null && _document$getElementB.classList.contains(\"ew-enable-notification\"))) ew$1.showToast(ew$1.language.phrase(\"NotificationsEnabled\"), \"success\");\r\n        } else if (Notification.permission === \"default\" && (await Notification.requestPermission()) == \"granted\") {\r\n          var _document$getElementB2;\r\n          setSubscription(await createSubscription());\r\n          if (!((_document$getElementB2 = document.getElementById(\"subscribe-notification\")) != null && _document$getElementB2.classList.contains(\"ew-enable-notification\"))) ew$1.showToast(ew$1.language.phrase(\"NotificationsEnabled\"), \"success\");\r\n        }\r\n      } catch (e) {\r\n        ew$1.alert(e);\r\n      } finally {\r\n        document.body.style.cursor = \"default\";\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Check subscription\r\n   *\r\n   * @returns true\r\n   */\r\n  async function checkSubscription() {\r\n    $$1(\"#subscribe-notification\").tooltip();\r\n    if (Notification.permission == \"granted\") setSubscription(await getSubscription());else setSubscription(null);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Unsubscribe notifications\r\n   *\r\n   * @returns false\r\n   */\r\n  async function unsubscribeNotification() {\r\n    ew$1.prompt({\r\n      html: ew$1.language.phrase(\"DisableNotificationsConfirm\")\r\n    }, async res => {\r\n      if (!res) return;\r\n      document.body.style.cursor = \"wait\";\r\n      try {\r\n        var _result$error3;\r\n        let subscription = await getSubscription();\r\n        await subscription.unsubscribe();\r\n        let url = ew$1.getApiUrl([ew$1.API_PUSH_NOTIFICATION_ACTION, ew$1.API_PUSH_NOTIFICATION_DELETE]),\r\n          result = await sendSubscriptionToServer(subscription, url); // Delete subscription\r\n        if (result != null && (_result$error3 = result.error) != null && _result$error3.description) {\r\n          ew$1.alert(result.error.description);\r\n          return false;\r\n        }\r\n        if (result.success) {\r\n          // No subscription or deleted successfully\r\n          setSubscription(null);\r\n          ew$1.showToast(ew$1.language.phrase(\"NotificationsDisabled\"), \"success\");\r\n        }\r\n      } catch (e) {\r\n        ew$1.alert(e);\r\n      } finally {\r\n        document.body.style.cursor = \"default\";\r\n      }\r\n    });\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Init web push notifications\r\n   */\r\n  loadjs.ready(\"foot\", () => {\r\n    if (ew$1.PUSH_SERVER_PUBLIC_KEY && isPushNotificationSupported()) {\r\n      navigator.serviceWorker.register(ew$1.PATH_BASE + ew$1.SERVICE_WORKER, {\r\n        scope: ew$1.PATH_BASE\r\n      }).then(() => {\r\n        checkSubscription();\r\n        $$1(\"#subscribe-notification\").on(\"click\", function () {\r\n          this.classList.contains(\"ew-enable-notification\") ? subscribeNotification() : unsubscribeNotification();\r\n        });\r\n      }).catch(e => console.log(e));\r\n    } else {\r\n      $$1(\"#subscribe-notification\").addClass(\"d-none\");\r\n    }\r\n  });\n\n  var webpush = {\n    __proto__: null,\n    checkSubscription,\n    isPushNotificationSupported,\n    pushNotificationDialogShow,\n    subscribeNotification,\n    unsubscribeNotification\n  };\n\n  /**\r\n   * Map styles\r\n   */\r\n\r\n  /**\r\n   * Show map\r\n   * @param {Object} data - Data of map\r\n   */\r\n  function show(data) {\r\n    if (data.inited)\r\n      // Already initiated\r\n      return true;\r\n    let latlng = data.latlng,\r\n      useSingleMap = data.useSingleMap,\r\n      showAllMarkers = data.showAllMarkers,\r\n      useMarkerClusterer = data.useMarkerClusterer,\r\n      $div = $$1(\"#\" + data.id + \".\" + (useSingleMap ? \"ew-single-map\" : \"ew-map\")),\r\n      ext = ew.maps[data.ext];\r\n    if (useSingleMap) {\r\n      // Use single map\r\n      let id = data.id.replace(/^mp\\d*_/, \"mp_\"); // Remove index from \"m<n>_\" prefix\r\n      $div = $$1(\"#\" + id);\r\n      if (!$div[0]) {\r\n        $div = $$1(\"<div></div>\").attr(\"id\", id).addClass(\"ew-single-map\").height(data.singleMapHeight); // Create new $div for single map\r\n        if (data.singleMapWidth) $div.width(data.singleMapWidth);\r\n        $$1(\".ew-grid, .ew-multi-column-grid\").first()[data.showMapOnTop ? \"before\" : \"after\"]($div); // Insert before/after table\r\n        data.map = ext.createMap($div[0], data);\r\n        $div.data(\"map\", data.map);\r\n        $div.data(\"ext\", data.ext);\r\n        $div.data(\"bounds\", showAllMarkers ? ext.createBounds() : null);\r\n        $div.data(\"markerClusterer\", useMarkerClusterer ? ext.createMarkerClusterer(data) : null);\r\n      }\r\n      data = Object.assign(data, $div.data()); // Merge data\r\n    } else {\r\n      if (!latlng) {\r\n        // Location not found\r\n        $div.addClass(\"d-none\").html(data.status);\r\n        return true;\r\n      }\r\n      $div.next(\".ew-map-value\").addClass(\"d-none\"); // Hide view value\r\n      if (!data.map) data.map = ext.createMap($div[0], data);\r\n    }\r\n    data.marker = ext.createMarker(data); // Create marker\r\n    data.inited = true; // Initiated\r\n    $$1(document).trigger(\"map\", [data]);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * All maps initiated\r\n   */\r\n  function done() {\r\n    $$1(\".ew-single-map\").each(function () {\r\n      let data = $$1(this).data();\r\n      ew.maps[data.ext].fitBounds(data); // Fit bounds\r\n    });\r\n    $$1(document).trigger(\"maps\");\r\n  }\r\n\r\n  /**\r\n   * Init maps\r\n   * @param {string} [ext] - Map type, e.g. 'googlemaps', 'leaflet'\r\n   * @returns\r\n   */\r\n  function init(ext) {\r\n    let promises = $$1(\".ew-map\").filter(function () {\r\n      return !ext || $$1(this).data(\"ext\") == ext;\r\n    }).map(function (i) {\r\n      let data = $$1(this).data();\r\n      if (data.inited)\r\n        // Already initiated\r\n        return show(data);\r\n      data.id = this.id; // Get ID\r\n      data.address = (data.address || \"\").trim();\r\n      if (data.address) {\r\n        let geocodingDelay = data.geocodingDelay;\r\n        return new Promise(resolve => {\r\n          $$1.later(i * geocodingDelay, null, () => {\r\n            // Set a timer for better performance\r\n            resolve(ew.maps[data.ext].geocode(data).then(latlng => {\r\n              data.latlng = latlng;\r\n            }).catch(status => {\r\n              data.status = status;\r\n            }).finally(() => show(data)));\r\n          });\r\n        });\r\n      } else {\r\n        let latitude = data.latitude,\r\n          longitude = data.longitude,\r\n          coordinate = data.coordinate;\r\n        if (coordinate) {\r\n          let m = coordinate.match(/[-.\\d]+/g);\r\n          if (Array.isArray(m) && m.length == 2) {\r\n            latitude = parseFloat(m[0]);\r\n            longitude = parseFloat(m[1]);\r\n          }\r\n        }\r\n        if (latitude && !isNaN(latitude) && longitude && !isNaN(longitude)) data.latlng = ew.maps[data.ext].createLatLng(latitude, longitude);\r\n        return show(data);\r\n      }\r\n    }).get();\r\n    return Promise.all(promises).then(done);\r\n  }\r\n\r\n  /**\r\n   * Init\r\n   */\r\n  $$1(function () {\r\n    $$1(\"#ew-modal-dialog\").on(\"load.ew\", () => init());\r\n    $$1(document).on(\"preview.ew\", () => init());\r\n  });\n\n  var maps = {\n    __proto__: null,\n    done,\n    init,\n    show\n  };\n\n  var _ew$UA_PARSER$getDevi, _ew$UA_PARSER$getBrow;\r\n  ew.UA_PARSER = new UAParser(window.navigator.userAgent);\r\n  ew.IS_MOBILE = ((_ew$UA_PARSER$getDevi = ew.UA_PARSER.getDevice()) == null ? void 0 : _ew$UA_PARSER$getDevi.type) == \"mobile\";\r\n  ew.BROWSER_NAME = (_ew$UA_PARSER$getBrow = ew.UA_PARSER.getBrowser()) == null ? void 0 : _ew$UA_PARSER$getBrow.name;\r\n\r\n  // Charts\r\n  window.exportCharts = {}; // Per window\r\n\r\n  // Extend\r\n  Object.assign(ew, {\r\n    MultiPage,\r\n    Form,\r\n    FormBuilder,\r\n    Validators,\r\n    maps\r\n  }, functions, webpush, fullCalendar$1);\r\n  var $document = $$1(document);\r\n\r\n  // Init document\r\n  loadjs.ready(\"load\", function () {\r\n    var _$$offset;\r\n    $$1.views.settings.debugMode(ew.DEBUG);\r\n    ew.setSessionTimer();\r\n    ew.initPage();\r\n    $$1(\"#ew-modal-dialog\").on(\"load.ew\", ew.initPage);\r\n    $$1(\"#ew-add-opt-dialog\").on(\"load.ew\", ew.initPage);\r\n    let hash = ew.currentUrl.searchParams.get(\"hash\"),\r\n      scrollTop = (_$$offset = $$1(\"#\" + hash).offset()) == null ? void 0 : _$$offset.top;\r\n    if (scrollTop) $$1(\"html, body\").animate({\r\n      scrollTop\r\n    }, 800);\r\n    $document.trigger(\"load.ew\");\r\n  });\r\n\r\n  // Default \"addoption\" event (fired before adding new option to selection list)\r\n  $document.on(\"addoption\", function (e, args) {\r\n    let row = args.data,\r\n      // New row to be validated\r\n      arp = args.parents; // Parent field values\r\n    for (let i = 0, cnt = arp.length; i < cnt; i++) {\r\n      // Iterate parent values\r\n      let p = arp[i];\r\n      if (!p.length)\r\n        // Empty parent\r\n        //continue; // Allow\r\n        return args.valid = false; // Disallow\r\n      let val = row[\"ff\" + (i > 0 ? i + 1 : \"\")]; // Filter fields start from the 6th field\r\n      if (!$$1.isUndefined(val) && !p.includes(String(val)))\r\n        // Filter field value not in parent field values\r\n        return args.valid = false; // Returns false if invalid\r\n    }\r\n  });\r\n\r\n  // Click handler for buttons\r\n  $document.on(\"click\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $$1(this).data()),\r\n      action = data.ewAction;\r\n    if (!action) {\r\n      return true;\r\n    } else if (action == \"none\") {\r\n      return false;\r\n    } else if (action == \"redirect\") {\r\n      return ew.redirect(data.url);\r\n    } else if (action == \"reload\") {\r\n      location.reload();\r\n      return false;\r\n    } else if (action == \"submit\") {\r\n      delete data.ewAction;\r\n      return ew.submitAction(e, data);\r\n    } else if (action == \"modal\") {\r\n      e.preventDefault();\r\n      return data.ajax ? ew.inlineAction({\r\n        evt: e,\r\n        ...data\r\n      }) : ew.modalDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"inline\" || action == \"grid\") {\r\n      e.preventDefault();\r\n      return ew.inlineAction({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"export\") {\r\n      return ew.export({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"layout\") {\r\n      return ew.toggleLayout(this);\r\n    } else if (action == \"language\") {\r\n      return ew.setLanguage(this);\r\n    } else if (action == \"active-user\") {\r\n      return ew.setActiveUser(this);\r\n    } else if (action == \"filter\") {\r\n      return ew.filter(e);\r\n    } else if (action == \"sort\") {\r\n      return ew.sort(e, this.dataset);\r\n    } else if (action == \"refresh\") {\r\n      let url = ew.setLayout(this.dataset.url, false);\r\n      if (url && url != \"#\") ew.refresh(fetch(url), this.dataset.context);\r\n      return false;\r\n    } else if (action == \"email\") {\r\n      delete data.ewAction;\r\n      return ew.emailDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"set-action\") {\r\n      this.form.elements[\"action\"].value = data.value;\r\n    } else if (action == \"drilldown\") {\r\n      return ew.showDrillDown(e, this, data.url, data.id, data.hdr);\r\n    } else if (action == \"add-option\") {\r\n      delete data.ewAction;\r\n      return ew.addOptionDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"search-type\") {\r\n      return ew.setSearchType(this);\r\n    } else if (action == \"search-operator\") {\r\n      ew.toggleSearchOperator(e, data.target, data.value);\r\n    } else if (action == \"search-toggle\") {\r\n      let panel = document.getElementById(this.dataset.form + \"_search_panel\");\r\n      if (panel) {\r\n        bootstrap.Collapse.getOrCreateInstance(panel).toggle();\r\n        this.classList.toggle(\"active\");\r\n      }\r\n    } else if (action == \"highlight\") {\r\n      $$1(\"mark.\" + this.dataset.name).toggleClass(\"mark\");\r\n      this.classList.toggle(\"active\");\r\n    } else if (action == \"inline-delete\") {\r\n      return ew.confirmDelete(this);\r\n    } else if (action == \"add-grid-row\") {\r\n      return ew.addGridRow(this);\r\n    } else if (action == \"delete-grid-row\") {\r\n      return ew.deleteGridRow(this, this.dataset.rowindex);\r\n    } else if (action == \"select-all\") {\r\n      ew.selectAll(this);\r\n    } else if (action == \"select-key\") {\r\n      ew.selectKey(e);\r\n    } else if (action == \"select-all-keys\") {\r\n      ew.selectAllKeys(this);\r\n    } else if (action == \"import\") {\r\n      return ew.importDialogShow({\r\n        evt: e,\r\n        hdr: data.hdr\r\n      });\r\n    } else if (action == \"password\") {\r\n      return ew.togglePassword(e);\r\n    } else if (action == \"push\") {\r\n      return ew.pushNotificationDialogShow({\r\n        evt: e,\r\n        url: data.apiUrl\r\n      });\r\n    } else if (action == \"opt-2fa\") {\r\n      return ew.opt2FA(this);\r\n    } else if (action == \"config-2fa\") {\r\n      return ew.enable2FA(data.type);\r\n    } else if (action == \"disable-2fa\") {\r\n      e.stopPropagation();\r\n      return ew.disable2FA(data.type);\r\n    } else if (action == \"reset-2fa\") {\r\n      return ew.reset2FA();\r\n    } else if (action == \"2fa-next\") {\r\n      var _window$$loginWizard;\r\n      (_window$$loginWizard = window.$loginWizard) == null || _window$$loginWizard.smartWizard(\"next\");\r\n      return false;\r\n    } else if (action == \"2fa-prev\") {\r\n      window.$loginWizard.smartWizard(\"prev\");\r\n      return false;\r\n    } else if (action == \"toggle-chat\") {\r\n      return ew.toggleChat(data.value);\r\n    } else if (action == \"send-otp\") {\r\n      return ew.resendOtp(this);\r\n    } else if (action == \"backup-codes\") {\r\n      return ew.showBackupCodes();\r\n    } else if (action == \"scroll-top\") {\r\n      $$1(document).scrollTop($$1('#top').offset().top);\r\n      return false;\r\n    }\r\n  })\r\n  // Change handler for selects\r\n  .on(\"change\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $$1(this).data());\r\n    if (!data.ewAction) return true;\r\n    let actions = data.ewAction.split(\" \").filter(action => !!action);\r\n    for (let action of actions) {\r\n      if (action == \"submit-form\") {\r\n        var _this$form;\r\n        (_this$form = this.form) == null || _this$form.submit();\r\n      } else if (action == \"change-page-size\") {\r\n        let pageSize = ew.sameText(this.value, \"ALL\") ? \"ALL\" : ew.parseNumber(this.value);\r\n        if (ew.convertToBool(data.ajax)) {\r\n          let url = ew.setLayout(this.dataset.url, false) + \"&\" + this.name + \"=\" + pageSize;\r\n          ew.refresh(fetch(url), this.dataset.context);\r\n        } else {\r\n          let url = ew.setSearchParam(this.dataset.url, this.name, pageSize);\r\n          ew.redirect(url);\r\n        }\r\n        return false;\r\n      } else if (action == \"update-options\") {\r\n        ew.updateOptions.call(this);\r\n      } else if (action == \"autofill\") {\r\n        ew.autoFill(this);\r\n      } else if (action == \"search-operator\") {\r\n        return ew.searchOperatorChange(this);\r\n      } else if (action == \"language\") {\r\n        ew.setLanguage(this);\r\n      } else if (action == \"chart-order\") {\r\n        ew.updateChart(this);\r\n      }\r\n    }\r\n  }).on(\"keydown\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $$1(this).data()),\r\n      action = data.ewAction;\r\n    if (action == \"change-page\") {\r\n      // ew-page-number\r\n      if (e.key == \"Enter\") {\r\n        if (ew.convertToBool(data.ajax)) {\r\n          let url = ew.setLayout(this.dataset.url, false) + \"&\" + this.name + \"=\" + ew.parseNumber(this.value);\r\n          ew.refresh(fetch(url), this.dataset.context);\r\n        } else {\r\n          ew.currentUrl.searchParams.set(this.name, ew.parseNumber(this.value));\r\n          window.location = ew.sanitizeUrl(ew.currentUrl.toString());\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n  });\r\n\r\n  // Click handler for row links\r\n  $document.on(\"click\", \".ew-row-link\", e => e.stopPropagation());\r\n\r\n  // Fix z-index of multiple modals\r\n  $document.on(\"show.bs.modal\", \".modal\", function () {\r\n    var zIndex = 1050 + $$1(\".modal:visible\").length;\r\n    $$1(this).css(\"z-index\", zIndex);\r\n    setTimeout(function () {\r\n      $$1(\".modal-backdrop\").not(\".modal-stack\").css(\"z-index\", zIndex - 1).addClass(\"modal-stack\");\r\n    }, 0);\r\n  });\r\n\r\n  // Fix scrolling of multiple modals\r\n  $document.on(\"hidden.bs.modal\", \".modal\", function () {\r\n    $$1(\".modal:visible\").length && $$1(\"body\").addClass(\"modal-open\");\r\n  });\r\n\r\n  // Crop action for jQuery File Upload\r\n  $$1.blueimp.fileupload.prototype.options.processQueue.unshift({\r\n    action: \"cropImage\",\r\n    // Action name\r\n    fileTypes: \"@loadImageFileTypes\",\r\n    // Reuse loadImageFileTypes\r\n    maxFileSize: \"@loadImageMaxFileSize\",\r\n    // Reuse loadImageMaxFileSize\r\n    cropperOptions: \"@\",\r\n    // Use global settings in ewcore.js, see https://github.com/fengyuanchen/cropperjs/blob/e969348d313dafe3416926125b21388cc67cefb1/README.md#options\r\n    cropperCanvasOptions: \"@\",\r\n    // Use global settings in ewcore.js, see https://github.com/fengyuanchen/cropperjs/blob/e969348d313dafe3416926125b21388cc67cefb1/README.md#getcroppedcanvasoptions\r\n    disabled: \"@disableImageCrop\" // Use data-disable-image-crop attribute to enable/disable\r\n  });\r\n  $$1.widget(\"blueimp.fileupload\", $$1.blueimp.fileupload, {\r\n    processActions: {\r\n      cropImage: function (data, options) {\r\n        let file = data.files[data.index];\r\n        if (options.disabled || $$1.isNumber(options.maxFileSize) && file.size > options.maxFileSize || options.fileTypes && !options.fileTypes.test(file.type)) return data;\r\n        let url = URL.createObjectURL(file),\r\n          dfd = $$1.Deferred(),\r\n          that = this;\r\n        let $dlg = ew.cropperDialog || $$1(\"#ew-cropper-dialog\").on(\"shown.bs.modal\", function () {\r\n          $dlg.data(\"cropper\", new Cropper(this.querySelector(\"#ew-crop-image\"), options.cropperOptions));\r\n        }).on(\"hidden.bs.modal\", function () {\r\n          var _$dlg$data;\r\n          (_$dlg$data = $dlg.data(\"cropper\")) == null || _$dlg$data.destroy();\r\n          $dlg.removeData(\"cropper\");\r\n          $dlg.find(\"#ew-crop-image\").attr(\"src\", \"data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\");\r\n        });\r\n        ew.cropperDialog = $dlg;\r\n        $dlg.find(\"#ew-crop-image\").attr(\"src\", url);\r\n        $dlg.find(\".ew-crop-btn\").off(\"click\").on(\"click\", function () {\r\n          if ($dlg.data(\"cropper\")) {\r\n            try {\r\n              let canvas = $dlg.data(\"cropper\").getCroppedCanvas(options.cropperCanvasOptions);\r\n              canvas.toBlob(blob => {\r\n                data.files[data.index] = new File([blob], file.name, {\r\n                  type: file.type\r\n                });\r\n                dfd.resolveWith(that, [data]);\r\n              }, file.type);\r\n            } catch (error) {\r\n              ew.alert(error);\r\n              dfd.rejectWith(that, [data]);\r\n            } finally {\r\n              $dlg.modal(\"hide\");\r\n            }\r\n          }\r\n        });\r\n        $dlg.find(\".ew-skip-btn\").off(\"click\").on(\"click\", function () {\r\n          dfd.resolveWith(that, [data]);\r\n          $dlg.modal(\"hide\");\r\n        });\r\n        $dlg.modal(\"show\");\r\n        return dfd.promise();\r\n      }\r\n    }\r\n  });\n\n  // Extend jQuery\r\n  $$1.extend({\r\n    isBoolean: function (o) {\r\n      return typeof o === 'boolean';\r\n    },\r\n    isNumber: function (o) {\r\n      return typeof o === 'number' && isFinite(o);\r\n    },\r\n    isObject: function (o) {\r\n      return o && (typeof o === 'object' || this.isFunction(o)) || false;\r\n    },\r\n    isString: function (o) {\r\n      return typeof o === 'string';\r\n    },\r\n    isUndefined: function (o) {\r\n      return typeof o === 'undefined';\r\n    },\r\n    isValue: function (o) {\r\n      return this.isObject(o) || this.isString(o) || this.isNumber(o) || this.isBoolean(o);\r\n    },\r\n    isDate: function (o) {\r\n      return this.type(o) === 'date' && o.toString() !== 'Invalid Date' && !isNaN(o);\r\n    },\r\n    later: function (when, o, fn, data, periodic) {\r\n      when = when || 0;\r\n      o = o || {};\r\n      var m = fn,\r\n        d = data,\r\n        f,\r\n        r;\r\n      if (this.isString(fn)) m = o[fn];\r\n      if (!m) return;\r\n      if (!this.isUndefined(data) && !this.isArray(d)) d = [data];\r\n      f = function () {\r\n        m.apply(o, d || []);\r\n      };\r\n      r = periodic ? setInterval(f, when) : setTimeout(f, when);\r\n      return {\r\n        interval: periodic,\r\n        cancel: function () {\r\n          this.interval ? clearInterval(r) : clearTimeout(r);\r\n        }\r\n      };\r\n    }\r\n  });\n\n  /**\r\n   * jQuery.fields() plugin\r\n   *\r\n   * @param {string|undefined} fldvar - Field variable name or undefined\r\n   *  If field variable name, returns jQuery object of the specified field element(s) or undefined if not found.\r\n   *  If unspecified, returns object of jQuery objects of all fields.\r\n   * @returns {jQuery|undefined|object}\r\n   */\r\n  $$1.fn.fields = function (fldvar) {\r\n    // Note: fldvar has NO \"x_\" prefix\r\n    let row = {},\r\n      id = this.attr(\"id\"),\r\n      obj = this[0],\r\n      m = id.match(/^[xy](\\d*)_/),\r\n      f,\r\n      tbl,\r\n      infix;\r\n    if (m) {\r\n      // \"this\" is input element\r\n      f = ew.getForm(obj); // form\r\n      tbl = this.data(\"table\"); // table var\r\n      infix = m[1]; // row index\r\n    } else if (obj != null && obj.htmlForm) {\r\n      // \"this\" is form\r\n      f = obj.$element; // form\r\n      tbl = obj.id.replace(new RegExp(\"^f|\" + obj.pageId + \"$\", \"g\"), \"\"); // table var\r\n      infix = obj.htmlForm.dataset.rowindex; // row index\r\n    }\r\n    let selector = \"[data-table\" + (tbl ? \"=\" + tbl : \"\") + \"][data-field\" + (fldvar ? \"=x_\" + fldvar : \"\") + \"]\" + ($$1.isValue(infix) ? \"[name^=x\" + infix + \"]\" : \"\") + \":not(.ew-custom-option)\";\r\n    if (f && selector) {\r\n      $$1(f).find(selector).each(function () {\r\n        var _row$key$add, _row$key;\r\n        let key = this.dataset.field.substring(2),\r\n          // \"data-field\"\r\n          name = this.getAttribute(\"name\");\r\n        key = /^y_/.test(name) ? \"y_\" + key : key; // Use \"y_fldvar\" as key for 2nd search input\r\n        row[key] = (_row$key$add = (_row$key = row[key]) == null ? void 0 : _row$key.add(this)) != null ? _row$key$add : $$1(this); // Create jQuery object for each field\r\n      });\r\n    }\r\n    return fldvar ? row[fldvar] : row;\r\n  };\r\n  $$1.fn.extend({\r\n    // Get jQuery object of the row (<div> or <tr>)\r\n    row: function () {\r\n      var _this$data$substring, _this$data, _this$data2;\r\n      let id = (_this$data$substring = (_this$data = this.data(\"field\")) == null ? void 0 : _this$data.substring(2)) != null ? _this$data$substring : \"\",\r\n        tbl = (_this$data2 = this.data(\"table\")) != null ? _this$data2 : \"\",\r\n        $row = this.closest(\"#r_\" + id + \", #xs_\" + id + \", .row.\" + tbl + \"_\" + id);\r\n      if (!$row[0]) $row = this.closest(\".ew-table > tbody > tr\"); // Grid page\r\n      return $row;\r\n    },\r\n    // Show/Hide field\r\n    visible: function (v) {\r\n      var _this$data$substring2, _this$data3, _this$data4;\r\n      let id = (_this$data$substring2 = (_this$data3 = this.data(\"field\")) == null ? void 0 : _this$data3.substring(2)) != null ? _this$data$substring2 : \"\",\r\n        tbl = (_this$data4 = this.data(\"table\")) != null ? _this$data4 : \"\",\r\n        $p = this.closest(\"#r_\" + id + \", #xs_\" + id + \", .row.\" + tbl + \"_\" + id); // Find the row\r\n      if (!$p[0]) $p = this.closest(\"[id^=el]\"); // Find the span\r\n      if (typeof v != \"undefined\") {\r\n        $p.toggleClass(\"d-none d-sm-none\", !v); // Note: d-sm-none overrides d-sm-flex\r\n        return this;\r\n      } else {\r\n        return $el.is(\":visible\");\r\n      }\r\n    },\r\n    // Get/Set field \"readonly\" attribute\r\n    // Note: This attribute is ignored if the value of the type attribute is hidden, range, color, checkbox, radio, file, or a button type\r\n    readonly: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"readOnly\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"readOnly\");\r\n      }\r\n    },\r\n    // Get/Set field \"disabled\" attribute\r\n    // Note: A disabled control's value isn't submitted with the form\r\n    disabled: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"disabled\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"disabled\");\r\n      }\r\n    },\r\n    // Get/Set field value(s)\r\n    // Note: Return array if select-multiple\r\n    value: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        ew.selectOption(this[0], v);\r\n        return this;\r\n      } else {\r\n        return ew.getValue(this[0]);\r\n      }\r\n    },\r\n    // Get field value as number\r\n    toNumber: function () {\r\n      return ew.parseNumber(this.value());\r\n    },\r\n    // Get field value as Luxon object\r\n    toDate: function () {\r\n      var _ew$vars$tables;\r\n      let data = this.data(),\r\n        table = data.table,\r\n        field = data.field.replace(/^[xy]_/, \"\"),\r\n        format = (_ew$vars$tables = ew.vars.tables) == null || (_ew$vars$tables = _ew$vars$tables[table]) == null || (_ew$vars$tables = _ew$vars$tables.fields) == null || (_ew$vars$tables = _ew$vars$tables[field]) == null ? void 0 : _ew$vars$tables.clientFormatPattern;\r\n      return ew.parseDateTime(this.value(), format);\r\n    },\r\n    // Get field value as native Date object\r\n    toJsDate: function () {\r\n      return this.toDate().toJSDate();\r\n    }\r\n  });\n\n  // Improve Bootstrap Dropdown\r\n  bootstrap.Dropdown.prototype.toggle = function () {\r\n    if (!this._element.classList.contains(\"ew-dropdown-toggle\")) {\r\n      if (this._element.closest(\"[data-widget]\")) $$1(this._element).on(\"click.ew.dropdown\", e => {\r\n        bootstrap.Dropdown.clearMenus(e.originalEvent); // Clear menus first because this click event will not propagate to the document\r\n        e.stopPropagation(); // Stop propagate or the event will toggle row of expandable-table\r\n      });\r\n      // Move the menu to document body if menu inside responsive table\r\n      if (this._menu.closest(\".table-responsive\")) {\r\n        let container = this._menu.closest(\".popover-body, .modal-body, .offcanvas-body, body\");\r\n        container.appendChild(this._menu);\r\n        let menu = this._menu;\r\n        if (!this._element.id) this._element.id = \"dropdownbtn\" + ew.random();\r\n        menu.setAttribute('aria-labelledby', this._element.id);\r\n        function callback(mutationList) {\r\n          mutationList.forEach(mutation => {\r\n            switch (mutation.type) {\r\n              case \"attributes\":\r\n                if (mutation.target.classList.contains(\"show\")) menu.classList.add(\"d-block\");else menu.classList.remove(\"d-block\");\r\n                break;\r\n            }\r\n          });\r\n        }\r\n        let observer = new MutationObserver(callback);\r\n        observer.observe(this._parent, {\r\n          attributeFilter: [\"class\"],\r\n          attributeOldValue: false,\r\n          subtree: false\r\n        });\r\n      }\r\n      this._element.classList.add(\"ew-dropdown-toggle\");\r\n    }\r\n    return this._isShown() ? this.hide() : this.show();\r\n  };\n\n  loadjs.ready([\"wrapper\", \"head\"], function () {\r\n    let $chatWrapper = $$1(\".chat-wrapper\"),\r\n      $chatCheck = $chatWrapper.find(\"#chat-check\"),\r\n      $chatBtn = $chatWrapper.find(\".chat-btn\").addClass(\"show\"),\r\n      $chatClose = $chatBtn.find(\".close\"),\r\n      $chatComment = $chatBtn.find(\".comment\"),\r\n      $chatCard = $chatWrapper.find(\".direct-chat\"),\r\n      $chatHeader = $chatCard.find(\".card-header\"),\r\n      $chatCollapse = $chatHeader.find(\".card-collapse\"),\r\n      $chatBody = $chatCard.find(\".card-body\"),\r\n      $chatIframe = $chatBody.find(\"iframe\");\r\n    $chatCheck.on(\"click\", () => {\r\n      var _Pace;\r\n      if ((_Pace = Pace) != null && _Pace.running) return;\r\n      const checked = $chatCheck.prop(\"checked\");\r\n      $chatClose.toggle(checked);\r\n      $chatComment.toggle(!checked);\r\n      $chatCard.toggle(checked);\r\n      let iframe = $chatIframe[0];\r\n      if (checked && !iframe.src) iframe.src = iframe.dataset.src;\r\n    });\r\n    $chatCard.on(\"removed.lte.cardwidget\", () => $chatCheck.prop(\"checked\", false).triggerHandler(\"click\"));\r\n    $chatCard.on(\"maximized.lte.cardwidget\", () => {\r\n      $chatWrapper.after($chatCard);\r\n      $chatCollapse.hide();\r\n      $chatCard.delay(150).queue(function () {\r\n        let h = $chatCard.height() - $chatHeader.outerHeight();\r\n        $chatBody.height(h);\r\n        $chatIframe.addClass(\"w-100\").height(h - parseInt($chatCard.css(\"border-radius\"), 10)); // Minus the radius of card\r\n        $chatCard.dequeue();\r\n      });\r\n      $chatIframe[0].contentDocument.location.reload(true);\r\n    }).on(\"minimized.lte.cardwidget\", () => {\r\n      $chatWrapper.append($chatCard);\r\n      $chatCollapse.show();\r\n      $chatCard.toggle($chatCheck.prop(\"checked\"));\r\n      $chatCard.queue(function () {\r\n        $chatBody.height(\"auto\");\r\n        $chatIframe.removeClass(\"w-100\").height(\"auto\");\r\n        $chatCard.dequeue();\r\n      });\r\n      $chatIframe[0].contentDocument.location.reload(true);\r\n    });\r\n  });\n\n  var isNil = (value) => {\r\n      return value === null || value === undefined;\r\n  };\r\n\r\n  var isNil$1 = isNil;\n\n  var isFunction = (value) => {\r\n      return typeof value === 'function';\r\n  };\r\n\r\n  var isFunction$1 = isFunction;\n\n  var isNaNNumber = (value) => {\r\n      return typeof value === 'number' && isNaN(value);\r\n  };\r\n\r\n  var isNaNNumber$1 = isNaNNumber;\n\n  var isFiniteNumber = (value) => {\r\n      return typeof value == 'number' && isFinite(value);\r\n  };\r\n\r\n  var isFiniteNumber$1 = isFiniteNumber;\n\n  /**\r\n   * Optimized for performance\r\n   */\r\n  const multiplyByPowerOfTen = (number, powerOfTenExponent) => {\r\n      if (!isFiniteNumber$1(number))\r\n          return NaN;\r\n      const numAsString = '' + number;\r\n      const indexOfE = numAsString.indexOf('e');\r\n      if (indexOfE === -1) {\r\n          return +(numAsString + 'e' + powerOfTenExponent);\r\n      }\r\n      else {\r\n          return +(numAsString.slice(0, indexOfE) + 'e' + (+numAsString.slice(indexOfE + 1) + powerOfTenExponent));\r\n      }\r\n  };\r\n\r\n  var multiplyByPowerOfTen$1 = multiplyByPowerOfTen;\n\n  /**\r\n   * Only handles direct power of ten (only integer exponents)\r\n   */\r\n  const log10 = (numberThatIsPowerOfTen) => {\r\n      return Math.round(Math.log(numberThatIsPowerOfTen) * Math.LOG10E);\r\n  };\r\n\r\n  var log10$1 = log10;\n\n  const toObject = (arr, entriesResolver) => {\r\n      const object = {};\r\n      for (let i = 0; i < arr.length; ++i) {\r\n          if (i in arr) {\r\n              const [key, value] = entriesResolver(arr[i], i);\r\n              object[key] = value;\r\n          }\r\n      }\r\n      return object;\r\n  };\r\n\r\n  var toObject$1 = toObject;\n\n  // <i> Extracted from https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex\r\n  const escapeRegexString = (string) => {\r\n      return string.replace(/[.*+?^${}()|[\\]\\\\]/g, match => `\\\\${match}`);\r\n  };\r\n\r\n  var escapeRegexString$1 = escapeRegexString;\n\n  /**\r\n   * This function doesn't work with non-primitive arguments\r\n   */\r\n  const memoize = (fn) => {\r\n      const cache = {};\r\n      return function (...args) {\r\n          const cacheKey = args.length > 1 ? args.join('-(:-:)-') : args[0];\r\n          if (cacheKey in cache) {\r\n              return cache[cacheKey];\r\n          }\r\n          const result = fn.apply(this, args);\r\n          cache[cacheKey] = result;\r\n          return result;\r\n      };\r\n  };\r\n\r\n  var memoize$1 = memoize;\n\n  const powerOf10LookupObject = (() => {\r\n      const object = {};\r\n      // 1 <= x <= Infinity (positive exponent)\r\n      let additionalZeros = '';\r\n      let currentValue;\r\n      while (currentValue !== Infinity) {\r\n          currentValue = +('1' + additionalZeros);\r\n          object[currentValue] = true;\r\n          additionalZeros += '0';\r\n      }\r\n      // 0 <= x < 1 (negative exponent)\r\n      additionalZeros = '';\r\n      currentValue = undefined;\r\n      while (currentValue !== 0) {\r\n          currentValue = +('0.' + additionalZeros + '1');\r\n          object[currentValue] = true;\r\n          additionalZeros += '0';\r\n      }\r\n      return object;\r\n  })();\r\n  const isPowerOfTen = (number) => {\r\n      return !!powerOf10LookupObject[number];\r\n  };\r\n\r\n  var isPowerOfTen$1 = isPowerOfTen;\n\n  const toBase = (value, valueUnit, unitScale) => {\r\n      if (!isFiniteNumber$1(value) || valueUnit === unitScale.base)\r\n          return value;\r\n      if (!(valueUnit in unitScale.scale))\r\n          return NaN;\r\n      const toBaseMultiplier = unitScale.scale[valueUnit] || 1;\r\n      return isPowerOfTen$1(toBaseMultiplier)\r\n          ? multiplyByPowerOfTen$1(value, log10$1(toBaseMultiplier))\r\n          : value * toBaseMultiplier;\r\n  };\r\n  const convertUnit = (value, originUnit, targetUnit, unitScale) => {\r\n      if (!isFiniteNumber$1(value) || originUnit === targetUnit)\r\n          return value;\r\n      const valueAsBase = toBase(value, originUnit, unitScale);\r\n      const resolvedScale = Object.assign(Object.assign({}, unitScale.scale), { [unitScale.base]: 1 });\r\n      if (isNaN(valueAsBase) || !(originUnit in resolvedScale) || !(targetUnit in resolvedScale))\r\n          return NaN;\r\n      const conversionFactorFromBase = unitScale.scale[targetUnit] || 1;\r\n      return isPowerOfTen$1(conversionFactorFromBase)\r\n          ? multiplyByPowerOfTen$1(valueAsBase, -log10$1(conversionFactorFromBase))\r\n          : valueAsBase / conversionFactorFromBase;\r\n  };\r\n  /**\r\n   * Looks through every possibility for the 'best' available unit.\r\n   * i.e. Where the value has the fewest numbers before the decimal point,\r\n   * but is still higher than 1.\r\n   */\r\n  const toBest = (value, originUnit, unitScale, options) => {\r\n      const resolvedOptions = Object.assign({ exclude: [], cutOffNumber: 1 }, options);\r\n      let best = null;\r\n      const scale = unitScale.scale;\r\n      Object.keys(scale).sort((a, b) => scale[a] - scale[b]).forEach((scaleUnit) => {\r\n          const isIncluded = resolvedOptions.exclude.indexOf(scaleUnit) === -1;\r\n          if (!isIncluded)\r\n              return;\r\n          const result = convertUnit(value, originUnit, scaleUnit, unitScale);\r\n          const absoluteResult = Math.abs(result);\r\n          if (!best || (absoluteResult >= resolvedOptions.cutOffNumber && absoluteResult < Math.abs(best[0]))) {\r\n              best = [result, scaleUnit];\r\n          }\r\n      });\r\n      return best || [value, originUnit];\r\n  };\r\n  const unitScale = (unitScaleDefinition) => {\r\n      return {\r\n          toBase: (value, unit) => {\r\n              return toBase(value, unit, unitScaleDefinition);\r\n          },\r\n          convert: (value, originUnit, targetUnit) => {\r\n              return convertUnit(value, originUnit, targetUnit, unitScaleDefinition);\r\n          },\r\n          toBest: (value, originUnit, options) => {\r\n              return toBest(value, originUnit, unitScaleDefinition, options);\r\n          },\r\n          scaleDefinition: unitScaleDefinition,\r\n      };\r\n  };\n\n  /**\r\n   * Short version of mozilla polyfill:\r\n   * <i> See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\r\n   */\r\n  const stringRepeat = (str, count) => {\r\n      // return (str.repeat && str.repeat(count)) || new Array(count + 1).join(str);\r\n      if (count < 1)\r\n          return '';\r\n      let result = '';\r\n      let pattern = str;\r\n      while (count > 1) {\r\n          if (count & 1)\r\n              result += pattern;\r\n          count >>>= 1, pattern += pattern;\r\n      }\r\n      return result + pattern;\r\n  };\r\n\r\n  var stringRepeat$1 = stringRepeat;\n\n  const baseCreateUnitScaleFromLocaleAbbreviations = (str) => {\r\n      if (!str) {\r\n          return unitScale({ base: '', scale: {} });\r\n      }\r\n      const scale = str.split('|');\r\n      const scaleDefinition = { ['']: 1 };\r\n      scale.forEach((scaleItem, scaleItemIndex) => {\r\n          if (!scaleItem)\r\n              return;\r\n          scaleDefinition[scaleItem] = +(1 + stringRepeat$1('0', scaleItemIndex));\r\n      });\r\n      return unitScale({ base: '', scale: scaleDefinition });\r\n  };\r\n  const createUnitScaleFromLocaleAbbreviations = memoize$1(baseCreateUnitScaleFromLocaleAbbreviations);\r\n\r\n  var createUnitScaleFromLocaleAbbreviations$1 = createUnitScaleFromLocaleAbbreviations;\n\n  const replaceNumeralSystemWithLatinNumbers = (numericStringWithExtraInfo, numeralSystemMap) => {\r\n      if (!numeralSystemMap || numeralSystemMap.length !== 10)\r\n          return numericStringWithExtraInfo;\r\n      const numericStringLength = numericStringWithExtraInfo.length;\r\n      const numeralSystemToLatinSystemMap = toObject$1(numeralSystemMap, (digit, digitIndex) => [digit.replace(/\\u200e/g, ''), '' + digitIndex]);\r\n      let output = '';\r\n      for (let numericStringIndex = 0; numericStringIndex < numericStringLength; numericStringIndex++) {\r\n          const char = numericStringWithExtraInfo[numericStringIndex];\r\n          output += numeralSystemToLatinSystemMap[char] || char;\r\n      }\r\n      return output;\r\n  };\r\n  const getScalingFactorFromAbbreviations = (stringOriginal, options) => {\r\n      var _a;\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1((_a = options.locale) === null || _a === void 0 ? void 0 : _a.abbreviations);\r\n      const abbreviationsSortedByLengthDesc = Object.keys(scale.scaleDefinition.scale).sort((a, b) => b.length - a.length);\r\n      let abbreviationScalingFactor = 1;\r\n      for (const abbreviation of abbreviationsSortedByLengthDesc) {\r\n          const scapedAbbreviationForRegex = escapeRegexString$1(abbreviation);\r\n          const regexp = new RegExp('[^a-zA-Z]'\r\n              + `(${scapedAbbreviationForRegex})|(${scapedAbbreviationForRegex.replace(/\\u200e/g, '')})`\r\n              + '(?:\\\\)(?:\\\\))?)?$');\r\n          if (stringOriginal.match(regexp)) {\r\n              abbreviationScalingFactor = scale.toBase(abbreviationScalingFactor, abbreviation);\r\n              break;\r\n          }\r\n      }\r\n      return abbreviationScalingFactor;\r\n  };\r\n  // unformats numbers separators, decimals places, signs, abbreviations\r\n  const formattedStringToNumber = (inputString, options) => {\r\n      var _a;\r\n      const locale = options.locale;\r\n      const stringOriginal = inputString;\r\n      let value;\r\n      // Replace special digits with latin digits\r\n      const stringWithLatinDigits = replaceNumeralSystemWithLatinNumbers(inputString, (_a = options.locale) === null || _a === void 0 ? void 0 : _a.numeralSystem);\r\n      if (options.zeroFormat && stringWithLatinDigits === options.zeroFormat) {\r\n          value = 0;\r\n      }\r\n      else if (options.nullFormat && stringWithLatinDigits === options.nullFormat || !stringWithLatinDigits.replace(/[^0-9]+/g, '').length) {\r\n          value = null;\r\n      }\r\n      else {\r\n          // Replaces the locale decimal delimiter with a dot (.)\r\n          const decimalDelimiterFromLocale = locale.delimiters.decimal;\r\n          const stringWithDotDecimalDelimiter = decimalDelimiterFromLocale === '.'\r\n              ? stringWithLatinDigits\r\n              : stringWithLatinDigits.replace(/\\./g, '').replace(decimalDelimiterFromLocale, '.');\r\n          // Determines the scaling factor from the abbreviations (if has abbreviations)\r\n          const abbreviationScalingFactor = getScalingFactorFromAbbreviations(stringOriginal, options);\r\n          // Check for negative number\r\n          const negativeFactor = (stringWithDotDecimalDelimiter.split('-').length\r\n              + Math.min(stringWithDotDecimalDelimiter.split('(').length - 1, stringWithDotDecimalDelimiter.split(')').length - 1)) % 2 ? 1 : -1;\r\n          // Remove non numbers\r\n          const numberAsString = stringWithDotDecimalDelimiter.replace(/[^0-9.]+/g, '');\r\n          value = negativeFactor * multiplyByPowerOfTen$1(+numberAsString, log10$1(abbreviationScalingFactor));\r\n      }\r\n      return value;\r\n  };\r\n\r\n  var formattedStringToNumber$1 = formattedStringToNumber;\n\n  const locale = {\r\n      code: 'en',\r\n      delimiters: {\r\n          thousands: ',',\r\n          decimal: '.',\r\n      },\r\n      abbreviations: '|||K|||M|||B|||T',\r\n      ordinal: number => {\r\n          const b = number % 10;\r\n          return (Math.floor(number % 100 / 10) === 1)\r\n              ? 'th'\r\n              : b === 1\r\n                  ? 'st'\r\n                  : b === 2\r\n                      ? 'nd'\r\n                      : b === 3\r\n                          ? 'rd'\r\n                          : 'th';\r\n      },\r\n  };\r\n\r\n  var locale$1 = locale;\n\n  function merge(...args) {\r\n      const newObject = {};\r\n      const argsLength = args.length;\r\n      for (let i = 0; i < argsLength; i++) {\r\n          for (const key in args[i])\r\n              newObject[key] = args[i][key];\r\n      }\r\n      return newObject;\r\n  }\n\n  var isObject = (value) => {\r\n      return typeof value === 'object' && value !== null;\r\n  };\r\n\r\n  var isObject$1 = isObject;\n\n  var isString = (value) => {\r\n      return typeof value === 'string';\r\n  };\r\n\r\n  var isString$1 = isString;\n\n  const truncateNumber = (value) => {\r\n      return value < 0 ? Math.ceil(value) : Math.floor(value);\r\n  };\r\n\r\n  var truncateNumber$1 = truncateNumber;\n\n  const getPatternParts = (patternMask) => {\r\n      let isInEscapedPart = false;\r\n      let currentEscapedWord = '';\r\n      const parts = [];\r\n      for (let i = 0; i < patternMask.length; i++) {\r\n          const char = patternMask.charAt(i);\r\n          if (char === \"'\" && !isInEscapedPart) {\r\n              isInEscapedPart = true;\r\n              currentEscapedWord = '';\r\n          }\r\n          else if (char === \"'\" && isInEscapedPart && patternMask.charAt(i - 1) !== \"\\\\\") {\r\n              isInEscapedPart = false;\r\n              parts.push({ escaped: true, value: currentEscapedWord });\r\n          }\r\n          else if (isInEscapedPart) {\r\n              currentEscapedWord += char;\r\n          }\r\n          else {\r\n              if (parts.length && !parts[parts.length - 1].escaped) {\r\n                  parts[parts.length - 1].value += char;\r\n              }\r\n              else {\r\n                  parts.push({ escaped: false, value: char });\r\n              }\r\n          }\r\n      }\r\n      return parts;\r\n  };\r\n  /**\r\n   * Checks only the pattern parts that are not escaped\r\n   */\r\n  const patternIncludes = (patternMask, search) => {\r\n      return patternRemoveEscapedText(patternMask).indexOf(search) !== -1;\r\n  };\r\n  /**\r\n   * Replaces only the pattern parts that are not escaped\r\n   */\r\n  const patternReplace = (patternMask, searchValue, replaceValue) => {\r\n      return getPatternParts(patternMask)\r\n          .map(e => e.escaped ? `'${e.value}'` : e.value.replace(searchValue, _ => replaceValue))\r\n          .join('');\r\n  };\r\n  const patternRemoveEscapedText = (patternMask) => {\r\n      return getPatternParts(patternMask)\r\n          .filter(e => !e.escaped)\r\n          .map(e => e.value)\r\n          .join('');\r\n  };\r\n  const patternStripAndNormalizeEscapedText = (patternMask) => {\r\n      return getPatternParts(patternMask)\r\n          .map(e => e.escaped ? e.value.replace(/\\\\'/g, \"'\") : e.value)\r\n          .join('');\r\n  };\n\n  const stringIncludes = (str, search) => {\r\n      return str.indexOf(search) !== -1;\r\n  };\r\n\r\n  var stringIncludes$1 = stringIncludes;\n\n  /**\r\n   * What does it look for in the pattern?\r\n   *     '(' | '+' | '-'\r\n   * What does it remove from the pattern?\r\n   *     '(' | ')' | '+' | '-'\r\n   * What options does it provide?\r\n   *     - negativeParentheses (if negative value should be wrapped between parentheses)\r\n   *     - forceSign (is positive values should have a + sign)\r\n   * How will it transform the output?\r\n   *     - Parentheses:\r\n   *         '-23.58' & '(0.00)'  =>  '(23.58)'\r\n   *         '-23.58' & '( 0.00 )'  =>  '( 23.58 )'\r\n   *         '-23.58' & '(  0.00 ) '  =>  ' (  23.58 )'\r\n   *     - Sign:\r\n   *         '12.34' & '+0.0'  =>  '+12.34'\r\n   *         '-12.34' & '+0.0'  =>  '-12.34'\r\n   *\r\n   * <i> If '+' is somewhere in the pattern, it will set the '+' sign for positive numbers\r\n   *     and same for negative numbers.\r\n   * <i> If '-' is somewhere in the pattern, it will place the negative sign in the defined position.\r\n   *     But it won't still set the sign for positive numbers.\r\n   * <i> Checks if we should use parentheses for negative number or if we should prefix with a sign.\r\n   *     If both are present we default to parentheses.\r\n   */\r\n  const signRule = (pattern) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(pattern);\r\n      const negativeParentheses = stringIncludes$1(patternWithoutEscapedText, '(') && stringIncludes$1(patternWithoutEscapedText, ')');\r\n      const forceSign = !negativeParentheses && stringIncludes$1(patternWithoutEscapedText, '+');\r\n      let outputPatternMask = pattern;\r\n      outputPatternMask = patternReplace(outputPatternMask, '(', `'nps'`);\r\n      outputPatternMask = patternReplace(outputPatternMask, ')', `'npe'`);\r\n      outputPatternMask = patternReplace(outputPatternMask, /(-|\\+)/, `'s'`);\r\n      return [outputPatternMask, { negativeParentheses, forceSign }];\r\n  };\r\n\r\n  var signRule$1 = signRule;\n\n  /**\r\n   * Checks if abbreviation is wanted\r\n   * <i> Applied only when 'a' is present.\r\n   * <i> If 'a' is followed by 'k' | 'm' | 'b' | 't', then, it will force the abbreviation to be the specified\r\n   *     unit. (e.g. (123456.78, '0,0.00am')  =>  '0.12M')\r\n   */\r\n  const abbreviationRule = (patternMask) => {\r\n      let compactUnit = null; // force abbreviation\r\n      let compact = false;\r\n      // If it includes 'a' means it should be abbreviated (only if at least includes 'a')\r\n      if (patternIncludes(patternMask, 'a')) {\r\n          compact = true;\r\n          const patternWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n          const abbreviationRegExpResult = patternWithoutEscapedText.match(/a(k|m|b|t)?/);\r\n          compactUnit = !!abbreviationRegExpResult ? abbreviationRegExpResult[1] : null;\r\n      }\r\n      let outputPatternMask = patternMask;\r\n      outputPatternMask = patternReplace(outputPatternMask, /a(k|m|b|t)?/, `'a'`);\r\n      return [outputPatternMask, { compact, compactUnit, compactAuto: compact && !compactUnit }];\r\n  };\r\n\r\n  var abbreviationRule$1 = abbreviationRule;\n\n  /**\r\n   * Faster version of String.prototype.split that only handles splitting in two parts\r\n   */\r\n  const splitStringInTwoParts = (str, separator) => {\r\n      if (!str)\r\n          return ['', ''];\r\n      const indexOfSearchChar = str.indexOf(separator);\r\n      if (indexOfSearchChar === -1) {\r\n          return [str, ''];\r\n      }\r\n      else {\r\n          return [str.slice(0, indexOfSearchChar), str.slice(indexOfSearchChar + 1)];\r\n      }\r\n  };\r\n\r\n  var splitStringInTwoParts$1 = splitStringInTwoParts;\n\n  const countChars = (string, char) => {\r\n      return !string ? 0 : string.split('').filter(stringChar => stringChar === char).length;\r\n  };\r\n  /**\r\n   * Fraction digits (decimals) count rule (minimum and maximum fraction digits)\r\n   * <i> Optional fraction digits would go always after the forced ones\r\n   */\r\n  const decimalPlacesRule = (patternMask) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n      const patternPrecisionPart = splitStringInTwoParts$1(patternWithoutEscapedText, '.')[1];\r\n      let minimumFractionDigits = 0;\r\n      let maximumFractionDigits = 0;\r\n      if (!!patternPrecisionPart) {\r\n          const trimmedPatternPrecisionPart = patternPrecisionPart.trim();\r\n          if (stringIncludes$1(trimmedPatternPrecisionPart, '[')) {\r\n              // If it contains optional fraction digits\r\n              const patternPrecisionPartWithoutClosingBracket = trimmedPatternPrecisionPart.replace(']', '');\r\n              // Isolates forced (left) vs optional (right) decimals\r\n              const precisionSplitted = splitStringInTwoParts$1(patternPrecisionPartWithoutClosingBracket, '[');\r\n              minimumFractionDigits = countChars(precisionSplitted[0], '0');\r\n              maximumFractionDigits = minimumFractionDigits + countChars(precisionSplitted[1], '0');\r\n          }\r\n          else if (stringIncludes$1(trimmedPatternPrecisionPart, '#')) {\r\n              // If it contains optional fraction digits marked with '#'\r\n              minimumFractionDigits = countChars(trimmedPatternPrecisionPart.split('#')[0], '0');\r\n              maximumFractionDigits = trimmedPatternPrecisionPart.length;\r\n          }\r\n          else if (stringIncludes$1(trimmedPatternPrecisionPart, 'X')) {\r\n              // If it contains no-maximum fraction digits marked with 'X'\r\n              minimumFractionDigits = countChars(trimmedPatternPrecisionPart.split('X')[0], '0');\r\n              maximumFractionDigits = 500;\r\n          }\r\n          else {\r\n              const fractionDigits = countChars(trimmedPatternPrecisionPart.split(' ')[0], '0');\r\n              minimumFractionDigits = fractionDigits;\r\n              maximumFractionDigits = fractionDigits;\r\n          }\r\n      }\r\n      return { minimumFractionDigits, maximumFractionDigits };\r\n  };\r\n\r\n  var decimalPlacesRule$1 = decimalPlacesRule;\n\n  /**\r\n   * Check for optional decimals.\r\n   *\r\n   * <i> 'optionalDecimals' This would mean that:\r\n   *     - In case the number (value) HAS decimals (e.g. 55.34), then it would display the fixed amount of defined\r\n   *       decimals (e.g. '0[.]000' => 3 fixed decimals), but, if the number is an straight integer, then it won't\r\n   *       display any decimals.\r\n   * <i> It could also accept optional decimals afterwards. So for the case '0[.]00##':\r\n   *     - If it is an integer, displays only an integer:  23 => '23'\r\n   *     - If it has 1 decimal, displays 2 decimals:       23.4 => '23.40'\r\n   *     - If it has 3 decimals, displays 3 decimals:      23.456 => '23.456'\r\n   */\r\n  const optionalDecimalPlacesRule = (patternMask) => {\r\n      let optionalFractionDigits = false;\r\n      let outputPatternMask = patternMask;\r\n      if (patternIncludes(patternMask, '[.]')) {\r\n          optionalFractionDigits = true;\r\n          outputPatternMask = patternReplace(outputPatternMask, '[.]', '.');\r\n      }\r\n      return [outputPatternMask, { optionalFractionDigits }];\r\n  };\r\n\r\n  var optionalDecimalPlacesRule$1 = optionalDecimalPlacesRule;\n\n  /**\r\n   * <i> The regExp tests for:\r\n   *     - 0.00##X\r\n   *     - 0,0.00##X\r\n   *     - #.00##X (without leading zeros)\r\n   *     - #,#.00##X (without leading zeros)\r\n   */\r\n  const numberPositionRule = (patternMask) => {\r\n      const numberPartRegExp = /((((0|#)+,)?(0|#)+(\\.([0#X]|\\[0+\\])+)?){1})/;\r\n      return patternReplace(patternMask, numberPartRegExp, `'n'`);\r\n  };\r\n  /**\r\n   * Minimum leading integer digits rule\r\n   * This will define the minimum amount of digits on the integer part (left-most grouped zeroes).\r\n   *     - (12.34, '0000.0') =>  '0012.3'\r\n   *     - (12.34, '0000,0.0')  =>  '0,012.3'\r\n   *     - (0.34, '#.0') => '.3'\r\n   *     - (1.34, '#.0') => '1.3'\r\n   *\r\n   * <i> It always pick the left-most amount of zeros, so:\r\n   *     - If pattern has NO thousands separator ('000.0'), then the amount at the left of the DOT is used.\r\n   *     - If pattern HAS thousands separator ('00,0.0'), then the amount at the left of the COMMA is used.\r\n   * <i> This will remove the integer zero for numbers between 1 and -1 (e.g. 0.23 or -0.5)\r\n   *     - If pattern integer part is option (0.24, '#.00') => '.24'\r\n   */\r\n  const minimumIntegerDigitsRule = (patternMask) => {\r\n      const patternMaskWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n      const patternMaskIntegerPart = patternMaskWithoutEscapedText.split('.')[0].split(',')[0];\r\n      // If it has '#' in the integer part, sets the minimumIntegerDigits to 0\r\n      if (/#/g.test(patternMaskIntegerPart)) {\r\n          return 0;\r\n      }\r\n      return (patternMaskIntegerPart.match(/0/g) || []).length;\r\n  };\r\n  // If sign is not included, put sign at the left of the number\r\n  const addSignPositionIfItDoesNotExists = (patternMask) => {\r\n      if (stringIncludes$1(patternMask, `'s'`) || stringIncludes$1(patternMask, `'nps'`))\r\n          return patternMask;\r\n      return patternMask.replace(`'n'`, _ => `'s''n'`);\r\n  };\r\n  const baseParsePattern = (inputPattern) => {\r\n      const resolvedInputPattern = isString$1(inputPattern) && inputPattern || '0,0.##########';\r\n      const [patternMaskAfterSignRule, signRules] = signRule$1(resolvedInputPattern);\r\n      const [patternMaskAfterAbbreviationRule, abbreviationRules] = abbreviationRule$1(patternMaskAfterSignRule);\r\n      const [patternMaskAfterOptionalDecimalPlacesRule, optionalDecimalPlacesRules] = optionalDecimalPlacesRule$1(patternMaskAfterAbbreviationRule);\r\n      const outputPatternMask = patternMaskAfterOptionalDecimalPlacesRule;\r\n      const outputPatternMaskWithoutEscapedText = patternRemoveEscapedText(outputPatternMask);\r\n      const decimalPlacesRules = decimalPlacesRule$1(outputPatternMask);\r\n      const minimumIntegerDigits = minimumIntegerDigitsRule(outputPatternMask);\r\n      const grouping = outputPatternMaskWithoutEscapedText.indexOf(',') > -1;\r\n      const patternMaskAfterHandlingNumberPosition = numberPositionRule(outputPatternMask);\r\n      const patternMaskWithEnsuredSignPosition = addSignPositionIfItDoesNotExists(patternMaskAfterHandlingNumberPosition);\r\n      const patternMask = patternMaskWithEnsuredSignPosition;\r\n      return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, signRules), abbreviationRules), optionalDecimalPlacesRules), decimalPlacesRules), { grouping,\r\n          minimumIntegerDigits,\r\n          patternMask });\r\n  };\r\n  const parsePattern = memoize$1(baseParsePattern);\r\n\r\n  var parsePattern$1 = parsePattern;\n\n  /**\r\n   * <i> Checks if value is negative, and removes the sign in case it exists\r\n   * Expects: a value as string, with or without the minus sign, AND NOTHING ELSE.\r\n   * Returns: same as the input but without the minus sign in case it had.\r\n   */\r\n  const removeSignIfExists = (valueAsString) => {\r\n      return valueAsString[0] === '-' ? valueAsString.slice(1) : valueAsString;\r\n  };\r\n\r\n  var removeSignIfExists$1 = removeSignIfExists;\n\n  /**\r\n   * This process only is applied for automatic abbreviation ('a'), and only in the rounding\r\n   * bubbling cases where the scale has to be recomputed.\r\n   * E.g.\r\n   *     formatNumber(999960, 0.0a') // Would return '1000.0k' instead of '1.0m' without this rescaling-fix\r\n   *\r\n   * It only applies rescaling if the absolute value of 'the already scaled and rounded value' (1.87, 'k') is greater or\r\n   * equal to 1000, and the abbreviation is not greater or equal to trillion.\r\n   *\r\n   * <i> After initial scaling, value shouldn't be greater than 1000, unless it is a trillion.\r\n   * <i> The resulting decimal part, will be always 0, as this will be executed only on the corner cases,\r\n   *     that results from rounding bubbling. This is why decimal part is ignored.\r\n   */\r\n  const rescaleRoundedValue = (value, currentAbbreviationScale, patternRules, options) => {\r\n      const { compact, compactAuto } = patternRules;\r\n      const { abbreviations } = options.locale;\r\n      if (!compact || !compactAuto) {\r\n          return [value, currentAbbreviationScale];\r\n      }\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1(abbreviations);\r\n      const [newScaledValue, newScaledValueUnit] = scale.toBest(value, currentAbbreviationScale || '');\r\n      return [newScaledValue, newScaledValueUnit];\r\n  };\r\n\r\n  var rescaleRoundedValue$1 = rescaleRoundedValue;\n\n  /**\r\n   * If abbreviation is forced, looks for the closest (in terms of power of ten) abbreviation in the current locale\r\n   *     k === 10 ** 3\r\n   *     m === 10 ** 6\r\n   *     b === 10 ** 9\r\n   *     t === 10 ** 12\r\n   */\r\n  const resolveForcedAbbreviationUnit = (forcedAbbreviationUnit, abbreviationsFromLocale, value) => {\r\n      // Record<AbbreviationSymbol, PowerOfTenExponent>\r\n      const forcedScaleMap = { k: 3, m: 6, b: 9, t: 12 };\r\n      const targetPowerOfTenExponent = forcedScaleMap[forcedAbbreviationUnit];\r\n      const scaleDefinitionFromLocale = (abbreviationsFromLocale === null || abbreviationsFromLocale === void 0 ? void 0 : abbreviationsFromLocale.split('|')) || [];\r\n      let closestPowerOfTenWithAvailableAbbreviation = null;\r\n      for (let distanceFromTarget = 0; distanceFromTarget < scaleDefinitionFromLocale.length; distanceFromTarget++) {\r\n          if (!scaleDefinitionFromLocale[targetPowerOfTenExponent - distanceFromTarget])\r\n              continue;\r\n          closestPowerOfTenWithAvailableAbbreviation = targetPowerOfTenExponent - distanceFromTarget;\r\n          break;\r\n      }\r\n      if (closestPowerOfTenWithAvailableAbbreviation === null) {\r\n          return [value, null];\r\n      }\r\n      return [\r\n          multiplyByPowerOfTen$1(value, -closestPowerOfTenWithAvailableAbbreviation),\r\n          scaleDefinitionFromLocale[closestPowerOfTenWithAvailableAbbreviation],\r\n      ];\r\n  };\r\n  const scaleValueWithAbbreviation = (value, patternRules, options) => {\r\n      const { compact, compactUnit } = patternRules;\r\n      const { abbreviations } = options.locale;\r\n      if (!compact)\r\n          return [value, null];\r\n      if (!!compactUnit) {\r\n          return resolveForcedAbbreviationUnit(compactUnit, abbreviations, value);\r\n      }\r\n      /**\r\n       * If abbreviation is automatic, resolves the abbreviation to the best (where the value has\r\n       * the fewest numbers before the decimal point, but is still higher than 1).\r\n       */\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1(abbreviations);\r\n      const [scaledValue, localizedUnit] = scale.toBest(value, '');\r\n      return [scaledValue, localizedUnit || null];\r\n  };\r\n\r\n  var scaleValueWithAbbreviation$1 = scaleValueWithAbbreviation;\n\n  const roundNumber = (number, precision, roundingFunction) => {\r\n      const resolvedPrecision = precision || 0;\r\n      const resolvedRoundingFunction = roundingFunction || Math.round;\r\n      const scaledValueForRounding = multiplyByPowerOfTen$1(number, resolvedPrecision);\r\n      const roundedScaledValue = resolvedRoundingFunction(scaledValueForRounding);\r\n      const roundedValue = multiplyByPowerOfTen$1(roundedScaledValue, -resolvedPrecision);\r\n      return roundedValue;\r\n  };\r\n\r\n  var roundNumber$1 = roundNumber;\n\n  /**\r\n   * The result from toFixed can contain an exponent for big numbers (e.g. 1.12345671234567e+50).\r\n   * <!> Only handles positive exponents.\r\n   */\r\n  const formatPositiveExponentResult = (valueAsString) => {\r\n      const [significand, exponent] = splitStringInTwoParts$1(valueAsString, 'e');\r\n      const exponentAsNumber = +exponent;\r\n      if (exponentAsNumber < 0)\r\n          return valueAsString;\r\n      const [integerPartOfSignificand, fractionalPartOfSignificand] = splitStringInTwoParts$1(significand, '.');\r\n      const numberOfZerosToAdd = exponentAsNumber - fractionalPartOfSignificand.length;\r\n      return `${integerPartOfSignificand}${fractionalPartOfSignificand}${stringRepeat$1('0', numberOfZerosToAdd)}`;\r\n  };\r\n  /**\r\n   * The result from toFixed can contain an exponent for small numbers (e.g. 1.123e-87).\r\n   * <i> Only handles negative exponents\r\n   */\r\n  const formatNegativeExponentResult = (value, exponentAsNumber, significandAsString) => {\r\n      const negativeExponentAbsoluteValue = Math.abs(exponentAsNumber);\r\n      const [integerPartOfSignificand, fractionalPartOfSignificand] = splitStringInTwoParts$1(significandAsString, '.');\r\n      const absoluteIntegerPartOfSignificand = integerPartOfSignificand[0] === '-' ? integerPartOfSignificand.slice(1) : integerPartOfSignificand;\r\n      let outputIntegerPartOfSignificand = absoluteIntegerPartOfSignificand;\r\n      let outputFractionalPartOfSignificand = fractionalPartOfSignificand;\r\n      for (let i = 0; i < negativeExponentAbsoluteValue; i += 1) {\r\n          // Consider using array.shift\r\n          const firstCharInIntegerPart = outputIntegerPartOfSignificand[0] || '';\r\n          outputIntegerPartOfSignificand = outputIntegerPartOfSignificand.slice(0, outputIntegerPartOfSignificand.length - 1);\r\n          outputFractionalPartOfSignificand = (firstCharInIntegerPart || '0') + outputFractionalPartOfSignificand;\r\n      }\r\n      return `${value < 0 ? '-' : ''}${outputIntegerPartOfSignificand || 0}.${outputFractionalPartOfSignificand}`;\r\n  };\r\n  /**\r\n   * Like Number.prototype.toString() but excluding the exponential info for small and big numbers.\r\n   * e.g.\r\n   *     Small numbers:\r\n   *         value: 0.0000000000001234 (1.234e-13)\r\n   *         toString() => \"1.234e-13\"\r\n   *         numberToStringWithoutExponent() => \"0.0000000000001234\"\r\n   *     Big numbers:\r\n   *         value: 1234123412341230000000 (1.234123412341234e+21)\r\n   *         toString() => \"1.234123412341234e+21\"\r\n   *         numberToStringWithoutExponent() => \"1234123412341230000000\"\r\n   */\r\n  const numberToNonExponentialString = (value) => {\r\n      const valueAsString = (value || 0).toString();\r\n      const valueAsStringHasExponentialInfo = valueAsString.indexOf('e') >= 0;\r\n      if (!valueAsStringHasExponentialInfo)\r\n          return valueAsString;\r\n      // If the toString returns an exponential number (e.g. 1.23e+28)\r\n      const [significand, exponent] = splitStringInTwoParts$1(valueAsString, 'e');\r\n      const exponentAsNumber = +exponent;\r\n      return exponentAsNumber >= 0\r\n          ? formatPositiveExponentResult(valueAsString)\r\n          : formatNegativeExponentResult(value, exponentAsNumber, significand);\r\n  };\r\n\r\n  var numberToNonExponentialString$1 = numberToNonExponentialString;\n\n  const addTrailingZerosInFractionalPart = (valueAsString, minimumFractionDigits) => {\r\n      const [integerPart, fractionalPart] = splitStringInTwoParts$1(valueAsString, '.');\r\n      return `${integerPart}.${fractionalPart + stringRepeat$1('0', minimumFractionDigits - fractionalPart.length)}`;\r\n  };\r\n  /**\r\n   * Implementation of Number.prototype.toFixed() that treats floats more like decimals\r\n   *\r\n   * Fixes binary rounding issues (eg. (0.615).toFixed(2) === '0.61') that present\r\n   * problems for accounting- and finance-related software.\r\n   *\r\n   * <!> This function should only receive a finite number, never NaN, Infinity or -Infinity\r\n   * <i> This function should return always a JS string representation of a number, but without exponent.\r\n   * <i> optionalFractionDigits means: from the fractionDigits amount, the ones that are optional.\r\n   */\r\n  const numberToFixed = (finiteNumber, fractionDigits, roundingFunction, optionalFractionDigits) => {\r\n      const valueAsString = numberToNonExponentialString$1(finiteNumber);\r\n      const minimumFractionDigits = fractionDigits - (optionalFractionDigits || 0);\r\n      const fractionalPartOfValueAsString = splitStringInTwoParts$1(valueAsString, '.')[1];\r\n      const targetFractionDigitsAmount = !!fractionalPartOfValueAsString\r\n          ? Math.min(Math.max(fractionalPartOfValueAsString.length, minimumFractionDigits), fractionDigits)\r\n          : minimumFractionDigits;\r\n      const roundedValue = roundNumber$1(finiteNumber, targetFractionDigitsAmount, roundingFunction);\r\n      let output = numberToNonExponentialString$1(roundedValue);\r\n      // Add trailing zeros if needed\r\n      if (!!minimumFractionDigits) {\r\n          output = addTrailingZerosInFractionalPart(output, minimumFractionDigits);\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var numberToFixed$1 = numberToFixed;\n\n  const roundValueAndAddTrailingZeros = (value, patternRules, options) => {\r\n      const { rounding } = options;\r\n      const { minimumFractionDigits, maximumFractionDigits } = patternRules;\r\n      const resolvedRoundingFunction = rounding || Math.round;\r\n      const shouldIncludeDecimalPlaces = minimumFractionDigits > 0 || maximumFractionDigits > 0;\r\n      if (shouldIncludeDecimalPlaces) {\r\n          const optionalDecimalDigitsCount = maximumFractionDigits - minimumFractionDigits;\r\n          return numberToFixed$1(value, maximumFractionDigits, resolvedRoundingFunction, optionalDecimalDigitsCount);\r\n      }\r\n      else {\r\n          return numberToFixed$1(value, 0, resolvedRoundingFunction);\r\n      }\r\n  };\r\n\r\n  var roundValueAndAddTrailingZeros$1 = roundValueAndAddTrailingZeros;\n\n  const replaceDigitsWithNumeralSystem = (numericString, numeralSystemMap) => {\r\n      if (!numeralSystemMap || numeralSystemMap.length !== 10)\r\n          return numericString;\r\n      const numericStringLength = numericString.length;\r\n      let output = '';\r\n      for (let numericStringIndex = 0; numericStringIndex < numericStringLength; numericStringIndex++) {\r\n          const char = numericString[numericStringIndex];\r\n          output += numeralSystemMap[char] || char;\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var replaceDigitsWithNumeralSystem$1 = replaceDigitsWithNumeralSystem;\n\n  /**\r\n   * <i> Add or remove leading zeros\r\n   * Expects: a value integer part as string, without the minus sign. And nothing else but a number at the start.\r\n   * Returns:\r\n   *     - The value with the added or removed leading zeros\r\n   */\r\n  const addOrRemoveLeadingZerosToValue = (valueIntegerPartWithoutSign, patternRules) => {\r\n      const { minimumIntegerDigits } = patternRules;\r\n      if (minimumIntegerDigits === 0 && +valueIntegerPartWithoutSign < 1 && +valueIntegerPartWithoutSign > -1) {\r\n          return '';\r\n      }\r\n      return valueIntegerPartWithoutSign.length >= minimumIntegerDigits\r\n          ? valueIntegerPartWithoutSign\r\n          : `${stringRepeat$1('0', minimumIntegerDigits - valueIntegerPartWithoutSign.length)}${valueIntegerPartWithoutSign}`;\r\n  };\r\n\r\n  var addOrRemoveLeadingZerosToValue$1 = addOrRemoveLeadingZerosToValue;\n\n  const addSignInfoToFullFormattedNumber = (fullFormattedValueWithoutSign, isValueNegative, isValueZero, patternRules) => {\r\n      const { negativeParentheses, forceSign } = patternRules;\r\n      let output = fullFormattedValueWithoutSign;\r\n      if (negativeParentheses && isValueNegative) {\r\n          output = output.replace(/'(nps|npe)'/g, match => match === `'nps'` ? '(' : ')');\r\n      }\r\n      else if (forceSign) {\r\n          output = output.replace(`'s'`, isValueNegative ? '-' : isValueZero ? '' : '+');\r\n      }\r\n      else if (isValueNegative) {\r\n          output = output.replace(`'s'`, '-');\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var addSignInfoToFullFormattedNumber$1 = addSignInfoToFullFormattedNumber;\n\n  /**\r\n   * Splits the given number (as string) in the integer and decimal parts.\r\n   * Returns:\r\n   *     [integerPart: string, decimalPart: string]\r\n   * <i> The integer part can potentially contain the number sign (-) if it wasn't removed previously.\r\n   * <i> It should always return [string, string]\r\n   */\r\n  const splitNumberIntegerAndDecimalParts = (valueAsString, patternRules) => {\r\n      const { optionalFractionDigits } = patternRules;\r\n      const [integerPart, decimalPart] = splitStringInTwoParts$1(valueAsString, '.');\r\n      // Checks whether optionalDecimalPlaces [.] is enabled and the value is an integer (no decimals)\r\n      if (optionalFractionDigits && Number(decimalPart) === 0) {\r\n          return [integerPart, ''];\r\n      }\r\n      return [integerPart, decimalPart];\r\n  };\r\n\r\n  var splitNumberIntegerAndDecimalParts$1 = splitNumberIntegerAndDecimalParts;\n\n  const addThousandsSeparatorToValueIntegerPart = (valueIntegerPartWithLeadingZerosAndWithoutSign, patternRules, options) => {\r\n      const { delimiters, digitGroupingStyle } = options.locale;\r\n      const { grouping } = patternRules;\r\n      if (!grouping || !delimiters.thousands) {\r\n          return valueIntegerPartWithLeadingZerosAndWithoutSign;\r\n      }\r\n      const valueAsString = valueIntegerPartWithLeadingZerosAndWithoutSign;\r\n      const thousandsSeparator = delimiters.thousands;\r\n      const digitGrouping = !!(digitGroupingStyle === null || digitGroupingStyle === void 0 ? void 0 : digitGroupingStyle.length) ? digitGroupingStyle : [3];\r\n      const restDigitGrouping = [...digitGrouping];\r\n      let output = '';\r\n      let groupingSubIteration = 1;\r\n      for (let i = valueAsString.length - 1; i >= 0; i--) {\r\n          if (groupingSubIteration === restDigitGrouping[0] && i !== 0) {\r\n              output = thousandsSeparator + valueAsString[i] + output;\r\n              if (restDigitGrouping.length > 1)\r\n                  restDigitGrouping.shift();\r\n              groupingSubIteration = 1;\r\n          }\r\n          else {\r\n              output = valueAsString[i] + output;\r\n              groupingSubIteration += 1;\r\n          }\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var addThousandsSeparatorToValueIntegerPart$1 = addThousandsSeparatorToValueIntegerPart;\n\n  /**\r\n   * Applies the localized abbreviation unit to the pattern mask\r\n   * <i> If the localized unit is empty (''), it will remove the space between the number and the abbreviation.\r\n   * <i> Replaces the single quotes from the abbreviation, to prevent collision with patternMask escaped text.\r\n   */\r\n  const applyAbbreviationLocalizedUnitToPatternMask = (patternMask, abbreviationLocalizedUnit, hasAbbreviationInPatternMask) => {\r\n      if (!hasAbbreviationInPatternMask)\r\n          return patternMask;\r\n      if (abbreviationLocalizedUnit) {\r\n          /**\r\n           * If it has abbreviation in the rules, and has a valid unit (e.g. K | M | B | T, or\r\n           * other localized one), escapes the single quotes in the localized abbreviation unit and appends to the mask.\r\n           */\r\n          return patternMask.replace(`'a'`, _ => `'${abbreviationLocalizedUnit.replace(/'/g, _ => \"\\\\'\")}'`);\r\n      }\r\n      else {\r\n          // If it has abbreviation in the rules, but it has no unit, removes the space between abbreviation and number\r\n          return patternMask.match(/'n'\\s*'a'/)\r\n              // If abbreviation is before\r\n              ? patternMask.replace(/\\s*'a'/, '')\r\n              // If abbreviation is after\r\n              : patternMask.replace(/'a'\\s*/, '');\r\n      }\r\n  };\r\n\r\n  var applyAbbreviationLocalizedUnitToPatternMask$1 = applyAbbreviationLocalizedUnitToPatternMask;\n\n  const scaleAndRoundValue = (number, patternRules, options) => {\r\n      // If it doesn't have abbreviation, just round the value and add trailing zeros\r\n      if (!patternRules.compact) {\r\n          const roundedValueAsString = roundValueAndAddTrailingZeros$1(number, patternRules, options);\r\n          return [roundedValueAsString, null];\r\n      }\r\n      // If it has abbreviation, scales the value\r\n      const [scaledValue, scaledValueLocalizedUnit] = scaleValueWithAbbreviation$1(number, patternRules, options);\r\n      const roundedScaledValue = +roundValueAndAddTrailingZeros$1(scaledValue, patternRules, options);\r\n      const [rescaledValue, rescaledValueLocalizedUnit] = rescaleRoundedValue$1(+roundedScaledValue, scaledValueLocalizedUnit, patternRules, options);\r\n      const roundedRescaledValueAsStringWithTrailingZeros = roundValueAndAddTrailingZeros$1(rescaledValue, patternRules, options);\r\n      return [roundedRescaledValueAsStringWithTrailingZeros, rescaledValueLocalizedUnit];\r\n  };\r\n  const numberToFormattedNumber = (number, pattern, options) => {\r\n      var _a;\r\n      const patternRules = parsePattern$1(pattern);\r\n      // Ensure always uses a number or default number\r\n      const resolvedValue = isFiniteNumber$1(number) ? number : 0;\r\n      const [valueAsString, localizedAbbreviationUnit] = scaleAndRoundValue(resolvedValue, patternRules, options);\r\n      // Prevents potentially wrong formatting coming from this function\r\n      if (valueAsString === 'NaN')\r\n          return '';\r\n      const isValueNegative = options.signedZero ? number < 0 : +valueAsString < 0;\r\n      const isValueZero = options.signedZero ? number === 0 : +valueAsString === 0;\r\n      const valueAsStringWithoutSign = removeSignIfExists$1(valueAsString);\r\n      const [integerPart, decimalPart] = splitNumberIntegerAndDecimalParts$1(valueAsStringWithoutSign, patternRules);\r\n      const valueIntegerPartWithLeadingZeros = addOrRemoveLeadingZerosToValue$1(integerPart, patternRules);\r\n      const valueIntegerPartWithThousandsSeparator = addThousandsSeparatorToValueIntegerPart$1(valueIntegerPartWithLeadingZeros, patternRules, options);\r\n      const numeralSystemFromLocale = options.locale.numeralSystem;\r\n      const integerPartWithNumeralSystem = replaceDigitsWithNumeralSystem$1(valueIntegerPartWithThousandsSeparator, numeralSystemFromLocale);\r\n      const decimalPartWithNumeralSystem = replaceDigitsWithNumeralSystem$1(decimalPart, numeralSystemFromLocale);\r\n      const fullNumberWithNumeralSystem = (integerPartWithNumeralSystem\r\n          + (!!decimalPartWithNumeralSystem ? (((_a = options.locale.delimiters) === null || _a === void 0 ? void 0 : _a.decimal) || '.') + decimalPartWithNumeralSystem : ''));\r\n      // Assembling\r\n      const patternMaskWithAbbreviation = applyAbbreviationLocalizedUnitToPatternMask$1(patternRules.patternMask, localizedAbbreviationUnit, patternRules.compact);\r\n      const patternMaskWithNumber = patternMaskWithAbbreviation.replace(`'n'`, _ => `'${fullNumberWithNumeralSystem.replace(/'/g, \"\\\\'\")}'`);\r\n      const patternMaskWithSignInfo = addSignInfoToFullFormattedNumber$1(patternMaskWithNumber, isValueNegative, isValueZero, patternRules);\r\n      const cleanPatternMask = patternMaskWithSignInfo.replace(/'(nps|npe|s|a|n)'/g, '');\r\n      const fullFormattedValueWithNormalizedText = patternStripAndNormalizeEscapedText(cleanPatternMask);\r\n      return fullFormattedValueWithNormalizedText;\r\n  };\r\n\r\n  var numberToFormattedNumber$1 = numberToFormattedNumber;\n\n  /**\r\n   * Basis point format (BPS)\r\n   * <i> See https://en.wikipedia.org/wiki/Basis_point\r\n   */\r\n  const bpsFormatter = {\r\n      name: 'bps',\r\n      regexps: {\r\n          format: /BPS/,\r\n          unformat: /BPS/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const scaledValue = multiplyByPowerOfTen$1(number, 4);\r\n          const patternWithEscapedBPS = patternReplace(pattern, /BPS/, `'BPS'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedBPS, options);\r\n          return formatResult.replace('BPS', 'BPS');\r\n      },\r\n      unformat: (string, options) => {\r\n          const number = formattedStringToNumber$1(string.replace(/\\s?BPS/, ''), options);\r\n          return isFiniteNumber$1(number) ? multiplyByPowerOfTen$1(number, -4) : number;\r\n      },\r\n  };\r\n\r\n  var bpsFormatter$1 = bpsFormatter;\n\n  const timeFormatter = {\r\n      name: 'time',\r\n      regexps: {\r\n          format: /([0-9]{1,2}:[0-9]{2}) *$/,\r\n          unformat: /([0-9]{1,2}:[0-9]{2}) *$/,\r\n      },\r\n      format: (number) => {\r\n          const absoluteValue = Math.abs(number);\r\n          const sign = number < 0 ? '-' : '';\r\n          const hours = truncateNumber$1(absoluteValue / 3600);\r\n          const minutes = truncateNumber$1((absoluteValue - (hours * 3600)) / 60);\r\n          const seconds = truncateNumber$1(absoluteValue - (hours * 3600) - (minutes * 60));\r\n          return `${sign}${hours}:${(minutes < 10 ? '0' : '') + minutes}:${(seconds < 10 ? '0' : '') + seconds}`;\r\n      },\r\n      unformat: (string) => {\r\n          const isNegative = /^ *-/.test(string);\r\n          const stringWithoutSign = string.replace(/^ *-/, '');\r\n          const timeArray = stringWithoutSign.split(':').reverse();\r\n          let seconds = 0;\r\n          seconds += +timeArray[0];\r\n          seconds += +timeArray[1] * 60;\r\n          seconds += (+timeArray[2] || 0) * 3600;\r\n          return isNegative && seconds !== 0 ? -seconds : seconds;\r\n      },\r\n  };\r\n\r\n  var timeFormatter$1 = timeFormatter;\n\n  const decimalSuffixes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n  const binarySuffixes = ['B', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\r\n  const allSuffixes = decimalSuffixes.concat(binarySuffixes.slice(1));\r\n  /** Avoid collision with BPS format @see formats|bps.ts */\r\n  const unformatRegex = `(${allSuffixes.join('|').replace(/B/g, 'B(?!PS)')})`;\r\n  const bytesDecimalScale = unitScale({ base: 'B', scale: toObject$1(decimalSuffixes, (unit, unitIndex) => [unit, Math.pow(1000, unitIndex)]) });\r\n  const bytesBinaryScale = unitScale({ base: 'B', scale: toObject$1(binarySuffixes, (unit, unitIndex) => [unit, Math.pow(1024, unitIndex)]) });\r\n  const bytesFormatter = {\r\n      name: 'bytes',\r\n      regexps: {\r\n          format: /([0\\s]b[bd])|(b[bd][0\\s])/,\r\n          unformat: (string, options) => options.type === 'bytes' ? new RegExp(unformatRegex).test(string) : false,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const scale = patternIncludes(pattern, 'bb') ? bytesBinaryScale : bytesDecimalScale;\r\n          const [scaledValue, scaledValueUnit] = scale.toBest(number, 'B');\r\n          const patternWithEscapedBytes = patternReplace(pattern, /b[bd]/, `'bytes'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedBytes, options);\r\n          return formatResult.replace('bytes', scaledValueUnit || '');\r\n      },\r\n      unformat: (string, options) => {\r\n          var _a;\r\n          const number = formattedStringToNumber$1(string.replace(new RegExp(unformatRegex), ''), options);\r\n          const suffix = ((_a = string.match(unformatRegex)) === null || _a === void 0 ? void 0 : _a[0]) || '';\r\n          const scale = !!bytesBinaryScale.scaleDefinition.scale[suffix] ? bytesBinaryScale : bytesDecimalScale;\r\n          return number ? scale.toBase(number, suffix) : number;\r\n      }\r\n  };\r\n\r\n  var bytesFormatter$1 = bytesFormatter;\n\n  const ordinalFormatter = {\r\n      name: 'ordinal',\r\n      regexps: {\r\n          format: /o/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          var _a, _b;\r\n          const localizedOrdinal = ((_b = (_a = options.locale).ordinal) === null || _b === void 0 ? void 0 : _b.call(_a, number)) || '';\r\n          const patternWithEscapedOrdinal = patternReplace(pattern, /o/, `'ord'`);\r\n          const formatResult = numberToFormattedNumber$1(number, patternWithEscapedOrdinal, options);\r\n          return formatResult.replace('ord', _ => localizedOrdinal);\r\n      }\r\n  };\r\n\r\n  var ordinalFormatter$1 = ordinalFormatter;\n\n  const currencySymbolsMap = {\r\n      EUR: '',\r\n      USD: '$',\r\n      XCD: 'EC$',\r\n      AUD: 'A$',\r\n      INR: '',\r\n      BRL: 'R$',\r\n      CAD: 'CA$',\r\n      XAF: 'FCFA',\r\n      CNY: 'CN',\r\n      NZD: 'NZ$',\r\n      XPF: 'CFPF',\r\n      GBP: '',\r\n      HKD: 'HK$',\r\n      ILS: '',\r\n      JPY: '',\r\n      KRW: '',\r\n      XOF: 'CFA',\r\n      MXN: 'MX$',\r\n      TWD: 'NT$',\r\n      VND: '',\r\n  };\r\n  const currencyFormatter = {\r\n      name: 'currency',\r\n      regexps: {\r\n          format: /(\\$)/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          var _a;\r\n          const currencyFromOptions = (_a = options.currency) === null || _a === void 0 ? void 0 : _a.toUpperCase();\r\n          const localizedCurrencySymbol = currencySymbolsMap[currencyFromOptions] || currencyFromOptions || '';\r\n          const patternWithEscapedCurrencySymbol = patternReplace(pattern, /\\$/, `'currency'`);\r\n          const formatResult = numberToFormattedNumber$1(number, patternWithEscapedCurrencySymbol, options);\r\n          return formatResult.replace('currency', _ => localizedCurrencySymbol);\r\n      },\r\n  };\r\n\r\n  var currencyFormatter$1 = currencyFormatter;\n\n  const percentageFormatter = {\r\n      name: 'percentage',\r\n      regexps: {\r\n          format: /%!?/,\r\n          unformat: /%/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const hasNotScalePercentageSymbolInPattern = patternIncludes(pattern, '%!');\r\n          const scaledValue = options.scalePercentage && !hasNotScalePercentageSymbolInPattern ? multiplyByPowerOfTen$1(number, 2) : number;\r\n          const patternWithEscapedPercentage = patternReplace(pattern, /%!?/, `'%'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedPercentage, options);\r\n          return formatResult.replace('%', '%');\r\n      },\r\n      unformat: (string, options) => {\r\n          const number = formattedStringToNumber$1(string.replace(/\\s?%/, ''), options);\r\n          return number && options.scalePercentage ? multiplyByPowerOfTen$1(number, -2) : number;\r\n      },\r\n  };\r\n\r\n  var percentageFormatter$1 = percentageFormatter;\n\n  const exponentialFormatter = {\r\n      name: 'exponential',\r\n      regexps: {\r\n          format: /[eE][+-][0-9]+/,\r\n          unformat: /[eE][+-][0-9]+/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const exponential = typeof number === 'number' && !isNaNNumber$1(number) ? number.toExponential() : '0e+0';\r\n          const parts = splitStringInTwoParts$1(exponential, 'e');\r\n          const patternWithoutExponential = patternReplace(pattern, /e[+|-]{1}0/i, '');\r\n          const formatResult = numberToFormattedNumber$1(+parts[0], patternWithoutExponential, options);\r\n          return formatResult + 'e' + parts[1];\r\n      },\r\n      unformat: (string, options) => {\r\n          var _a;\r\n          const value = formattedStringToNumber$1(string.replace(/e[+-]{1}[0-9]{1,3}/i, ''), options);\r\n          const powerOfTenExponent = +(((_a = string.match(/e([+-]{1}[0-9]{1,3})/i)) === null || _a === void 0 ? void 0 : _a[1]) || '0');\r\n          return isFiniteNumber$1(value) ? multiplyByPowerOfTen$1(value, powerOfTenExponent) : value;\r\n      },\r\n  };\r\n\r\n  var exponentialFormatter$1 = exponentialFormatter;\n\n  const BUILT_IN_FORMATTERS = [\r\n      percentageFormatter$1,\r\n      currencyFormatter$1,\r\n      ordinalFormatter$1,\r\n      timeFormatter$1,\r\n      bytesFormatter$1,\r\n      exponentialFormatter$1,\r\n      bpsFormatter$1,\r\n  ];\r\n\r\n  var BUILT_IN_FORMATTERS$1 = BUILT_IN_FORMATTERS;\n\n  const roundHalfAwayFromZero = (value) => {\r\n      return value >= 0\r\n          ? Math.round(value)\r\n          : (value % 0.5 === 0) ? Math.floor(value) : Math.round(value);\r\n  };\r\n\r\n  var roundHalfAwayFromZero$1 = roundHalfAwayFromZero;\n\n  const areDelimitersValid = (delimiters) => {\r\n      return !!(delimiters === null || delimiters === void 0 ? void 0 : delimiters.decimal)\r\n          && isString$1(delimiters === null || delimiters === void 0 ? void 0 : delimiters.thousands)\r\n          && delimiters.decimal !== delimiters.thousands;\r\n  };\r\n  const resolveOptionsLocale = (optionsLocale) => {\r\n      const defaultLocale = locale$1;\r\n      if (!isObject$1(optionsLocale))\r\n          return defaultLocale;\r\n      return merge(optionsLocale, {\r\n          delimiters: areDelimitersValid(optionsLocale.delimiters) ? optionsLocale.delimiters : defaultLocale.delimiters,\r\n          abbreviations: optionsLocale.abbreviations || defaultLocale.abbreviations,\r\n          ordinal: optionsLocale.ordinal || defaultLocale.ordinal,\r\n      });\r\n  };\r\n  const resolveRoundingOption = (roundingOption) => {\r\n      switch (roundingOption) {\r\n          case 'ceil': return Math.ceil;\r\n          case 'floor': return Math.floor;\r\n          case 'truncate': return truncateNumber$1;\r\n          case 'half-up': return Math.round;\r\n          case 'half-away-from-zero': return roundHalfAwayFromZero$1;\r\n          default: return isFunction$1(roundingOption) ? roundingOption : roundHalfAwayFromZero$1;\r\n      }\r\n  };\r\n  const resolveOptionsFormatters = (optionsFormatters) => {\r\n      if (!optionsFormatters)\r\n          return BUILT_IN_FORMATTERS$1;\r\n      return isFunction$1(optionsFormatters)\r\n          ? optionsFormatters(BUILT_IN_FORMATTERS$1)\r\n          : [...optionsFormatters, ...BUILT_IN_FORMATTERS$1];\r\n  };\r\n  const resolveFormatOptions = (formatOptions) => {\r\n      var _a, _b, _c;\r\n      const options = formatOptions || {};\r\n      const resolvedRoundingFunction = resolveRoundingOption(options.rounding);\r\n      const resolvedLocale = resolveOptionsLocale(options.locale);\r\n      const resolvedFormatters = resolveOptionsFormatters(options.formatters);\r\n      return {\r\n          defaultPattern: options.defaultPattern || '0,0.##########',\r\n          nullFormat: options.nullFormat || '',\r\n          nanFormat: options.nanFormat,\r\n          zeroFormat: options.zeroFormat,\r\n          locale: resolvedLocale,\r\n          rounding: resolvedRoundingFunction,\r\n          type: options.type,\r\n          scalePercentage: (_a = options.scalePercentage) !== null && _a !== void 0 ? _a : true,\r\n          trim: (_b = options.trim) !== null && _b !== void 0 ? _b : true,\r\n          formatters: resolvedFormatters,\r\n          currency: options.currency,\r\n          signedZero: !!options.signedZero,\r\n          nonBreakingSpace: (_c = options.nonBreakingSpace) !== null && _c !== void 0 ? _c : false,\r\n      };\r\n  };\r\n\r\n  var resolveFormatOptions$1 = resolveFormatOptions;\n\n  const getUnformatFunctionIfMatch = (input, resolvedOptions) => {\r\n      for (const formatter of resolvedOptions.formatters) {\r\n          const matcher = formatter.regexps.unformat;\r\n          if (!matcher)\r\n              continue;\r\n          const matcherResult = isFunction$1(matcher) ? matcher(input, resolvedOptions) : !!input.match(matcher);\r\n          if (matcherResult)\r\n              return formatter.unformat;\r\n      }\r\n  };\r\n  const parse$2 = (input, options) => {\r\n      const resolvedOptions = resolveFormatOptions$1(options);\r\n      let value;\r\n      if (isNil$1(input) || isNaNNumber$1(input)) {\r\n          value = null;\r\n      }\r\n      else if (typeof input === 'number') {\r\n          // Handles negative zero\r\n          value = input === 0 ? 0 : input;\r\n      }\r\n      else if (typeof input === 'string') {\r\n          if (resolvedOptions.zeroFormat && input === resolvedOptions.zeroFormat) {\r\n              value = 0;\r\n          }\r\n          else if (resolvedOptions.nullFormat && input === resolvedOptions.nullFormat) {\r\n              value = null;\r\n          }\r\n          else {\r\n              // Removes non-breaking spaces if they exists\r\n              const inputStringWithNormalSpaces = input.replace(/\\u00A0/, ' ');\r\n              const unformatFunctionFromFormatters = getUnformatFunctionIfMatch(inputStringWithNormalSpaces, resolvedOptions);\r\n              const unformatFunction = unformatFunctionFromFormatters || formattedStringToNumber$1;\r\n              value = unformatFunction(inputStringWithNormalSpaces, resolvedOptions);\r\n          }\r\n      }\r\n      else {\r\n          const result = +input;\r\n          value = result === 0 ? result : (result || null);\r\n      }\r\n      return value;\r\n  };\r\n\r\n  var parse$1$1 = parse$2;\n\n  /**\r\n   * @example\r\n   * ```javascript\r\n   * parse('1,250.48')\r\n   * //=> 1250.48\r\n   * parse('10 %')\r\n   * //=> 0.1\r\n   * parse('1 000,582', { locale: fr })\r\n   * //=> 1000.582\r\n   * ```\r\n   * Parse the given numeric-string applying the provided options.\r\n   *\r\n   * options:\r\n   * ```typescript\r\n   * {\r\n   * nullFormat?: string;\r\n   * nanFormat?: string;\r\n   * zeroFormat?: string;\r\n   * defaultPattern?: string;\r\n   * rounding?: 'truncate' | 'ceil' | 'floor' | 'round' | ((scaledValueForRounding: number) => number);\r\n   * locale?: NumerableLocale;\r\n   * type?: string;\r\n   * scalePercentage?: boolean;\r\n   * formatters?: NumerableFormatter[] | ((builtInFormatters: NumerableFormatter[]) => NumerableFormatter[]);\r\n   * }\r\n   * ```\r\n   *\r\n   * @param string string: The numeric-string to parse (e.g. **'10 %'**)\r\n   * @param options options: The options used to parse the numeric-string\r\n   * ```typescript\r\n   * {\r\n   * nullFormat?: string;\r\n   * nanFormat?: string;\r\n   * zeroFormat?: string;\r\n   * defaultPattern?: string;\r\n   * rounding?: 'truncate' | 'ceil' | 'floor' | 'round' | ((scaledValueForRounding: number) => number);\r\n   * locale?: NumerableLocale;\r\n   * type?: string;\r\n   * scalePercentage?: boolean;\r\n   * formatters?: NumerableFormatter[] | ((builtInFormatters: NumerableFormatter[]) => NumerableFormatter[]);\r\n   * }\r\n   * ```\r\n   */\r\n  const parse = (string, options) => {\r\n      return parse$1$1(string, options);\r\n  };\r\n\r\n  var parse$1 = parse;\n\n  /**\r\n   * @example\r\n   * ```javascript\r\n   * round(12.687, 2)\r\n   * //=> 12.69\r\n   * round(12.687)\r\n   * //=> 13\r\n   * round(12.687, 2, Math.floor)\r\n   * //=> 12.68\r\n   * ```\r\n   * Rounds the given number to the specified amount of decimal places.\r\n   *\r\n   * - The **default precision** is 0.\r\n   * - The **default roundingFunction** is Math.round.\r\n   *\r\n   * @param number number: The number to round (e.g. **10.23**)\r\n   * @param precision precision: The desired amount of decimal places (e.g. **2**)\r\n   * @param roundingFunction roundingFunction: The function applied for rounding (e.g. **Math.floor**)\r\n   * */\r\n  const round = (number, precision, roundingFunction) => {\r\n      return roundNumber$1(number, precision, roundingFunction);\r\n  };\r\n\r\n  var round$1 = round;\n\n  const getFormatFunctionIfMatch = (pattern, resolvedOptions) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(pattern);\r\n      for (const formatter of resolvedOptions.formatters) {\r\n          const matcher = formatter.regexps.format;\r\n          if (!matcher)\r\n              continue;\r\n          const matcherResult = isFunction$1(matcher) ? matcher(pattern, resolvedOptions) : !!patternWithoutEscapedText.match(matcher);\r\n          if (matcherResult)\r\n              return formatter.format;\r\n      }\r\n  };\r\n  const format$1 = (value, pattern, options) => {\r\n      var _a;\r\n      try {\r\n          const resolvedValue = isString$1(value) ? parseFloat(value) : value;\r\n          const resolvedOptions = resolveFormatOptions$1(options);\r\n          const resolvedPattern = pattern || resolvedOptions.defaultPattern;\r\n          let output;\r\n          if (resolvedValue === Infinity || resolvedValue === -Infinity) {\r\n              output = resolvedValue > 0 ? '' : '-';\r\n          }\r\n          else if (isNaNNumber$1(resolvedValue)) {\r\n              return isString$1(resolvedOptions.nanFormat)\r\n                  ? resolvedOptions.nanFormat\r\n                  : (isString$1(resolvedOptions.nullFormat) ? resolvedOptions.nullFormat : '');\r\n          }\r\n          else if (isNil$1(resolvedValue)) {\r\n              output = isString$1(resolvedOptions.nullFormat) ? resolvedOptions.nullFormat : '';\r\n          }\r\n          else if (resolvedValue === 0 && isString$1(resolvedOptions.zeroFormat)) {\r\n              output = resolvedOptions.zeroFormat;\r\n          }\r\n          else {\r\n              // <!> Here value should always be a number\r\n              const resolvedValueAsNumber = resolvedValue || 0;\r\n              const formatFunctionFromFormatters = getFormatFunctionIfMatch(resolvedPattern, resolvedOptions);\r\n              const resolvedFormatFunction = formatFunctionFromFormatters || numberToFormattedNumber$1;\r\n              output = resolvedFormatFunction(resolvedValueAsNumber, resolvedPattern, resolvedOptions);\r\n          }\r\n          // Ensures that it always returns an string\r\n          output = isString$1(output) ? output : '';\r\n          // Replaces spaces with non-breaking spaces if needed\r\n          output = resolvedOptions.nonBreakingSpace\r\n              ? output.replace(/ /g, _ => '\\u00A0')\r\n              : output;\r\n          // Trims the output if needed\r\n          output = resolvedOptions.trim ? output.trim() : output;\r\n          return output;\r\n      }\r\n      catch (_error) {\r\n          return ((_a = options) === null || _a === void 0 ? void 0 : _a._errorFormat) || '';\r\n      }\r\n  };\r\n\r\n  var format$1$1 = format$1;\n\n  function format(number, arg2, arg3) {\r\n      const pattern = isString$1(arg2) ? arg2 : null;\r\n      const options = isObject$1(arg2) ? arg2 : (isObject$1(arg3) ? arg3 : {});\r\n      return format$1$1(number, pattern, options);\r\n  }\r\n  const createFormatFunction = (options) => {\r\n      const baseOptions = merge(options, {\r\n          locale: isFunction$1(options.locale) ? options.locale() : options.locale,\r\n      });\r\n      return ((value, arg2, arg3) => {\r\n          const pattern = isString$1(arg2) ? arg2 : null;\r\n          const optionsFromArguments = isObject$1(arg2) ? arg2 : (isObject$1(arg3) ? arg3 : {});\r\n          return format$1$1(value, pattern, merge(baseOptions, optionsFromArguments));\r\n      });\r\n  };\r\n  format.withOptions = createFormatFunction;\n\n  const unique = (arr) => {\r\n      if (!arr)\r\n          return [];\r\n      return arr.filter((value, index, self) => self.indexOf(value) === index);\r\n  };\r\n\r\n  var unique$1 = unique;\n\n  // <i> Extracted from https://stackoverflow.com/questions/12006095/javascript-how-to-check-if-character-is-rtl\r\n  const leftToRightMark = '\\u200e';\r\n  const rtlCharsRanges = '\\u0591-\\u07FF\\u200F\\u202B\\u202E\\uFB1D-\\uFDFD\\uFE70-\\uFEFC';\r\n  const rtlDirCheck = new RegExp('^[^' + rtlCharsRanges + ']*?[' + rtlCharsRanges + ']');\r\n  const isRTL = (string) => rtlDirCheck.test(string);\r\n  const appendLeftToRightMarkIfIsRTL = (string) => isRTL(string) ? string + leftToRightMark : string;\r\n  // const languagesWith4DigitsGroupingStyle = ['zh', 'yue', 'ko', 'ja'];\r\n  const languagesWith4DigitsGroupingStyle = ['yue', 'ko', 'ja']; //***\r\n  const toLocaleStringSupportsOptions = () => {\r\n      return typeof Intl === 'object' && !!Intl && typeof Intl.NumberFormat === 'function';\r\n  };\r\n  const getNumeralSystemDigits = (languageTag) => {\r\n      try {\r\n          const localizedNumber = (1234567890).toLocaleString(languageTag, { useGrouping: false });\r\n          const lookupObject = {};\r\n          const repeatedChar = localizedNumber.split('').find((char) => {\r\n              if (lookupObject[char])\r\n                  return true;\r\n              lookupObject[char] = true;\r\n          });\r\n          const digitsWithoutGroupingDelimiters = repeatedChar\r\n              ? localizedNumber.replace(new RegExp(escapeRegexString$1(repeatedChar || ''), 'g'), '')\r\n              : localizedNumber;\r\n          const digitsAsArray = digitsWithoutGroupingDelimiters.split('');\r\n          const sortedDigits = [digitsAsArray[digitsAsArray.length - 1], ...digitsAsArray.slice(0, -1)];\r\n          return sortedDigits.join('');\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getGroupingAndFractionDelimiters = (languageTag, digits) => {\r\n      try {\r\n          const localizedNumber = (12345678.123).toLocaleString(languageTag);\r\n          const localizedNumberWithoutDigits = localizedNumber.replace(new RegExp(`[${escapeRegexString$1(digits)}]`, 'g'), '');\r\n          const [groupingDelimiter = ',', fractionDelimiter = '.'] = unique$1(localizedNumberWithoutDigits.split(''));\r\n          return [groupingDelimiter, fractionDelimiter];\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getGroupingStyle = (languageTag, groupingDelimiter) => {\r\n      // <i> Handle '4 digits' grouping style for some asian countries (not CLDR)\r\n      if (languagesWith4DigitsGroupingStyle.some(language => languageTag.indexOf(language) === 0))\r\n          return [4];\r\n      try {\r\n          const result = [];\r\n          let subIterationIndex = 0;\r\n          (100000000000).toLocaleString(languageTag).split('').reverse().forEach((digitOrGroupingDelimiter) => {\r\n              if (digitOrGroupingDelimiter === groupingDelimiter) {\r\n                  result.push(subIterationIndex);\r\n                  subIterationIndex = 0;\r\n              }\r\n              else {\r\n                  subIterationIndex += 1;\r\n              }\r\n          });\r\n          let resultIndex = result.length;\r\n          while (resultIndex--) {\r\n              if (result[resultIndex] === result[resultIndex - 1])\r\n                  result.pop();\r\n              else\r\n                  break;\r\n          }\r\n          return result;\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getAbbreviations = (languageTag, digits, type) => {\r\n      try {\r\n          if (!toLocaleStringSupportsOptions())\r\n              return null;\r\n          const intlFormatOptions = { notation: 'compact', useGrouping: false, compactDisplay: type };\r\n          const [digitOfZero, digitOfOne, digitOfTwo] = digits.split('');\r\n          let abbreviations = '';\r\n          for (let i = 1; i < 50; i++) {\r\n              const abbreviationResultForOne = (+(1 + stringRepeat$1('0', i))).toLocaleString(languageTag, intlFormatOptions);\r\n              if (new RegExp(`^${digitOfOne}[^${digitOfZero}]+$`).test(abbreviationResultForOne)) {\r\n                  if (type === 'long') {\r\n                      const abbreviationResultForTwo = (+(2 + stringRepeat$1('0', i))).toLocaleString(languageTag, intlFormatOptions);\r\n                      const abbreviationOne = abbreviationResultForOne.replace(new RegExp(`${digitOfOne}`, 'g'), '').trim();\r\n                      const abbreviationTwo = abbreviationResultForTwo.replace(new RegExp(`${digitOfTwo}`, 'g'), '').trim();\r\n                      abbreviations += '|' + appendLeftToRightMarkIfIsRTL(abbreviationOne) + ':::' + appendLeftToRightMarkIfIsRTL(abbreviationTwo);\r\n                  }\r\n                  else {\r\n                      const abbreviation = abbreviationResultForOne.replace(new RegExp(`${digitOfOne}`, 'g'), '').trim();\r\n                      abbreviations += '|' + appendLeftToRightMarkIfIsRTL(abbreviation);\r\n                  }\r\n              }\r\n              else {\r\n                  abbreviations += '|';\r\n              }\r\n          }\r\n          // Remove trailing pipes '|'\r\n          let result = abbreviations;\r\n          let resultIndex = result.length;\r\n          while (resultIndex--) {\r\n              if (result[resultIndex] === '|')\r\n                  result = result.slice(0, -1);\r\n              else\r\n                  break;\r\n          }\r\n          return result;\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const baseGetLocaleFromPlatform = (languageTag) => {\r\n      const resolvedLanguageTag = languageTag || 'en';\r\n      const digits = getNumeralSystemDigits(resolvedLanguageTag);\r\n      const resolvedDigits = digits || '0123456789';\r\n      const delimiters = getGroupingAndFractionDelimiters(resolvedLanguageTag, resolvedDigits);\r\n      const [groupingDelimiter, fractionDelimiter] = !!delimiters && delimiters.length >= 2 ? delimiters : [',', '.'];\r\n      const groupingStyle = getGroupingStyle(resolvedLanguageTag, groupingDelimiter);\r\n      const shortAbbreviations = getAbbreviations(resolvedLanguageTag, resolvedDigits, 'short');\r\n      const longAbbreviations = getAbbreviations(resolvedLanguageTag, resolvedDigits, 'long');\r\n      return {\r\n          _abbreviationsLong: longAbbreviations || locale$1.abbreviations,\r\n          code: resolvedLanguageTag,\r\n          delimiters: { thousands: groupingDelimiter, decimal: fractionDelimiter },\r\n          abbreviations: shortAbbreviations || locale$1.abbreviations,\r\n          digitGroupingStyle: !!(groupingStyle === null || groupingStyle === void 0 ? void 0 : groupingStyle.length) ? groupingStyle : undefined,\r\n          numeralSystem: digits !== '0123456789' ? digits === null || digits === void 0 ? void 0 : digits.split('').map(appendLeftToRightMarkIfIsRTL) : undefined,\r\n          ordinal: locale$1.ordinal,\r\n      };\r\n  };\r\n  const getLocaleFromPlatform$2 = memoize$1(baseGetLocaleFromPlatform);\r\n\r\n  var getLocaleFromPlatform$1$1 = getLocaleFromPlatform$2;\n\n  /**\r\n   * Given a language tag (e.g. '**zh**' | '**es**' | '**fr**' | '**en-IN**' | '**zh-Hans**'), returns a NumerableLocale\r\n   * object extracted from the platform Intl.NumberFormat behavior.\r\n   *\r\n   * This locale object can be used in the numerable functions that support i18n (*format* and *parse*).\r\n   * Example:\r\n   * ```javascript\r\n   * format(12345, '0,0.00', { locale: getLocaleFromPlatform('fr') })\r\n   * ```\r\n   *\r\n   * <i> Take into account that the returned locale is not complete, and some features like\r\n   *     'ordinal formatting' won't work. Use this feature only for simple applications that don't require\r\n   *     full support from numeral, and don't target legacy browsers.\r\n   */\r\n  const getLocaleFromPlatform = (languageTag) => {\r\n      return getLocaleFromPlatform$1$1(languageTag);\r\n  };\r\n\r\n  var getLocaleFromPlatform$1 = getLocaleFromPlatform;\n\n  var numerable = {\n    __proto__: null,\n    format,\n    getLocaleFromPlatform: getLocaleFromPlatform$1,\n    parse: parse$1,\n    round: round$1\n  };\n\n  // Extend\r\n  Object.assign(ew$1, numerable, sprintfjs);\n\n})(ew, jQuery, luxon);\n"],"mappings":"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","ignoreList":[]}